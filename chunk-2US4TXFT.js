import{A as B,E as H,I as K,L as U,O as $,P as j,h as O,i as P,m as x,o as z,p as N,q as V,r as q,v as R,y as W}from"./chunk-NIG4B4MI.js";import"./chunk-PUZ5GJNA.js";import"./chunk-Y45PPOUM.js";import"./chunk-CTNUTYXD.js";import"./chunk-3C42XH46.js";import{Je as A,gb as L,la as y,lb as T,pe as k,qa as I,qe as F,se as M}from"./chunk-JL57LTZI.js";import"./chunk-M36VALSQ.js";import"./chunk-PFIY2HHB.js";import{Na as u,P as b,Tb as E,Ub as p,Wc as w,_a as v,fa as S,ib as d,vb as c,wb as l,x as g,xb as h}from"./chunk-FTN7SDNT.js";var G=(()=>{class n{constructor(){this.filterTypeEnum=O,this.dataTypeEnum=P,this.selectOptions=["Laptops 1 (Level 1)","Laptops 12 (Level 1)"],this.source=new V(new D),this.childSource=new q(new C)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=v({type:n,selectors:[["fdp-doc-advanced-scrolling-example"]],decls:8,vars:21,consts:[["table",""],["selectionMode","multiple","relationKey","children","emptyTableMessage","No data found","bodyHeight","300px","hasChildrenKey","hasChildren",3,"dataSource","childDataSource","isTreeTable","virtualScroll","pageScrolling","pageSize","renderAhead","pageScrollingThreshold","expandOnInit"],["title","Order Line Items",3,"hideItemCount","hideSearchInput"],["name","name","key","name","label","Name","align","start",3,"filterSelectOptions","sortable","filterable"],["name","description","key","description","label","Description"],["name","price","key","price.value","label","Price","align","end",3,"sortable","filterable","dataType"],["name","status","key","status","label","Status","align","center",3,"sortable","filterable","dataType"],[3,"table"]],template:function(i,r){if(i&1&&(c(0,"fdp-table",1,0),h(2,"fdp-table-toolbar",2)(3,"fdp-column",3)(4,"fdp-column",4)(5,"fdp-column",5)(6,"fdp-column",6),l(),h(7,"fdp-table-p13-dialog",7)),i&2){let a=E(1);d("dataSource",r.source)("childDataSource",r.childSource)("isTreeTable",!0)("virtualScroll",!0)("pageScrolling",!0)("pageSize",50)("renderAhead",50)("pageScrollingThreshold",80)("expandOnInit",!0),u(2),d("hideItemCount",!1)("hideSearchInput",!0),u(),d("filterSelectOptions",r.selectOptions)("sortable",!0)("filterable",!0),u(2),d("sortable",!0)("filterable",!0)("dataType",r.dataTypeEnum.NUMBER),u(),d("sortable",!0)("filterable",!0)("dataType",r.dataTypeEnum.STRING),u(),d("table",a)}},dependencies:[j,$,H,U,K,W,R,B,T],encapsulation:2,changeDetection:0})}}return n})(),C=class extends N{constructor(){super(...arguments),this.items=new Map,this.totalItems=200,this.startIndex=0,this.allItemsMap=new Map}rowChildrenCount(e){return g(this.totalItems)}fetch(e,t){let i=new Map;return t?.forEach(r=>{let a=this.allItemsMap.get(r),s=e?.page.currentPage;if(a||(a=_(this.totalItems,r.level+1),this.allItemsMap.set(r,a)),e?.searchInput&&(a=this.search(a,e)),e?.sortBy&&(a=this.sort(a,e)),e?.filterBy&&(a=this.filter(a,e)),s&&e?.page){let m=(s-1)*e.page.pageSize;a=a.slice(m,m+e.page.pageSize)}i.set(r,a)}),g(i).pipe(b(1e3))}search(e,{searchInput:t,columnKeys:i}){let r=t?.text||"",a=i;return r.trim()===""||a.length===0?e:e.filter(s=>a.map(o=>f(o,s)).filter(o=>!!o).map(o=>o.toString()).some(o=>o.toLocaleLowerCase().includes(r.toLocaleLowerCase())))}filter(e,{filterBy:t}){return t.filter(({field:i})=>!!i).forEach(i=>{e=e.filter(r=>{switch(i.field){case"name":case"description":case"status":case"statusColor":return Q(r,i);case"price.value":return X(r,i);default:return!1}})}),e}sort(e,{sortBy:t}){return t=t.filter(({field:i})=>!!i),t.length===0?e:e.sort((i,r)=>t.map(({field:a,direction:s})=>{let m=s===x.ASC?1:-1;return J(i,r,a)*m}).find((a,s,m)=>a!==0||s===m.length-1)??0)}},D=class extends z{constructor(e=0){super(),this.level=e,this.items=[],this.totalItems=5e3,this.startIndex=0}fetch(e){if(this.allItems=this.allItems||_(this.totalItems,this.level),this.items=[...this.allItems],e?.searchInput&&(this.items=this.search(this.items,e)),e?.sortBy&&(this.items=this.sort(e)),e?.filterBy&&(this.items=this.filter(this.items,e)),e?.page?.currentPage){let t=(e.page.currentPage-1)*e.page.pageSize;this.items=this.items.slice(t,t+e.page.pageSize)}return g(this.items).pipe(b(1e3))}search(e,{searchInput:t,columnKeys:i}){let r=t?.text||"",a=i;return r.trim()===""||a.length===0?e:e.filter(s=>a.map(o=>f(o,s)).filter(o=>!!o).map(o=>o.toString()).some(o=>o.toLocaleLowerCase().includes(r.toLocaleLowerCase())))}filter(e,{filterBy:t}){return t.filter(({field:i})=>!!i).forEach(i=>{e=e.filter(r=>{switch(i.field){case"name":case"description":case"status":case"statusColor":return Q(r,i);case"price.value":return X(r,i);default:return!1}})}),e}sort({sortBy:e}){let t=this.items.slice();return e=e.filter(({field:i})=>!!i),e.length===0?t:t.sort((i,r)=>e.map(({field:a,direction:s})=>{let m=s===x.ASC?1:-1;return J(i,r,a)*m}).find((a,s,m)=>a!==0||s===m.length-1)??0)}};function _(n=5e3,e=0,t=0){return new Array(n).fill(null).map(()=>({name:`Laptops ${t++} (Level ${e+1})`,description:"pede malesuada",price:{value:489.01,currency:"EUR"},status:"Out of stock",statusColor:"negative",date:new L(2020,2,5),verified:!0,hasChildren:e<2}))}var J=(n,e,t)=>(t&&(n=f(t,n),e=f(t,e)),n>e?1:n===e?0:-1);function f(n,e){return n.split(".").reduce((t,i)=>t?t[i]:null,e)}var Q=(n,e)=>{let t=e.value&&e.value.toLocaleLowerCase(),i=e.value2&&e.value2.toLocaleLowerCase()||"",r=f(e.field,n).toLocaleLowerCase(),a=!1;switch(e.strategy){case"equalTo":a=r===t;break;case"greaterThan":a=r>t;break;case"greaterThanOrEqualTo":a=r>=t;break;case"lessThan":a=r<t;break;case"lessThanOrEqualTo":a=r<=t;break;case"between":a=r>=t&&r<=i;break;case"beginsWith":a=r.startsWith(t);break;case"endsWith":a=r.endsWith(t);break;case"contains":default:a=r.includes(t)}return e.exclude?!a:a},X=(n,e)=>{let t=Number.parseFloat(e.value),i=Number.parseFloat(e.value2)||0,r=Number.parseFloat(f(e.field,n)),a=!1;switch(e.strategy){case"greaterThan":a=r>t;break;case"greaterThanOrEqualTo":a=r>=t;break;case"lessThan":a=r<t;break;case"lessThanOrEqualTo":a=r<=t;break;case"between":a=r>=t&&r<=i;break;case"equalTo":default:a=r===t}return e.exclude?!a:a};var Ee=(()=>{class n{constructor(){this.childService=S(A),this.route=S(w),this.pageScrollingTableFiles=[y("advanced-scrolling/advanced-scrolling-example.component.html"),y("advanced-scrolling/advanced-scrolling-example.component.ts",{selector:"doc-advanced-scrolling-example",component:"AdvancedScrollingExampleComponent"})],this.childService.setLink(this.route.snapshot.routeConfig?.path)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=v({type:n,selectors:[["fdp-doc-advanced-examples-docs"]],decls:28,vars:1,consts:[["id","page-scrolling","componentName","table"],[3,"exampleFiles"]],template:function(i,r){i&1&&(c(0,"fd-docs-section-title",0),p(1,"Handling large amount of data"),l(),c(2,"description")(3,"p"),p(4,"One of the scenarios of using Platform Table component, is to render the large amount of items."),l(),c(5,"p"),p(6,"Storing this amount directly in memory may lead to a browser performance issues."),l(),c(7,"p"),p(8," In order to keep the performance on a normal level, Platform Table component supports lazy loading of the items on scroll, and reusing rendered row components for row items. "),l(),c(9,"p"),p(10,"Additionally, Platform Table component supports lazy loading for a child row items."),l(),c(11,"p"),p(12," For this, developers need to pass Data source class that retrieves row's children into "),c(13,"code"),p(14,"[childDataSource]"),l(),p(15," input property. "),l(),c(16,"p")(17,"strong"),p(18,"IMPORTANT:"),l(),p(19," due to complexity of the children lazy loading logic, [childDataSource] can only accept classes derived from "),c(20,"code"),p(21,"TableChildrenDataProvider"),l(),p(22,". "),l(),c(23,"p"),p(24,"This example shows combination of virtual scroll and lazy loading for item on each level."),l()(),c(25,"component-example"),h(26,"fdp-doc-advanced-scrolling-example"),l(),h(27,"code-example",1)),i&2&&(u(27),d("exampleFiles",r.pageScrollingTableFiles))},dependencies:[M,F,k,G,I,T],encapsulation:2,changeDetection:0})}}return n})();export{Ee as AdvancedExamplesDocsComponent};
