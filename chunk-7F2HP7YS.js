import{a as n,b as s}from"./chunk-HBUAPZGO.js";import{a as x}from"./chunk-5GYOQ6VS.js";import{B as I,C as m,P as f,Q as g,j as o,k as _,l,m as u}from"./chunk-J2ZYVFGE.js";import{O as c}from"./chunk-BHUOVC5R.js";import{a as d}from"./chunk-66YHNWRR.js";var a=class{constructor(e,t){if(!e.isUI5Element)throw new Error("The root web component must be a UI5 Element instance");if(this.rootWebComponent=e,this.rootWebComponent.addEventListener("keydown",this._onkeydown.bind(this)),this._initBound=this._init.bind(this),this.rootWebComponent.attachComponentStateFinalized(this._initBound),typeof t.getItemsCallback!="function")throw new Error("getItemsCallback is required");this._getItems=t.getItemsCallback,this._currentIndex=t.currentIndex||0,this._rowSize=t.rowSize||1,this._behavior=t.behavior||s.Static,this._navigationMode=t.navigationMode||n.Auto,this._affectedPropertiesNames=t.affectedPropertiesNames||[],this._skipItemsSize=t.skipItemsSize||null}setCurrentItem(e){let t=this._getItems().indexOf(e);if(t===-1){console.warn("The provided item is not managed by ItemNavigation",e);return}this._currentIndex=t,this._applyTabIndex()}setRowSize(e){this._rowSize=e}_init(){this._getItems().forEach((e,t)=>{e.forcedTabIndex=t===this._currentIndex?"0":"-1"})}_onkeydown(e){if(!this._canNavigate())return;let t=this._navigationMode===n.Horizontal||this._navigationMode===n.Auto,i=this._navigationMode===n.Vertical||this._navigationMode===n.Auto,r=this.rootWebComponent.effectiveDir==="rtl";if(r&&o(e)&&t)this._handleRight();else if(r&&_(e)&&t)this._handleLeft();else if(o(e)&&t)this._handleLeft();else if(_(e)&&t)this._handleRight();else if(l(e)&&i)this._handleUp();else if(u(e)&&i)this._handleDown();else if(I(e))this._handleHome();else if(m(e))this._handleEnd();else if(f(e))this._handlePageUp();else if(g(e))this._handlePageDown();else return;e.preventDefault(),this._applyTabIndex(),this._focusCurrentItem()}_handleUp(){let e=this._getItems().length;if(this._currentIndex-this._rowSize>=0){this._currentIndex-=this._rowSize;return}if(this._behavior===s.Cyclic){let t=this._currentIndex%this._rowSize,i=t===0?this._rowSize-1:t-1,r=Math.ceil(e/this._rowSize),h=i+(r-1)*this._rowSize;h>e-1&&(h-=this._rowSize),this._currentIndex=h}else this._currentIndex=0}_handleDown(){let e=this._getItems().length;if(this._currentIndex+this._rowSize<e){this._currentIndex+=this._rowSize;return}if(this._behavior===s.Cyclic){let t=(this._currentIndex%this._rowSize+1)%this._rowSize;this._currentIndex=t}else this._currentIndex=e-1}_handleLeft(){let e=this._getItems().length;if(this._currentIndex>0){this._currentIndex-=1;return}this._behavior===s.Cyclic&&(this._currentIndex=e-1)}_handleRight(){let e=this._getItems().length;if(this._currentIndex<e-1){this._currentIndex+=1;return}this._behavior===s.Cyclic&&(this._currentIndex=0)}_handleHome(){let e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex-=this._currentIndex%e}_handleEnd(){let e=this._rowSize>1?this._rowSize:this._getItems().length;this._currentIndex+=e-1-this._currentIndex%e}_handlePageUp(){this._rowSize>1||this._handlePageUpFlat()}_handlePageDown(){this._rowSize>1||this._handlePageDownFlat()}_handlePageUpFlat(){if(this._skipItemsSize===null){this._currentIndex-=this._currentIndex;return}this._currentIndex+1>this._skipItemsSize?this._currentIndex-=this._skipItemsSize:this._currentIndex-=this._currentIndex}_handlePageDownFlat(){if(this._skipItemsSize===null){this._currentIndex=this._getItems().length-1;return}this._getItems().length-this._currentIndex-1>this._skipItemsSize?this._currentIndex+=this._skipItemsSize:this._currentIndex=this._getItems().length-1}_applyTabIndex(){let e=this._getItems();for(let t=0;t<e.length;t++)e[t].forcedTabIndex=t===this._currentIndex?"0":"-1";this._affectedPropertiesNames.forEach(t=>{let i=this.rootWebComponent[t];this.rootWebComponent[t]=Array.isArray(i)?[...i]:d({},i)})}_focusCurrentItem(){let e=this._getCurrentItem();e&&e.focus()}_canNavigate(){let e=this._getCurrentItem(),t=x();return e&&e===t}_getCurrentItem(){let e=this._getItems();if(!e.length)return;for(;this._currentIndex>=e.length;)this._currentIndex-=this._rowSize;this._currentIndex<0&&(this._currentIndex=0);let t=e[this._currentIndex];if(!t)return;if(c(t))return t.getFocusDomRef();let i=this.rootWebComponent.getDomRef();if(i&&t.id)return i.querySelector(`[id="${t.id}"]`)}},v=a;export{v as a};
