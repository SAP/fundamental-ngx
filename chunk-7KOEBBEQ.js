import{b as H,c as J,d as v}from"./chunk-WKXYPKGT.js";import{a as p,c as G,d as T,e as Y,i as q}from"./chunk-MBTDQL7U.js";import{d as f}from"./chunk-V3NO6RMU.js";import{a as z}from"./chunk-2WYHIU4E.js";import{Bb as U,Q as I,R as y,V,X as A,Y as w,o as D,tb as B,ub as O,vb as L,wb as $,xb as W,zb as j}from"./chunk-BHUOVC5R.js";import{w as _}from"./chunk-EIBM65BX.js";import{Ma as R,Qa as P,_ as g,ba as S,ga as F,ma as M,oc as d,pc as r,ta as x,wb as E,xb as k,zc as c}from"./chunk-KJ35K6QL.js";import{h as C,i as u}from"./chunk-66YHNWRR.js";function b(){return[H.call(this),J.call(this,{content:Z,initialFocus:this.initialFocusId})]}function Z(){return V(q,{id:`${this._id}-calendar`,primaryCalendarType:this._primaryCalendarType,secondaryCalendarType:this.secondaryCalendarType,formatPattern:this._formatPattern,selectionMode:this._calendarSelectionMode,minDate:this.minDate,maxDate:this.maxDate,calendarWeekNumbering:this.calendarWeekNumbering,onSelectionChange:this.onSelectedDatesChange,onShowMonthView:this.onHeaderShowMonthPress,onShowYearView:this.onHeaderShowYearPress,hideWeekNumbers:this.hideWeekNumbers,_currentPicker:this._calendarCurrentPicker,_pickersMode:this._calendarPickersMode,children:V(G,{startValue:this.startValue,endValue:this.endValue})})}_("@ui5/webcomponents-theming","sap_horizon",()=>u(null,null,function*(){return A}));_("@ui5/webcomponents","sap_horizon",()=>u(null,null,function*(){return w}));var K=`:host(:not([hidden])){display:inline-block}:host{min-width:15rem;color:var(--sapField_TextColor);background-color:var(--sapField_Background)}:host .ui5-date-picker-input{width:100%;min-width:inherit;color:inherit;background-color:inherit}
`;var N=function(m,t,i,e){var a=arguments.length,s=a<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(m,t,i,e);else for(var n=m.length-1;n>=0;n--)(l=m[n])&&(s=(a<3?l(s):a>3?l(t,i,s):l(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},o,Q="-",h=o=class X extends v{get formValidityMessage(){let t=this.formValidity;return t.valueMissing?o.i18nBundle.getText(O,this.getFormat().oFormatOptions.pattern):t.patternMismatch?o.i18nBundle.getText(L,this.getFormat().oFormatOptions.pattern):t.rangeUnderflow?o.i18nBundle.getText(W,this.minDate):t.rangeOverflow?o.i18nBundle.getText($,this.maxDate):""}get formValidity(){return{valueMissing:this.required&&!this.value,patternMismatch:!!this.value&&!this.isValidValue(this.value),rangeUnderflow:!!this.value&&!this.isValidMin(this.value),rangeOverflow:!!this.value&&!this.isValidMax(this.value)}}get formFormattedValue(){let t=this._splitValueByDelimiter(this.value||"").filter(Boolean);if(t.length&&this.name){let i=new FormData;for(let e=0;e<t.length;e++)i.append(this.name,t[e]);return i}return this.value}constructor(){super(),this.delimiter="-",this._prevDelimiter=null}get dateValue(){return null}get dateValueUTC(){return null}get _startDateTimestamp(){return this._extractFirstTimestamp(this.value)}get _endDateTimestamp(){return this._extractLastTimestamp(this.value)}get _tempTimestamp(){return this._tempValue&&this.getValueFormat().parse(this._tempValue,!0).getTime()/1e3}get _calendarSelectionMode(){return"Range"}get _calendarTimestamp(){return this._tempTimestamp||this._startDateTimestamp||Y(this._primaryCalendarType)}get _calendarSelectedDates(){return this._tempValue?[this._tempValue]:this.value&&this._checkValueValidity(this.value)?this._splitValueByDelimiter(this.value):[]}get startDateValue(){return p.fromTimestamp(this._startDateTimestamp*1e3).toLocalJSDate()}get endDateValue(){return p.fromTimestamp(this._endDateTimestamp*1e3).toLocalJSDate()}get startValue(){return this._calendarSelectedDates[0]||""}get endValue(){return this._calendarSelectedDates[1]||""}get _lastDateRangeForTheCurrentYear(){let t=f.getInstance().getFullYear(),i=f.getInstance(t,11,31,23,59,59),e=f.getInstance(t,11,24,23,59,59);return`${this.getFormat().format(e)} ${this._effectiveDelimiter} ${this.getFormat().format(i)}`}get _placeholder(){return this.placeholder?this.placeholder:`${o.i18nBundle.getText(j)} ${this._lastDateRangeForTheCurrentYear}`}get roleDescription(){return o.i18nBundle.getText(B)}get pickerAccessibleName(){return o.i18nBundle.getText(U,this.ariaLabelText)}_onInputSubmit(){return u(this,null,function*(){let t=this._dateTimeInput.getCaretPosition();yield D(),this._dateTimeInput.setCaretPosition(t)})}onResponsivePopoverAfterClose(){this._tempValue="",super.onResponsivePopoverAfterClose()}isValid(t){let i=this._splitValueByDelimiter(t).filter(e=>e.trim()!=="");return i.length<=2&&i.every(e=>super.isValid(e))}isValidValue(t){let i=this._splitValueByDelimiter(t).filter(e=>e.trim()!=="");return i.length<=2&&i.every(e=>super.isValidValue(e))}isValidDisplayValue(t){let i=this._splitValueByDelimiter(t).filter(e=>e.trim()!=="");return i.length<=2&&i.every(e=>super.isValidDisplayValue(e))}isInValidRange(t){let i=this._splitValueByDelimiter(t).filter(e=>e.trim()!=="");return i.length<=2&&i.every(e=>super.isInValidRange(e))}isValidMin(t){let i=this._splitValueByDelimiter(t).filter(e=>e.trim()!=="");return i.length<=2&&i.every(e=>super.isValidMin(e))}isValidMax(t){let i=this._splitValueByDelimiter(t).filter(e=>e.trim()!=="");return i.length<=2&&i.every(e=>super.isValidMax(e))}normalizeValue(t){let i=this._extractFirstTimestamp(t),e=this._extractLastTimestamp(t);return i&&e&&i>e?this._buildValue(e,i):this._buildValue(i,e)}normalizeDisplayValue(t){let i=this._splitValueByDelimiter(t),e=this._exctractDisplayTimestamp(i[0]),a=this._exctractDisplayTimestamp(i[1]);return!e||!a?t:e&&a&&e>a?this._buildDisplayValue(a,e):this._buildDisplayValue(e,a)}getValueFromDisplayValue(t){let i=this._splitValueByDelimiter(t),e="",a="";return e=this._getValueStringFromTimestamp(this._exctractDisplayTimestamp(i[0])*1e3),a=this._getValueStringFromTimestamp(this._exctractDisplayTimestamp(i[1])*1e3),!e||!a?t:`${e} ${this._effectiveDelimiter} ${a}`}onSelectedDatesChange(t){t.preventDefault();let i=t.detail.selectedValues;if(i.length===0)return;if(i.length===1){this._tempValue=i[0];return}let e=this._buildValue(t.detail.selectedDates[0],t.detail.selectedDates[1]);this._updateValueAndFireEvents(e,!0,["change","value-changed"]),this._togglePicker()}_modifyDateValue(t,i,e){return u(this,null,function*(){if(!this._endDateTimestamp)return C(X.prototype,this,"_modifyDateValue").call(this,t,i,e);let a=this._dateTimeInput.getCaretPosition(),s;if(a<=this.value.indexOf(this._effectiveDelimiter)){let n=T(p.fromTimestamp(this._startDateTimestamp*1e3),t,i,e,this._minDate,this._maxDate).valueOf()/1e3;n>this._endDateTimestamp&&(a+=Math.ceil(this.value.length/2)),s=this._buildValue(n,this._endDateTimestamp)}else{let n=T(p.fromTimestamp(this._endDateTimestamp*1e3),t,i,e,this._minDate,this._maxDate).valueOf()/1e3;s=this._buildValue(this._startDateTimestamp,n),n<this._startDateTimestamp&&(a-=Math.ceil(this.value.length/2))}this._updateValueAndFireEvents(s,!0,["change","value-changed"]),yield D(),this._dateTimeInput.setCaretPosition(a)})}get _effectiveDelimiter(){return this.delimiter||Q}_splitValueByDelimiter(t){let i=[],e=t.split(this._prevDelimiter||this._effectiveDelimiter);return this.getValueFormat().parse(t)?(i[0]=e.join(this._effectiveDelimiter),i[1]=""):(i[0]=e.slice(0,e.length/2).join(this._effectiveDelimiter),i[1]=e.slice(e.length/2).join(this._effectiveDelimiter)),i}normalizeFormattedValue(t){if(t==="")return t;let i="",e="";return i=this._getValueStringFromTimestamp(this._extractFirstTimestamp(t)*1e3),e=this._getValueStringFromTimestamp(this._extractLastTimestamp(t)*1e3),!i&&!e?t:`${i} ${this._effectiveDelimiter} ${e}`}_extractFirstTimestamp(t){if(!t||!this._checkValueValidity(t))return;let i=this._splitValueByDelimiter(t);return this.getValueFormat().parse(i[0],!0).getTime()/1e3}_extractLastTimestamp(t){if(!t||!this._checkValueValidity(t))return;let i=this._splitValueByDelimiter(t);if(i=i.filter(e=>e!==" "),i[1])return this.getValueFormat().parse(i[1],!0).getTime()/1e3}_exctractDisplayTimestamp(t){if(!(!t||!this._checkDisplayValueValidity(t))&&t)return this.getDisplayFormat().parse(t,!0).getTime()/1e3}_buildValue(t,i){if(this._prevDelimiter=this._effectiveDelimiter,t){let e=this._getValueStringFromTimestamp(t*1e3);if(!i)return e;let a=this._getValueStringFromTimestamp(i*1e3);return`${e} ${this._effectiveDelimiter} ${a}`}return""}_buildDisplayValue(t,i){if(this._prevDelimiter=this._effectiveDelimiter,t){let e=this._getDisplayStringFromTimestamp(t*1e3);if(!i)return e;let a=this._getDisplayStringFromTimestamp(i*1e3);return`${e} ${this._effectiveDelimiter} ${a}`}return""}getDisplayValueFromValue(t){if(this.isLiveUpdate)return t;let i="",e="";return i=this._getDisplayStringFromTimestamp(this._extractFirstTimestamp(t)*1e3),e=this._getDisplayStringFromTimestamp(this._extractLastTimestamp(t)*1e3),!i||!e?t:`${i} ${this._effectiveDelimiter} ${e}`}get displayValue(){return this.value?this.getDisplayValueFromValue(this.value):""}};N([y()],h.prototype,"delimiter",void 0);N([y()],h.prototype,"_tempValue",void 0);h=o=N([I({tag:"ui5-daterange-picker",styles:[v.styles,K],template:b})],h);h.define();var ee=["*"],ke=(()=>{class m{constructor(){this.delimiter=r("-"),this.value=r(""),this.valueState=r("None"),this.required=r(!1,{transform:c}),this.disabled=r(!1,{transform:c}),this.readonly=r(!1,{transform:c}),this.placeholder=r(),this.name=r(),this.hideWeekNumbers=r(!1,{transform:c}),this.open=r(!1,{transform:c}),this.accessibleName=r(),this.accessibleNameRef=r(),this.accessibleDescription=r(),this.accessibleDescriptionRef=r(),this.primaryCalendarType=r(),this.secondaryCalendarType=r(),this.formatPattern=r(),this.displayFormat=r(),this.valueFormat=r(),this.minDate=r(""),this.maxDate=r(""),this.calendarWeekNumbering=r("Default"),this.ui5Change=d(),this.ui5Input=d(),this.ui5ValueStateChange=d(),this.ui5Open=d(),this.ui5Close=d(),this.slots=[{name:"valueStateMessage",description:"Defines the value state message that will be displayed as pop up under the component.\n\n**Note:** If not specified, a default text (in the respective language) will be displayed.\n\n**Note:** The `valueStateMessage` would be displayed,\nwhen the component is in `Information`, `Critical` or `Negative` value state.",since:"1.0.0-rc.7"}],this.elementRef=g(x),this.injector=g(F)}get dateValue(){return this.element?.dateValue??null}get dateValueUTC(){return this.element?.dateValueUTC??null}get startDateValue(){return this.element?.startDateValue??null}get endDateValue(){return this.element?.endDateValue??null}get element(){return this.elementRef.nativeElement}ngAfterViewInit(){let i=this.element,e=["delimiter","value","valueState","required","disabled","readonly","placeholder","name","hideWeekNumbers","open","accessibleName","accessibleNameRef","accessibleDescription","accessibleDescriptionRef","primaryCalendarType","secondaryCalendarType","formatPattern","displayFormat","valueFormat","minDate","maxDate","calendarWeekNumbering"];for(let s of e){let l=s.replace(/-./g,n=>n[1].toUpperCase());this[l]&&typeof this[l]=="function"&&S(this.injector,()=>{M(()=>{let n=this[l]();i&&(i[s]=n)})})}let a=["ui5Change","ui5Input","ui5ValueStateChange","ui5Open","ui5Close"];for(let s of a){let l=s.replace("ui5","").replace(/([A-Z])/g,"-$1").toLowerCase().substring(1);this[s]&&typeof this[s].emit=="function"&&i.addEventListener&&i.addEventListener(l,n=>{this[s].emit(n)})}}static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275cmp=R({type:m,selectors:[["ui5-daterange-picker"],["","ui5-daterange-picker",""]],inputs:{delimiter:[1,"delimiter"],value:[1,"value"],valueState:[1,"valueState"],required:[1,"required"],disabled:[1,"disabled"],readonly:[1,"readonly"],placeholder:[1,"placeholder"],name:[1,"name"],hideWeekNumbers:[1,"hideWeekNumbers"],open:[1,"open"],accessibleName:[1,"accessibleName"],accessibleNameRef:[1,"accessibleNameRef"],accessibleDescription:[1,"accessibleDescription"],accessibleDescriptionRef:[1,"accessibleDescriptionRef"],primaryCalendarType:[1,"primaryCalendarType"],secondaryCalendarType:[1,"secondaryCalendarType"],formatPattern:[1,"formatPattern"],displayFormat:[1,"displayFormat"],valueFormat:[1,"valueFormat"],minDate:[1,"minDate"],maxDate:[1,"maxDate"],calendarWeekNumbering:[1,"calendarWeekNumbering"]},outputs:{ui5Change:"ui5Change",ui5Input:"ui5Input",ui5ValueStateChange:"ui5ValueStateChange",ui5Open:"ui5Open",ui5Close:"ui5Close"},exportAs:["ui5DateRangePicker"],features:[P([z])],ngContentSelectors:ee,decls:1,vars:0,template:function(e,a){e&1&&(E(),k(0))},encapsulation:2,changeDetection:0})}}return m})();export{ke as a};
