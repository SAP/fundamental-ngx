import{Cb as p,Ia as f,Ta as m,Uc as g,_a as u,a,b as h,jb as l,kb as c,ma as d}from"./chunk-AKRHWSND.js";var o=class{constructor(){this.tagWhitelist={},this.attributeWhitelist={},this._schemaWhiteList=["http","https","ftp","mailto"],this._uriAttributes={href:!0},this._safeWrapper={iframe:null,iframeDoc:null},this.extendTags()}get defTagWhitelist(){return{A:!0,ABBR:!0,BLOCKQUOTE:!0,BR:!0,CITE:!0,CODE:!0,DL:!0,DT:!0,DD:!0,EM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,P:!0,PRE:!0,STRONG:!0,SPAN:!0,U:!0,UL:!0,OL:!0,LI:!0}}get defAttributeWhitelist(){return{class:!0,style:!0,href:!0,target:"_blank",download:!0,hreflang:!0,rel:!0,type:!0,title:!0}}extendTags(t){this.tagWhitelist=h(a(a({},this.defTagWhitelist),t),{BODY:!0})}extendAttrs(t){this.attributeWhitelist=a(a({},this.defAttributeWhitelist),t)}sanitizeHtml(t){if(t=t.trim(),t.length===0||(this._safeWrapper=this._getSafeWrapper(),!this._safeWrapper?.iframeDoc))return"";this._safeWrapper.iframeDoc.body.innerHTML=t;let e=this._makeSanitizedCopy(this._safeWrapper.iframeDoc.body);return this._removeSafeWrapper(),e.innerHTML}_makeSanitizedCopy(t){let e=t;return t.nodeType===Node.TEXT_NODE?e=t.cloneNode(!0):t.nodeType===Node.ELEMENT_NODE&&this.tagWhitelist[t.tagName]?e=this._extendLinkTarget(this._implementTag(t)):e=document.createDocumentFragment(),e}_implementTag(t){let e=this._safeWrapper?.iframeDoc?.createElement(t.tagName);if(!e)throw new Error("Failed to create node");for(let r in this.attributeWhitelist)if(this.attributeWhitelist[r]){let i=this.attributeWhitelist[r],n=t.getAttribute(r);if(r in t||r==="class"){if(this._uriAttributes[r]&&this._validateBySchema(n))continue;switch(typeof i){case"string":e.setAttribute(r,i);break;default:i&&n&&e.setAttribute(r,n)}}}for(let r of Array.from(t.childNodes)){let i=this._makeSanitizedCopy(r);i&&e.appendChild(i)}return e}_extendLinkTarget(t){if(t.tagName==="A"){let e=t.getAttribute("href");if(!e||/^#/.test(e))t.removeAttribute("target");else{let r=this.attributeWhitelist.target||"_blank";t.setAttribute("target",r.toString())}}return t}_getSafeWrapper(){let t=document.createElement("iframe");if(t.sandbox===void 0)return console.warn("Your browser does not support sandboxed iframes. Please upgrade to a modern browser."),null;t.setAttribute("sandbox","allow-same-origin"),t.style.setProperty("display","none"),document.body.appendChild(t);let e=t.contentDocument||t.contentWindow?.document;return e?(e?.body||e.write("<body></body>"),{iframe:t,iframeDoc:e}):(console.warn("Could not resolve document from the provided iframe"),null)}_removeSafeWrapper(){this._safeWrapper?.iframe&&document.body.removeChild(this._safeWrapper.iframe)}_validateBySchema(t){return!!t&&t.indexOf(":")>-1&&!this._startsWithAny(t,this._schemaWhiteList)}_startsWithAny(t,e){return!!t&&e.some(r=>t.indexOf(r)===0)}};var w=(()=>{class s{constructor(e){this.domSanitizer=e,this.convertedLinksDefaultTarget="_blank",this.formattedText="",this._htmlSanitizer=new o}ngOnInit(){this.render()}ngOnChanges(e){"htmlText"in e&&this.render()}render(){this._htmlSanitizer.extendAttrs({target:this.convertedLinksDefaultTarget});let e=this._htmlSanitizer.sanitizeHtml(this.htmlText??"");this.formattedText=this.domSanitizer.bypassSecurityTrustHtml(e.trim())}static{this.\u0275fac=function(r){return new(r||s)(m(g))}}static{this.\u0275cmp=u({type:s,selectors:[["fd-formatted-text"]],hostVars:9,hostBindings:function(r,i){r&2&&(p("innerHTML",i.formattedText,f),l("height",i.height)("width",i.width),c("fd-formatted-text-with-height",i.height)("fd-formatted-text-with-width",i.width))},inputs:{htmlText:"htmlText",convertedLinksDefaultTarget:"convertedLinksDefaultTarget",height:"height",width:"width"},exportAs:["fd-formatted-text"],features:[d],decls:0,vars:0,template:function(r,i){},styles:[`fd-formatted-text{display:block}fd-formatted-text.fd-formatted-text-with-height{overflow-y:auto}fd-formatted-text.fd-formatted-text-with-width{overflow-x:auto}
`],encapsulation:2,changeDetection:0})}}return s})();export{w as a};
