"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9590],{46529:(j,S,t)=>{t.d(S,{g:()=>m});var _=t(49671),r=t(91551),v=t(11229),g=t(95698),f=t(59654),C=t(77635),l=t(51573),D=t(12312),e=t(94650);class m extends v.Ze{constructor(i,F,T,L){var P;super(),P=this,this._dialogService=i,this._smartFilterBar=F,this._smartFilterBarService=T,this._injector=L,this.openConditionsDialog=()=>{const x=this.getField().value;var W;this._dialogService.open(C.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:x||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType,defineStrategyLabels:this._smartFilterBar.defineStrategyLabels},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,g.q)(1)).subscribe({next:(W=(0,_.Z)(function*(Z){const K=P.getField(),V=yield P._smartFilterBarService.getConditionFieldSelectedVariants(P.formItem,Z);K.setValue(V)}),function(K){return W.apply(this,arguments)}),error:W=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}}m.\u0275fac=function(i){return new(i||m)(e.Y36(r.xA),e.Y36(l.j),e.Y36(f.Q),e.Y36(e.zs3))},m.\u0275dir=e.lG2({type:m,features:[e._Bn([v.dr,v.wk,D.i]),e.qOj]})},24584:(j,S,t)=>{t.d(S,{v:()=>e});var _=t(91551),r=t(59654),v=t(46529),g=t(51573),f=t(94650),C=t(90433),l=t(46443);const D=function(){return[]};class e extends v.g{constructor(b,i,F,T){super(b,i,F,T)}}e.\u0275fac=function(b){return new(b||e)(f.Y36(_.xA),f.Y36(g.j),f.Y36(r.Q),f.Y36(f.zs3))},e.\u0275cmp=f.Xpm({type:e,selectors:[["fdp-smart-filter-bar-condition-field"]],features:[f.qOj],decls:3,vars:10,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"id","addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder"]],template:function(b,i){1&b&&(f.ynx(0,0)(1,1),f._UZ(2,"fdp-multi-input",2),f.BQk()()),2&b&&(f.Q6J("formGroup",i.form),f.xp6(1),f.Q6J("formGroupName",i.formGroupName),f.xp6(1),f.Q6J("id",i.id)("addOnButtonClickFn",i.openConditionsDialog)("autofocus",!0)("dataSource",i.formItem.choices||f.DdM(9,D))("formControlName",i.name)("name",i.name)("placeholder",i.formItem.placeholder||i.formItem.message))},dependencies:[C.JJ,C.JL,C.sg,C.u,C.x0,l.O],encapsulation:2})},77635:(j,S,t)=>{t.d(S,{e:()=>G});var _=t(49671),r=t(31766),v=t(91551),g=t(11229),f=t(59654),C=t(1921),l=t(2215),D=t(83905),e=t(94650),m=t(36895),b=t(90433),i=t(58442),F=t(91553),T=t(21418),L=t(93839),P=t(71497),x=t(85677),U=t(45277),R=t(21382),W=t(5474),Z=t(33201),K=t(95002),V=t(97039),w=t(12793),k=t(65526),Q=t(54439),Y=t(27946);function $(O,s){if(1&O&&(e.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),e._uU(3),e.qZA()()()),2&O){const d=e.oxw();e.xp6(2),e.Q6J("headerSize",4),e.xp6(1),e.Oqu(d.config.header)}}function q(O,s){if(1&O){const d=e.EpF();e.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),e.NdJ("formSubmitted",function(M){e.CHM(d);const H=e.oxw(2);return e.KtG(H._onFormSubmitted(M))}),e.qZA()(),e.TgZ(4,"div",14)(5,"fdp-button",15),e.NdJ("click",function(){const H=e.CHM(d).index,tt=e.oxw(2);return e.KtG(tt.removeCondition(H))}),e.ALo(6,"fdTranslate"),e.qZA()()()()}if(2&O){const d=s.$implicit;e.xp6(3),e.Q6J("formItems",d)("unifiedLayout",!1)("noAdditionalContent",!0),e.xp6(2),e.Q6J("title",e.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function z(O,s){if(1&O){const d=e.EpF();e.TgZ(0,"form"),e.YNc(1,q,7,6,"fd-layout-grid",8),e.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),e._uU(5,"\xa0"),e.qZA(),e.TgZ(6,"div",11)(7,"fdp-button",12),e.NdJ("click",function(){e.CHM(d);const M=e.oxw();return e.KtG(M.addCondition())}),e.ALo(8,"fdTranslate"),e.qZA()()()()()}if(2&O){const d=e.oxw();e.xp6(1),e.Q6J("ngForOf",d._formItems),e.xp6(6),e.Q6J("label",e.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function J(O,s){1&O&&(e.TgZ(0,"div",16),e._UZ(1,"fd-busy-indicator",17),e.qZA()),2&O&&(e.xp6(1),e.Q6J("loading",!0))}class G{constructor(s,d,h,M){this._dialogRef=s,this._language$=d,this._cdr=h,this._smartFilterBarService=M,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this._translationResolver=new l.en,this._init()}_init(){var s=this;return(0,_.Z)(function*(){s.config=s._dialogRef.data,s._language=yield(0,D.z)(s._language$),s.conditionOperatorOptions=yield s._getApplicableConditionOperators(),s._addExistingConditions((0,C.T)(s.config.conditions)),0===s.config.conditions.length&&s.addCondition(),s.loaded=!0,s._cdr.markForCheck()})()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(s){this._formItems.splice(s,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(s=>s.submit())}_onFormSubmitted(s){if(this._submittedForms.push(s),this._submittedForms.length!==this.formGenerators.length)return;const d=this._submittedForms.map(h=>(h.value=void 0!==h.value1?h.value1:h.value,h));this._dialogRef.close(d.filter(h=>null!=h.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const s=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType);let d=this.config.defineStrategyLabels;if(!d){d={...this._conditionLabelKeys};for(const h in d)Object.prototype.hasOwnProperty.call(d,h)&&(d[h]=this._translationResolver.resolve(this._language,"platformSmartFilterBar."+d[h]))}return s.map(h=>({label:d[h],value:h}))}_addExistingConditions(s){s.forEach(d=>{const h=this._generateFormGeneratorItems(d);this._formItems.push(h)})}_generateFormGeneratorItems(s){return[{name:"operator",message:"operator",default:s?this.conditionOperatorOptions.find(d=>d.value===s.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:d=>d.operator!==r.dh.BETWEEN,onchange:(d,h,M)=>{M.parent?.get("value1")?.setValue(d,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:d=>d.operator===r.dh.BETWEEN,onchange:(d,h,M)=>{M.parent?.get("value")?.setValue(d,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:s?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:d=>d?.operator===r.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}}G.\u0275fac=function(s){return new(s||G)(e.Y36(v.zj),e.Y36(l.iC),e.Y36(e.sBO),e.Y36(f.Q))},G.\u0275cmp=e.Xpm({type:G,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(s,d){if(1&s&&e.Gf(g.CI,5),2&s){let h;e.iGM(h=e.CRH())&&(d.formGenerators=h)}},decls:14,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdkTemplate","header"],[4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(s,d){if(1&s&&(e.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),e.YNc(2,$,4,2,"ng-template",1),e.qZA(),e.TgZ(3,"fd-dialog-body"),e.YNc(4,z,9,4,"form",2),e.qZA(),e.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),e.NdJ("click",function(){return d.applyConditions()}),e.ALo(8,"fdTranslate"),e.qZA()(),e.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),e.NdJ("click",function(){return d._cancel()}),e.ALo(11,"fdTranslate"),e.qZA()()()(),e.YNc(12,J,2,1,"ng-template",null,5,e.W1O)),2&s){const h=e.MAs(13);e.xp6(4),e.Q6J("ngIf",d.loaded)("ngIfElse",h),e.xp6(3),e.Q6J("label",e.lcZ(8,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),e.xp6(3),e.Q6J("label",e.lcZ(11,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[m.sg,m.O5,b._Y,b.JL,b.F,i.C,F.r0,T.B,L.a,P.H,x.g,U.A,R.u,W.b,Z.J,K.r,V.S,w.q,k.q,Q.I,Y.n],encapsulation:2,changeDetection:0})},54216:(j,S,t)=>{t.d(S,{l:()=>N});var _=t(49671),r=t(77579),v=t(61135),g=t(83905),f=t(34986),C=t(85363),l=t(82722),D=t(91551),e=t(31766);class m extends e.aF{constructor(o){super(o)}filter(o){let c;switch(o){case"visible":c=this._getVisibleItems();break;case"active":c=this._getActiveItems();break;case"visibleAndActive":c=this._getVisibleAndActiveItems();break;case"mandatory":c=this._getMandatoryItems();break;default:c=this._getAllItems()}this.items$.next(c)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(o=>o.visible)}_getActiveItems(){return this.items.filter(o=>o.active)}_getVisibleAndActiveItems(){return this.items.filter(o=>o.visible||o.active)}_getMandatoryItems(){return this.items.filter(o=>o.mandatory)}}var b=t(2215),i=t(94650),F=t(36895),T=t(91553),L=t(79754),P=t(21418),x=t(93839),U=t(71497),R=t(85677),W=t(45277),Z=t(21382),K=t(5474),V=t(47551),w=t(33201),k=t(95002),Q=t(97039),Y=t(25739),$=t(30766),q=t(73486),z=t(18278),J=t(74092),G=t(9966),O=t(55491),s=t(27946);const d=["table"];function h(B,o){1&B&&(i.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),i._uU(3),i.ALo(4,"fdTranslate"),i.qZA()()(),i.TgZ(5,"div",8)(6,"fd-bar-element"),i._UZ(7,"fdp-table-reset-button"),i.qZA()()),2&B&&(i.xp6(2),i.Q6J("headerSize",4),i.xp6(1),i.hij(" ",i.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function M(B,o){1&B&&i._UZ(0,"fd-icon",17)}function H(B,o){if(1&B&&(i.TgZ(0,"fdp-table-cell"),i.YNc(1,M,1,0,"fd-icon",16),i.qZA()),2&B){const c=o.$implicit;i.xp6(1),i.Q6J("ngIf",c.active)}}function tt(B,o){if(1&B){const c=i.EpF();i.TgZ(0,"fdp-table",9,10),i.NdJ("rowSelectionChange",function(n){i.CHM(c);const a=i.oxw();return i.KtG(a._onRowSelectionChange(n))}),i.TgZ(2,"fdp-table-toolbar",11),i.ALo(3,"fdTranslate"),i.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),i.NdJ("selectionChange",function(n){i.CHM(c);const a=i.oxw();return i.KtG(a._onFilterVisibilityChange(n))}),i.qZA()()(),i._UZ(6,"fdp-column",13),i.ALo(7,"fdTranslate"),i.TgZ(8,"fdp-column",14),i.ALo(9,"fdTranslate"),i.YNc(10,H,2,1,"fdp-table-cell",15),i.qZA()()}if(2&B){const c=i.oxw();i.Q6J("dataSource",c.source),i.xp6(2),i.Q6J("hideItemCount",!1)("title",i.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),i.xp6(3),i.Q6J("list",c._filterVisibilityOptions)("value",c._filterVisibilityOptions[0].value),i.xp6(1),i.Q6J("label",i.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),i.xp6(2),i.Q6J("label",i.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function et(B,o){1&B&&(i.TgZ(0,"div",18),i._UZ(1,"fd-busy-indicator",19),i.qZA()),2&B&&(i.xp6(1),i.Q6J("loading",!0))}class N{constructor(o,c,p){this._dialogRef=o,this._language$=c,this._cdr=p,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new r.x,this._isResetAvailableSubject$=new v.X(!1),this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this._translationResolver=new b.en,this.setInitialTableState(),this._init()}_init(){var o=this;return(0,_.Z)(function*(){yield o._transformVisibilityLabels(),o.loaded=!0,o._cdr.markForCheck()})()}ngAfterViewInit(){this.setSelectedFilters()}_transformVisibilityLabels(){var o=this;return(0,_.Z)(function*(){let c=o._dialogRef.data.visibilityCategories;if(!c){const p=yield(0,g.z)(o._language$);c={...o._categoryLabelKeys};for(const n in c)Object.prototype.hasOwnProperty.call(c,n)&&(c[n]=o._translationResolver.resolve(p,"platformSmartFilterBar."+c[n]))}for(const[p,n]of Object.entries(c))o._filterVisibilityOptions.push({label:n,value:p})})()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,C.Q)(f.z),(0,l.R)(this._onDestroy$)).subscribe(o=>{o.forEach((c,p)=>{c.visible&&this.table.toggleSelectableRow(p)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(o=>o.filterable).map(o=>({label:o.label,active:!!this._dialogRef.data.filterBy.find(c=>c.field===o.name),mandatory:o.required,visible:this._dialogRef.data.selectedFilters.includes(o.name),key:o.key,name:o.name})),this.source=new e.Gl(new m(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(o){this._selectedFilters=o.selection.map(c=>c.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(o){this.table&&(this.source.dataProvider.filter(o.payload),this.source.fetch(this.table.getTableState()))}}N.\u0275fac=function(o){return new(o||N)(i.Y36(D.zj),i.Y36(b.iC),i.Y36(i.sBO))},N.\u0275cmp=i.Xpm({type:N,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(o,c){if(1&o&&i.Gf(d,5),2&o){let p;i.iGM(p=i.CRH())&&(c.table=p.first)}},features:[i._Bn([{provide:e.uI,useExisting:N}])],decls:14,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdkTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(o,c){if(1&o&&(i.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),i.YNc(2,h,8,4,"ng-template",1),i.qZA(),i.TgZ(3,"fd-dialog-body"),i.YNc(4,tt,11,13,"fdp-table",2),i.qZA(),i.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),i.NdJ("click",function(){return c._confirm()}),i.ALo(8,"fdTranslate"),i.qZA()(),i.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),i.NdJ("click",function(){return c._cancel()}),i.ALo(11,"fdTranslate"),i.qZA()()()(),i.YNc(12,et,2,1,"ng-template",null,5,i.W1O)),2&o){const p=i.MAs(13);i.xp6(4),i.Q6J("ngIf",c.loaded)("ngIfElse",p),i.xp6(3),i.Q6J("label",i.lcZ(8,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),i.xp6(3),i.Q6J("label",i.lcZ(11,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[F.O5,T.r0,L.o,P.B,x.a,U.H,R.g,W.A,Z.u,K.b,V.M,w.J,k.r,Q.S,Y.a,$.Z,q.U,z.I,J.tY,J.y_,G.x,O.H,s.n],encapsulation:2,changeDetection:0})},83662:(j,S,t)=>{t.d(S,{m:()=>g});var _=t(21281),v=(t(31766),t(94650));class g{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(C){this._smartFilterBarFilterable=(0,_.Ig)(C)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(C){this._required=(0,_.Ig)(C)}get required(){return this._required}set defaultSelected(C){this._defaultSelected=(0,_.Ig)(C)}get defaultSelected(){return this._defaultSelected}set hasOptions(C){this._hasOptions=(0,_.Ig)(C)}get hasOptions(){return this._hasOptions}}g.\u0275fac=function(C){return new(C||g)},g.\u0275dir=v.lG2({type:g,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"}})},29615:(j,S,t)=>{t.d(S,{O:()=>f});var _=t(61135),r=t(31766),v=t(83662),g=t(94650);class f{constructor(l){this._subject=l,this._fieldDefinitionsSubject=new _.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(l=>this._transformSubjectField(l))),this._fieldDefinitions.changes.subscribe(l=>{this._fieldDefinitionsSubject.next(l.map(D=>this._transformSubjectField(D)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(l=>this._transformSubjectField(l))}getFieldVariants(l){return this.getDataSource().dataProvider.getFieldOptions(l)}getDefaultFields(){return this.getSubjectFields()?.filter(l=>l.defaultSelected).map(l=>l.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(l){return{key:l.key,name:l.name,label:l.label,filterType:l.filterType,filterable:l.smartFilterBarFilterable,dataType:l.dataType,required:l.required,customFilterType:l.customFilterType,defaultSelected:l.defaultSelected,hasOptions:l.hasOptions,conditionStrategy:l.conditionStrategy}}}f.\u0275fac=function(l){return new(l||f)(g.Y36(r.iA))},f.\u0275dir=g.lG2({type:f,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(l,D,e){if(1&l&&g.Suo(e,v.m,4),2&l){let m;g.iGM(m=g.CRH())&&(D._fieldDefinitions=m)}},exportAs:["fdp-smart-filter-bar-subject"]})},79454:(j,S,t)=>{t.d(S,{G:()=>r});var _=t(94650);class r{constructor(g){this.templateRef=g}}r.\u0275fac=function(g){return new(g||r)(_.Y36(_.Rgc))},r.\u0275dir=_.lG2({type:r,selectors:[["","fdpSmartFilterBarToolbarItem",""]]})},1921:(j,S,t)=>{t.d(S,{T:()=>r});var _=t(91591);function r(v){return Array.isArray(v)&&(v=v.map(g=>r(g))),(0,_.UL)(v)?v.value:v}},19590:(j,S,t)=>{t.d(S,{gR:()=>Z.g,TR:()=>R,jL:()=>$.j,QX:()=>P.Q,ij:()=>Y.i});var _=t(36895),r=t(90433),v=t(72232),g=t(14257),f=t(11229),C=t(80265),l=t(34661),D=t(30087),e=t(80686),m=t(31358),b=t(91551),i=t(41204),F=t(72738),T=t(31766),L=t(33101),P=t(59654),x=t(2215),U=t(94650);class R{}R.\u0275fac=function(J){return new(J||R)},R.\u0275mod=U.oAB({type:R}),R.\u0275inj=U.cJS({providers:[P.Q,f.bN],imports:[_.ez,r.u5,r.UX,f.AY,x.LU,g.hJ,v.UU,C.V_,l.RO,f.tD,e.QX,D.UH,m.K2,b.Su,i.pV,F.nD,T.ky,f.hY,f.aL,f.Mk,L.hd]}),t(61208);var Z=t(46529),Y=(t(24584),t(77635),t(54216),t(83662),t(29615),t(12312)),$=t(51573);t(79454)},12312:(j,S,t)=>{t.d(S,{i:()=>g});var _=t(94650),r=t(51573),v=t(61208);const g={provide:r.j,useExisting:(0,_.Gpc)(()=>v.B)}},51573:(j,S,t)=>{t.d(S,{j:()=>r});var _=t(94650);class r{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new _.vpe}}r.\u0275fac=function(g){return new(g||r)},r.\u0275dir=_.lG2({type:r,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}})},61208:(j,S,t)=>{t.d(S,{B:()=>c});var _=t(49671),r=t(94650),v=t(90433),g=t(60505),f=t(50727),C=t(61135),l=t(39300),D=t(78372),e=t(83905),m=t(95698),b=t(82722),i=t(54004),F=t(91551),T=t(31766),L=t(11229),P=t(91591),x=t(54216),R=(t(29615),t(79454)),W=t(59654);const Z="smart-filter-condition-renderer";var K=t(51573),V=t(24584),w=t(1921),k=t(21281),Q=t(36895),Y=t(58442),$=t(69859),q=t(18050),z=t(57289),J=t(84134),G=t(91553),O=t(26069),s=t(27946);function d(p,n){}function h(p,n){if(1&p&&(r.ynx(0),r.YNc(1,d,0,0,"ng-template",10),r._UZ(2,"fd-toolbar-separator"),r.BQk()),2&p){const a=n.$implicit;r.xp6(1),r.Q6J("ngTemplateOutlet",a)}}function M(p,n){if(1&p&&(r.ynx(0),r.YNc(1,h,3,1,"ng-container",9),r.BQk()),2&p){const a=r.oxw();r.xp6(1),r.Q6J("ngForOf",a._toolbarItems)}}function H(p,n){if(1&p){const a=r.EpF();r.TgZ(0,"fdp-button",11),r.NdJ("click",function(){r.CHM(a);const y=r.oxw();return r.KtG(y.submitForm())}),r.ALo(1,"fdTranslate"),r.qZA()}if(2&p){const a=r.oxw();r.Q6J("disabled",a._loading)("label",r.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const tt=function(p){return{filtersCount:p}},B={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},o={provide:K.j,useExisting:(0,r.Gpc)(()=>c)};class c extends K.j{set subject(n){this._setSubject(n)}get subject(){return this._subject}set transparent(n){this._transparent=(0,k.Ig)(n)}get transparent(){return this._transparent}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}constructor(n,a,u,y,A,I){super(),this._dialogService=n,this._cdr=a,this._smartFilterBarService=u,this._fgService=y,this._injector=A,this._destroy$=I,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new r.vpe,this.smartFiltersApplied=new r.vpe,this.searchInputChanged=new r.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new f.w0,this._subjectSubscriptions=new f.w0,this._transparent=!1,this._formGeneratorReady=new C.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(V.v,[Z])}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(n=>n.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(n=>n.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(n,a){var u=this;return(0,_.Z)(function*(){return u._smartFilterBarService.getDisplayValue(n,a)})()}showFilteringSettings(){const a={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters,visibilityCategories:this.filtersVisibilityCategoryLabels};this._dialogService.open(x.l,{...B,responsivePadding:!1,verticalPadding:!1,width:"50rem",data:a},this._injector).afterClosed.pipe((0,m.q)(1)).subscribe(y=>{this._setSelectedFilters(y)})}_onSearchInputChange(n){this.search=n,this.searchInputChanged.emit(n)}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(n){var a=this;return(0,_.Z)(function*(){a._ignorePresetChange=!0,n.filterBy=n.filterBy||[],a.filterBy=n.filterBy,a.search=n.search,a._formGeneratorReady.pipe((0,l.h)(u=>u)).subscribe((0,_.Z)(function*(){a._fgService.resetForm(a._formGenerator.form);for(const y of a.filterBy){const A=a._fgService.getFormControl(a._formGenerator.form,y.field);if(!A)continue;const I=A.formItem,E=a._smartFilterBarService.transformCollectionFilter(y),X=yield a._smartFilterBarService.getConditionFieldSelectedVariants(I,E);A?.setValue(X)}a._setSelectedFilters(a.filterBy.map(y=>y.field)),a.subject.getDataSource().dataProvider.setFilters(a.filterBy,a.search),a.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(n){const a=this._generateCollectionFilterGroups(n);this._applyFiltering(a)}_onFormCreated(){var n=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,D.b)(50),(0,b.R)(this._destroy$)).subscribe((0,_.Z)(function*(){const a=yield n.getFormattedConditions();n.smartFiltersChanged.emit({filterBy:a,search:n.search,subject:n.subject}),n.liveUpdate&&n._applyFiltering(a)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}getFormattedConditions(){var n=this;return(0,_.Z)(function*(){const a=yield n._fgService.getFormValue(n._formGenerator.form);return n._generateCollectionFilterGroups(a)})()}_generateCollectionFilterGroups(n){const a=[],u=this._getSubjectDefinitions();return Object.entries(n).filter(([,y])=>!!y).forEach(([y,A])=>{const I=u.find(X=>X.name===y),E={filters:[],strategy:I.conditionStrategy,field:I.key};A.forEach(X=>{E.filters.push({strategy:X.operator,field:I.key,value:X.value,value2:X.value2,type:I.dataType})}),a.push(E)}),a.filter(y=>y.filters?.length>0)}_setSubject(n){n&&(this._subject=n,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var n=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var a=(0,_.Z)(function*(u){setTimeout((0,_.Z)(function*(){yield n._generateForm(u.filter(y=>y.filterable))}))});return function(u){return a.apply(this,arguments)}}()))}_generateForm(n){var a=this;return(0,_.Z)(function*(){const u=[],y=function N(p){return Math.max(...p.split("-").map(n=>{const a=n.match(/\d+/);return a?parseInt(a[0],10):1}))}(a.filtersColumnLayout??"");let A=1;0!==n.length&&(n.forEach(I=>{let E=a._generateBaseFieldItem(I);switch(I.required&&a._selectedFilters.push(I.name),I.filterType){case T.vA.SINGLE:case T.vA.CATEGORY:E.guiOptions.additionalData.type="select",E.guiOptions.inline=!1;break;case T.vA.MULTI:E.guiOptions.additionalData.type="multi-input";break;case T.vA.CUSTOM:E=a._generateCustomFilterFieldItem(I,E);break;default:E=a._generateInputFieldItem(I,E)}E.guiOptions.column=A,A+=1,A>y&&(A=1),u.push(E)}),a._formItems=u,a._cdr.detectChanges())})()}_generateCustomFilterFieldItem(n,a){return n.customFilterType&&(a.guiOptions.additionalData.type=n.customFilterType,a.guiOptions.additionalData=Object.assign(a.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(n.customFilterType)),a.type=a.guiOptions.additionalData.rendererComponent?`${a.guiOptions.additionalData.type}-renderer`:a.type,a.transformer=a.guiOptions.additionalData.valueTransformer),a}_generateInputFieldItem(n,a){switch(n.dataType){case T.g.DATE:a.guiOptions.additionalData.type="datepicker";break;case T.g.NUMBER:a.guiOptions.additionalData.controlType="number";break;default:a.guiOptions.additionalData.controlType="text"}return a}_generateBaseFieldItem(n){return{name:n.name,message:n.label,required:n.required,type:Z,placeholder:" ",validators:n.required?[v.kI.required]:[],choices:n.hasOptions?this._getFilterDefaultOptions(n.key,n.filterType):void 0,transformer:a=>(0,w.T)(a),guiOptions:{additionalData:{type:"input",dataType:n.dataType,filterType:n.filterType,controlType:"text",choices:n.hasOptions?this._getFilterAvailableOptions(n.key):void 0}},when:()=>this._selectedFilters.includes(n.name)}}_getFilterAvailableOptions(n){return()=>this._getFieldVariants(n)}_getFilterDefaultOptions(n,a){var u=this;return(0,_.Z)(function*(){const y=yield(0,e.z)(u._getFieldVariants(n).pipe((0,m.q)(1))),A=[];for(const I of y){const E={value:I.value,operator:"equalTo"};E.displayValue=yield u.getDisplayValue(E,a),A.push(E)}return A})}_getFieldVariants(n){return this.subject.getFieldVariants(n).pipe((0,m.q)(1),(0,i.U)(a=>a.filter((u,y)=>a.findIndex(A=>A.value===u.value)===y)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(n){const a=this.subject.getDataSource();this.filterBy=n,a.dataProvider.setFilters(n,this.search),this.subject.getSubject().fetch();const u={search:this.search,filterBy:this.filterBy};this.smartFiltersApplied.emit({...u,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(u),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new f.w0}_setSelectedFilters(n){this._selectedFilters=n.filter((a,u)=>n.indexOf(a)===u),this._formGenerator.refreshStepsVisibility()}}c.\u0275fac=function(n){return new(n||c)(r.Y36(F.xA),r.Y36(r.sBO),r.Y36(W.Q),r.Y36(L.bN),r.Y36(r.zs3),r.Y36(g._ZF))},c.\u0275cmp=r.Xpm({type:c,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(n,a,u){if(1&n&&r.Suo(u,R.G,4),2&n){let y;r.iGM(y=r.CRH())&&(a._toolbarItemRefs=y)}},viewQuery:function(n,a){if(1&n&&r.Gf(L.CI,5),2&n){let u;r.iGM(u=r.CRH())&&(a._formGenerator=u.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(n,a){2&n&&r.ekj("fdp-smart-filter-bar--transparent",a.transparent)},inputs:{subject:"subject",showFiltersLabel:"showFiltersLabel",hideFiltersLabel:"hideFiltersLabel",filtersLabel:"filtersLabel",transparent:"transparent",defineStrategyLabels:"defineStrategyLabels",filtersVisibilityCategoryLabels:"filtersVisibilityCategoryLabels",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged",smartFiltersApplied:"smartFiltersApplied",searchInputChanged:"searchInputChanged"},features:[r._Bn([o,g._ZF,{provide:P.ID,useExisting:c}]),r.qOj],decls:14,vars:24,consts:[["fdType","transparent",3,"hasTitle"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(n,a){1&n&&(r.TgZ(0,"div")(1,"fd-toolbar",0),r.YNc(2,M,2,1,"ng-container",1),r.TgZ(3,"fdp-search-field",2),r.NdJ("inputChange",function(y){return a._onSearchInputChange(y)})("searchSubmit",function(){return a.submitForm()})("cancelSearch",function(){return a._cancelSearch()}),r.ALo(4,"fdTranslate"),r.qZA(),r._UZ(5,"fd-toolbar-spacer"),r.YNc(6,H,2,4,"fdp-button",3),r.TgZ(7,"fdp-button",4),r.NdJ("click",function(){return a.submitForm()}),r.qZA(),r.TgZ(8,"fdp-button",5),r.NdJ("click",function(){return a.showFilteringSettings()}),r.ALo(9,"fdTranslate"),r.qZA(),r.TgZ(10,"fdp-button",6),r.NdJ("click",function(){return a._toggleFilterBar()}),r.ALo(11,"fdTranslate"),r.qZA()()(),r.TgZ(12,"div",7)(13,"fdp-form-generator",8),r.NdJ("formCreated",function(){return a._onFormCreated()})("formSubmitted",function(y){return a._onFormSubmitted(y)}),r.qZA()()),2&n&&(r.xp6(1),r.Q6J("hasTitle",!0),r.xp6(1),r.Q6J("ngIf",a._toolbarItems),r.xp6(1),r.Q6J("disabled",a._loading)("disableRefresh",!0)("placeholder",r.lcZ(4,15,"platformSmartFilterBar.searchPlaceholder")),r.xp6(3),r.Q6J("ngIf",!a.liveUpdate),r.xp6(1),r.Q6J("disabled",a._loading),r.xp6(1),r.Q6J("label",a.filtersLabel?a.filtersLabel+" ("+a._selectedFilters.length+")":r.xi3(9,17,"platformSmartFilterBar.filtersButtonLabel",r.VKq(22,tt,a._selectedFilters.length)))("disabled",a._loading),r.xp6(2),r.Q6J("label",r.lcZ(11,20,a._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",a._loading),r.xp6(2),r.Q6J("hidden",!a._showFilterBar),r.xp6(1),r.Q6J("noAdditionalContent",!0)("formItems",a._formItems)("columnLayout",a.filtersColumnLayout))},dependencies:[Q.sg,Q.O5,Q.tP,Y.C,$.n,q.Q,z.u,J.F,G.r0,O.ri,s.n],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0})},59654:(j,S,t)=>{t.d(S,{Q:()=>l});var _=t(49671),r=t(71467),v=t(11229),g=t(31766),f=t(91591),C=t(94650);class l{constructor(e){this._fgService=e,this._customFilterConditions=new Map}addCustomFilter(e){if(!e.conditionComponent&&e.rendererComponent&&(e.conditionComponent=e.rendererComponent),!e.conditionComponent)return!1;const m=this._fgService.addComponent(e.conditionComponent,e.types);return m&&this._customFilterConditions.set(e.conditionComponent,e),m&&e.rendererComponent&&this._fgService.addComponent(e.rendererComponent,e.types.map(b=>`${b}-renderer`)),m}getCustomFilterConfiguration(e){const m=this._fgService.getComponentDefinitionByType(e);if(m)return this._customFilterConditions.get(m.component)}getApplicableFilterConditions(e,m=g.g.STRING){const b=this._fgService.getComponentDefinitionByType(e),i=(0,g.b3)(m);return b&&this._customFilterConditions.get(b.component)?.filterStrategies||i}getDisplayValue(e,m){var b=this;return(0,_.Z)(function*(){const i=b.getCustomFilterConfiguration(m);if(i?.valueRenderer){const L=i?.valueRenderer(e),P=(0,f.M7)(L);let x;return yield P.createSubscription(L,U=>{x=U}),x}const F=b._normalizeValue(e.value),T=b._normalizeValue(e.value2);switch(e.operator){case"equalTo":return`=${F}`;case"contains":return`*${F}*`;case"between":return`${F}...${T}`;case"beginsWith":return`${F}*`;case"endsWith":return`*${F}`;case"greaterThan":case"after":return`>${F}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${F}`;case"lessThan":case"before":return`<${F}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${F}`;default:return`${F}`}})()}normalizeConditions(e,m){var b=this;return(0,_.Z)(function*(){const i=[];for(const F of m){const T=Object.assign({},F);T.displayValue=yield b.getDisplayValue(T,e.guiOptions?.additionalData.type),i.push(T)}return i})()}getConditionFieldSelectedVariants(e,m){var b=this;return(0,_.Z)(function*(){return(yield b.normalizeConditions(e,m)).map(i=>(0,f.UL)(i)?i:{label:i.displayValue,value:i})})()}transformCollectionFilter(e){return e.filters.map(m=>({operator:m.strategy,value:m.value,value2:m.value2}))}_normalizeValue(e){return Array.isArray(e)?e.map(m=>this._normalizeValue(m)).join(", "):(0,f.UL)(e)?e.label:e instanceof r._U?e.toDateString():e}}l.\u0275fac=function(e){return new(e||l)(C.LFG(v.bN))},l.\u0275prov=C.Yz7({token:l,factory:l.\u0275fac})}}]);