"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[864],{79334:(R,T,t)=>{t.d(T,{g:()=>g});var _=t(15861),i=t(89556),C=t(82848),h=t(95698),c=t(18402),F=t(4235),l=t(66628),D=t(65638),e=t(94650);class g extends C.Ze{constructor(r,u,S,L){var M;super(),M=this,this._dialogService=r,this._smartFilterBar=u,this._smartFilterBarService=S,this._injector=L,this.openConditionsDialog=()=>{const x=this.getField().value;var G;this._dialogService.open(F.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:x||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType,defineStrategyLabels:this._smartFilterBar.defineStrategyLabels},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,h.q)(1)).subscribe({next:(G=(0,_.Z)(function*(Z){const K=M.getField(),V=yield M._smartFilterBarService.getConditionFieldSelectedVariants(M.formItem,Z);K.setValue(V)}),function(K){return G.apply(this,arguments)}),error:G=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}static#t=this.\u0275fac=function(u){return new(u||g)(e.Y36(i.xA),e.Y36(l.j),e.Y36(c.Q),e.Y36(e.zs3))};static#e=this.\u0275dir=e.lG2({type:g,features:[e._Bn([C.dr,C.wk,D.i]),e.qOj]})}},38831:(R,T,t)=>{t.d(T,{v:()=>e});var _=t(89556),i=t(18402),C=t(79334),h=t(66628),c=t(94650),F=t(90433),l=t(26928);const D=function(){return[]};class e extends C.g{constructor(v,r,u,S){super(v,r,u,S)}static#t=this.\u0275fac=function(r){return new(r||e)(c.Y36(_.xA),c.Y36(h.j),c.Y36(i.Q),c.Y36(c.zs3))};static#e=this.\u0275cmp=c.Xpm({type:e,selectors:[["fdp-smart-filter-bar-condition-field"]],features:[c.qOj],decls:3,vars:9,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder"]],template:function(r,u){1&r&&(c.ynx(0,0)(1,1),c._UZ(2,"fdp-multi-input",2),c.BQk()()),2&r&&(c.Q6J("formGroup",u.form),c.xp6(1),c.Q6J("formGroupName",u.formGroupName),c.xp6(1),c.Q6J("addOnButtonClickFn",u.openConditionsDialog)("autofocus",!0)("dataSource",u.formItem.choices||c.DdM(8,D))("formControlName",u.name)("name",u.name)("placeholder",u.formItem.placeholder||u.formItem.message))},dependencies:[F.JJ,F.JL,F.sg,F.u,F.x0,l.O],encapsulation:2})}},4235:(R,T,t)=>{t.d(T,{e:()=>W});var _=t(15861),i=t(89441),C=t(89556),h=t(82848),c=t(18402),F=t(39671),l=t(60676),D=t(83905),e=t(94650),g=t(36895),v=t(90433),r=t(41146),u=t(95209),S=t(77023),L=t(87455),M=t(34853),x=t(23470),j=t(48977),U=t(18279),G=t(98887),Z=t(92664),K=t(49095),V=t(6309),X=t(54381),w=t(92575),Q=t(30848),J=t(21565);function N(P,m){if(1&P&&(e.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),e._uU(3),e.qZA()()()),2&P){const d=e.oxw();e.xp6(2),e.Q6J("headerSize",4),e.xp6(1),e.Oqu(d.config.header)}}function k(P,m){if(1&P){const d=e.EpF();e.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),e.NdJ("formSubmitted",function(E){e.CHM(d);const $=e.oxw(2);return e.KtG($._onFormSubmitted(E))}),e.qZA()(),e.TgZ(4,"div",14)(5,"fdp-button",15),e.NdJ("click",function(){const $=e.CHM(d).index,tt=e.oxw(2);return e.KtG(tt.removeCondition($))}),e.ALo(6,"fdTranslate"),e.qZA()()()()}if(2&P){const d=m.$implicit;e.xp6(3),e.Q6J("formItems",d)("unifiedLayout",!1)("noAdditionalContent",!0),e.xp6(2),e.Q6J("title",e.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function q(P,m){if(1&P){const d=e.EpF();e.TgZ(0,"form"),e.YNc(1,k,7,6,"fd-layout-grid",8),e.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),e._uU(5,"\xa0"),e.qZA(),e.TgZ(6,"div",11)(7,"fdp-button",12),e.NdJ("click",function(){e.CHM(d);const E=e.oxw();return e.KtG(E.addCondition())}),e.ALo(8,"fdTranslate"),e.qZA()()()()()}if(2&P){const d=e.oxw();e.xp6(1),e.Q6J("ngForOf",d._formItems),e.xp6(6),e.Q6J("label",e.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function Y(P,m){1&P&&(e.TgZ(0,"div",16),e._UZ(1,"fd-busy-indicator",17),e.qZA()),2&P&&(e.xp6(1),e.Q6J("loading",!0))}class W{constructor(m,d,b,E){this._dialogRef=m,this._language$=d,this._cdr=b,this._smartFilterBarService=E,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this._translationResolver=new l.en,this._init()}_init(){var m=this;return(0,_.Z)(function*(){m.config=m._dialogRef.data,m._language=yield(0,D.z)(m._language$),m.conditionOperatorOptions=yield m._getApplicableConditionOperators(),m._addExistingConditions((0,F.T)(m.config.conditions)),0===m.config.conditions.length&&m.addCondition(),m.loaded=!0,m._cdr.markForCheck()})()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(m){this._formItems.splice(m,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(m=>m.submit())}_onFormSubmitted(m){if(this._submittedForms.push(m),this._submittedForms.length!==this.formGenerators.length)return;const d=this._submittedForms.map(b=>(b.value=void 0!==b.value1?b.value1:b.value,b));this._dialogRef.close(d.filter(b=>null!=b.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const m=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType);let d=this.config.defineStrategyLabels;if(!d){d={...this._conditionLabelKeys};for(const b in d)Object.prototype.hasOwnProperty.call(d,b)&&(d[b]=this._translationResolver.resolve(this._language,"platformSmartFilterBar."+d[b]))}return m.map(b=>({label:d[b],value:b}))}_addExistingConditions(m){m.forEach(d=>{const b=this._generateFormGeneratorItems(d);this._formItems.push(b)})}_generateFormGeneratorItems(m){return[{name:"operator",message:"operator",default:m?this.conditionOperatorOptions.find(d=>d.value===m.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:m?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:d=>d.operator!==i.dh.BETWEEN,onchange:(d,b,E)=>{E.parent?.get("value1")?.setValue(d,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:m?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:d=>d.operator===i.dh.BETWEEN,onchange:(d,b,E)=>{E.parent?.get("value")?.setValue(d,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:m?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:d=>d?.operator===i.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}static#t=this.\u0275fac=function(d){return new(d||W)(e.Y36(C.zj),e.Y36(l.iC),e.Y36(e.sBO),e.Y36(c.Q))};static#e=this.\u0275cmp=e.Xpm({type:W,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(d,b){if(1&d&&e.Gf(h.CI,5),2&d){let E;e.iGM(E=e.CRH())&&(b.formGenerators=E)}},decls:14,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdTemplate","header"],[4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(d,b){if(1&d&&(e.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),e.YNc(2,N,4,2,"ng-template",1),e.qZA(),e.TgZ(3,"fd-dialog-body"),e.YNc(4,q,9,4,"form",2),e.qZA(),e.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),e.NdJ("click",function(){return b.applyConditions()}),e.ALo(8,"fdTranslate"),e.qZA()(),e.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),e.NdJ("click",function(){return b._cancel()}),e.ALo(11,"fdTranslate"),e.qZA()()()(),e.YNc(12,Y,2,1,"ng-template",null,5,e.W1O)),2&d){const E=e.MAs(13);e.xp6(4),e.Q6J("ngIf",b.loaded)("ngIfElse",E),e.xp6(3),e.Q6J("label",e.lcZ(8,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),e.xp6(3),e.Q6J("label",e.lcZ(11,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[g.sg,g.O5,v._Y,v.JL,v.F,r.C,u.r0,S.B,L.a,M.H,x.g,j.A,U.u,G.b,Z.J,K.r,V.S,X.q,w.q,Q.I,J.n],encapsulation:2,changeDetection:0})}},60065:(R,T,t)=>{t.d(T,{l:()=>z});var _=t(15861),i=t(77579),C=t(61135),h=t(83905),c=t(34986),F=t(85363),l=t(82722),D=t(89556),e=t(89441);class g extends e.aF{constructor(s){super(s)}filter(s){let f;switch(s){case"visible":f=this._getVisibleItems();break;case"active":f=this._getActiveItems();break;case"visibleAndActive":f=this._getVisibleAndActiveItems();break;case"mandatory":f=this._getMandatoryItems();break;default:f=this._getAllItems()}this.items$.next(f)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(s=>s.visible)}_getActiveItems(){return this.items.filter(s=>s.active)}_getVisibleAndActiveItems(){return this.items.filter(s=>s.visible||s.active)}_getMandatoryItems(){return this.items.filter(s=>s.mandatory)}}var v=t(60676),r=t(94650),u=t(36895),S=t(95209),L=t(61357),M=t(77023),x=t(87455),j=t(34853),U=t(23470),G=t(48977),Z=t(18279),K=t(98887),V=t(62361),X=t(92664),w=t(49095),Q=t(6309),J=t(85872),N=t(27660),k=t(18273),q=t(87797),Y=t(14396),W=t(60342),P=t(7632),m=t(21565);const d=["table"];function b(I,s){1&I&&(r.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),r._uU(3),r.ALo(4,"fdTranslate"),r.qZA()()(),r.TgZ(5,"div",8)(6,"fd-bar-element"),r._UZ(7,"fdp-table-reset-button"),r.qZA()()),2&I&&(r.xp6(2),r.Q6J("headerSize",4),r.xp6(1),r.hij(" ",r.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function E(I,s){1&I&&r._UZ(0,"fd-icon",17)}function $(I,s){if(1&I&&(r.TgZ(0,"fdp-table-cell"),r.YNc(1,E,1,0,"fd-icon",16),r.qZA()),2&I){const f=s.$implicit;r.xp6(1),r.Q6J("ngIf",f.active)}}function tt(I,s){if(1&I){const f=r.EpF();r.TgZ(0,"fdp-table",9,10),r.NdJ("rowSelectionChange",function(a){r.CHM(f);const n=r.oxw();return r.KtG(n._onRowSelectionChange(a))}),r.TgZ(2,"fdp-table-toolbar",11),r.ALo(3,"fdTranslate"),r.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),r.NdJ("selectionChange",function(a){r.CHM(f);const n=r.oxw();return r.KtG(n._onFilterVisibilityChange(a))}),r.qZA()()(),r._UZ(6,"fdp-column",13),r.ALo(7,"fdTranslate"),r.TgZ(8,"fdp-column",14),r.ALo(9,"fdTranslate"),r.YNc(10,$,2,1,"fdp-table-cell",15),r.qZA()()}if(2&I){const f=r.oxw();r.Q6J("dataSource",f.source),r.xp6(2),r.Q6J("hideItemCount",!1)("title",r.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),r.xp6(3),r.Q6J("list",f._filterVisibilityOptions)("value",f._filterVisibilityOptions[0].value),r.xp6(1),r.Q6J("label",r.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),r.xp6(2),r.Q6J("label",r.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function et(I,s){1&I&&(r.TgZ(0,"div",18),r._UZ(1,"fd-busy-indicator",19),r.qZA()),2&I&&(r.xp6(1),r.Q6J("loading",!0))}class z{constructor(s,f,y){this._dialogRef=s,this._language$=f,this._cdr=y,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new i.x,this._isResetAvailableSubject$=new C.X(!1),this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this._translationResolver=new v.en,this.setInitialTableState(),this._init()}_init(){var s=this;return(0,_.Z)(function*(){yield s._transformVisibilityLabels(),s.loaded=!0,s._cdr.markForCheck()})()}ngAfterViewInit(){this.setSelectedFilters()}_transformVisibilityLabels(){var s=this;return(0,_.Z)(function*(){let f=s._dialogRef.data.visibilityCategories;if(!f){const y=yield(0,h.z)(s._language$);f={...s._categoryLabelKeys};for(const a in f)Object.prototype.hasOwnProperty.call(f,a)&&(f[a]=s._translationResolver.resolve(y,"platformSmartFilterBar."+f[a]))}for(const[y,a]of Object.entries(f))s._filterVisibilityOptions.push({label:a,value:y})})()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,F.Q)(c.z),(0,l.R)(this._onDestroy$)).subscribe(s=>{s.forEach((f,y)=>{f.visible&&this.table.toggleSelectableRow(y)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(s=>s.filterable).map(s=>({label:s.label,active:!!this._dialogRef.data.filterBy.find(f=>f.field===s.name),mandatory:s.required,visible:this._dialogRef.data.selectedFilters.includes(s.name),key:s.key,name:s.name})),this.source=new e.Gl(new g(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(s){this._selectedFilters=s.selection.map(f=>f.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(s){!this.table||(this.source.dataProvider.filter(s.payload),this.source.fetch(this.table.getTableState()))}static#t=this.\u0275fac=function(f){return new(f||z)(r.Y36(D.zj),r.Y36(v.iC),r.Y36(r.sBO))};static#e=this.\u0275cmp=r.Xpm({type:z,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(f,y){if(1&f&&r.Gf(d,5),2&f){let a;r.iGM(a=r.CRH())&&(y.table=a.first)}},features:[r._Bn([{provide:e.uI,useExisting:z}])],decls:14,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(f,y){if(1&f&&(r.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),r.YNc(2,b,8,4,"ng-template",1),r.qZA(),r.TgZ(3,"fd-dialog-body"),r.YNc(4,tt,11,13,"fdp-table",2),r.qZA(),r.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),r.NdJ("click",function(){return y._confirm()}),r.ALo(8,"fdTranslate"),r.qZA()(),r.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),r.NdJ("click",function(){return y._cancel()}),r.ALo(11,"fdTranslate"),r.qZA()()()(),r.YNc(12,et,2,1,"ng-template",null,5,r.W1O)),2&f){const a=r.MAs(13);r.xp6(4),r.Q6J("ngIf",y.loaded)("ngIfElse",a),r.xp6(3),r.Q6J("label",r.lcZ(8,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),r.xp6(3),r.Q6J("label",r.lcZ(11,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[u.O5,S.r0,L.o,M.B,x.a,j.H,U.g,G.A,Z.u,K.b,V.M,X.J,w.r,Q.S,J.a,N.Z,k.U,q.I,Y.tY,Y.y_,W.x,P.H,m.n],encapsulation:2,changeDetection:0})}},92205:(R,T,t)=>{t.d(T,{m:()=>h});var _=t(21281),C=(t(89441),t(94650));class h{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(F){this._smartFilterBarFilterable=(0,_.Ig)(F)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(F){this._required=(0,_.Ig)(F)}get required(){return this._required}set defaultSelected(F){this._defaultSelected=(0,_.Ig)(F)}get defaultSelected(){return this._defaultSelected}set hasOptions(F){this._hasOptions=(0,_.Ig)(F)}get hasOptions(){return this._hasOptions}static#t=this.\u0275fac=function(l){return new(l||h)};static#e=this.\u0275dir=C.lG2({type:h,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"}})}},70295:(R,T,t)=>{t.d(T,{O:()=>c});var _=t(61135),i=t(89441),C=t(92205),h=t(94650);class c{constructor(l){this._subject=l,this._fieldDefinitionsSubject=new _.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(l=>this._transformSubjectField(l))),this._fieldDefinitions.changes.subscribe(l=>{this._fieldDefinitionsSubject.next(l.map(D=>this._transformSubjectField(D)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(l=>this._transformSubjectField(l))}getFieldVariants(l){return this.getDataSource().dataProvider.getFieldOptions(l)}getDefaultFields(){return this.getSubjectFields()?.filter(l=>l.defaultSelected).map(l=>l.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(l){return{key:l.key,name:l.name,label:l.label,filterType:l.filterType,filterable:l.smartFilterBarFilterable,dataType:l.dataType,required:l.required,customFilterType:l.customFilterType,defaultSelected:l.defaultSelected,hasOptions:l.hasOptions,conditionStrategy:l.conditionStrategy}}static#t=this.\u0275fac=function(D){return new(D||c)(h.Y36(i.iA))};static#e=this.\u0275dir=h.lG2({type:c,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(D,e,g){if(1&D&&h.Suo(g,C.m,4),2&D){let v;h.iGM(v=h.CRH())&&(e._fieldDefinitions=v)}},exportAs:["fdp-smart-filter-bar-subject"]})}},82737:(R,T,t)=>{t.d(T,{G:()=>i});var _=t(94650);class i{constructor(h){this.templateRef=h}static#t=this.\u0275fac=function(c){return new(c||i)(_.Y36(_.Rgc))};static#e=this.\u0275dir=_.lG2({type:i,selectors:[["","fdpSmartFilterBarToolbarItem",""]]})}},39671:(R,T,t)=>{t.d(T,{T:()=>i});var _=t(61892);function i(C){return Array.isArray(C)&&(C=C.map(h=>i(h))),(0,_.UL)(C)?C.value:C}},90864:(R,T,t)=>{t.d(T,{gR:()=>Z.g,TR:()=>U,jL:()=>N.j,QX:()=>M.Q,ij:()=>J.i});var _=t(36895),i=t(90433),C=t(43018),h=t(30825),c=t(82848),F=t(21553),l=t(35243),D=t(78793),e=t(80848),g=t(64713),v=t(89556),r=t(94448),u=t(47041),S=t(89441),L=t(57230),M=t(18402),x=t(60676),j=t(94650);class U{static#t=this.\u0275fac=function(W){return new(W||U)};static#e=this.\u0275mod=j.oAB({type:U});static#i=this.\u0275inj=j.cJS({providers:[M.Q,c.bN],imports:[_.ez,i.u5,i.UX,c.AY,x.LU,h.hJ,C.UU,F.V_,l.RO,c.tD,e.Q,D.UH,g.K2,v.Su,r.pV,u.nD,S.ky,c.hY,c.aL,c.Mk,L.hd]})}t(76960);var Z=t(79334),J=(t(38831),t(4235),t(60065),t(92205),t(70295),t(65638)),N=t(66628);t(82737)},65638:(R,T,t)=>{t.d(T,{i:()=>h});var _=t(94650),i=t(66628),C=t(76960);const h={provide:i.j,useExisting:(0,_.Gpc)(()=>C.B)}},66628:(R,T,t)=>{t.d(T,{j:()=>i});var _=t(94650);class i{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new _.vpe}static#t=this.\u0275fac=function(c){return new(c||i)};static#e=this.\u0275dir=_.lG2({type:i,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}})}},76960:(R,T,t)=>{t.d(T,{B:()=>f});var _=t(15861),i=t(94650),C=t(90433),h=t(99280),c=t(50727),F=t(61135),l=t(39300),D=t(78372),e=t(83905),g=t(95698),v=t(82722),r=t(54004),u=t(89556),S=t(89441),L=t(82848),M=t(61892),x=t(60065),U=(t(70295),t(82737)),G=t(18402);const Z="smart-filter-condition-renderer";var K=t(66628),V=t(38831),X=t(39671),w=t(21281),Q=t(36895),J=t(41146),N=t(73788),k=t(70363),q=t(69825),Y=t(48223),W=t(95209),P=t(23988),m=t(21565);function d(y,a){}function b(y,a){if(1&y&&(i.ynx(0),i.YNc(1,d,0,0,"ng-template",10),i._UZ(2,"fd-toolbar-separator"),i.BQk()),2&y){const n=a.$implicit;i.xp6(1),i.Q6J("ngTemplateOutlet",n)}}function E(y,a){if(1&y&&(i.ynx(0),i.YNc(1,b,3,1,"ng-container",9),i.BQk()),2&y){const n=i.oxw();i.xp6(1),i.Q6J("ngForOf",n._toolbarItems)}}function $(y,a){if(1&y){const n=i.EpF();i.TgZ(0,"fdp-button",11),i.NdJ("click",function(){i.CHM(n);const p=i.oxw();return i.KtG(p.submitForm())}),i.ALo(1,"fdTranslate"),i.qZA()}if(2&y){const n=i.oxw();i.Q6J("disabled",n._loading)("label",i.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const tt=function(y){return{filtersCount:y}},I={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},s={provide:K.j,useExisting:(0,i.Gpc)(()=>f)};class f extends K.j{constructor(a,n,o,p,O,A){super(),this._dialogService=a,this._cdr=n,this._smartFilterBarService=o,this._fgService=p,this._injector=O,this._destroy$=A,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new i.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new c.w0,this._subjectSubscriptions=new c.w0,this._transparent=!1,this._formGeneratorReady=new F.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(V.v,[Z])}set subject(a){this._setSubject(a)}get subject(){return this._subject}set transparent(a){this._transparent=(0,w.Ig)(a)}get transparent(){return this._transparent}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(a=>a.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(a=>a.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(a,n){var o=this;return(0,_.Z)(function*(){return o._smartFilterBarService.getDisplayValue(a,n)})()}showFilteringSettings(){const n={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters,visibilityCategories:this.filtersVisibilityCategoryLabels};this._dialogService.open(x.l,{...I,responsivePadding:!1,verticalPadding:!1,width:"50rem",data:n},this._injector).afterClosed.pipe((0,g.q)(1)).subscribe(p=>{this._setSelectedFilters(p)})}_onSearchInputChange(a){this.search=a}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(a){var n=this;return(0,_.Z)(function*(){n._ignorePresetChange=!0,a.filterBy=a.filterBy||[],n.filterBy=a.filterBy,n.search=a.search,n._formGeneratorReady.pipe((0,l.h)(o=>o)).subscribe((0,_.Z)(function*(){n._fgService.resetForm(n._formGenerator.form);for(const p of n.filterBy){const O=n._fgService.getFormControl(n._formGenerator.form,p.field);if(!O)continue;const A=O.formItem,B=n._smartFilterBarService.transformCollectionFilter(p),H=yield n._smartFilterBarService.getConditionFieldSelectedVariants(A,B);O?.setValue(H)}n._setSelectedFilters(n.filterBy.map(p=>p.field)),n.subject.getDataSource().dataProvider.setFilters(n.filterBy,n.search),n.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(a){const n=this._generateCollectionFilterGroups(a);this._applyFiltering(n)}_onFormCreated(){var a=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,l.h)(()=>this.liveUpdate),(0,D.b)(50),(0,v.R)(this._destroy$)).subscribe((0,_.Z)(function*(){const n=yield a._fgService.getFormValue(a._formGenerator.form),o=a._generateCollectionFilterGroups(n);a._applyFiltering(o)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}_generateCollectionFilterGroups(a){const n=[],o=this._getSubjectDefinitions();return Object.entries(a).filter(([,p])=>!!p).forEach(([p,O])=>{const A=o.find(H=>H.name===p),B={filters:[],strategy:A.conditionStrategy,field:A.key};O.forEach(H=>{B.filters.push({strategy:H.operator,field:A.key,value:H.value,value2:H.value2,type:A.dataType})}),n.push(B)}),n}_setSubject(a){!a||(this._subject=a,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var a=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var n=(0,_.Z)(function*(o){setTimeout((0,_.Z)(function*(){yield a._generateForm(o.filter(p=>p.filterable))}))});return function(o){return n.apply(this,arguments)}}()))}_generateForm(a){var n=this;return(0,_.Z)(function*(){const o=[],p=function z(y){return Math.max(...y.split("-").map(a=>{const n=a.match(/\d+/);return n?parseInt(n[0],10):1}))}(n.filtersColumnLayout??"");let O=1;0!==a.length&&(a.forEach(A=>{let B=n._generateBaseFieldItem(A);switch(A.required&&n._selectedFilters.push(A.name),A.filterType){case S.vA.SINGLE:case S.vA.CATEGORY:B.guiOptions.additionalData.type="select",B.guiOptions.inline=!1;break;case S.vA.MULTI:B.guiOptions.additionalData.type="multi-input";break;case S.vA.CUSTOM:B=n._generateCustomFilterFieldItem(A,B);break;default:B=n._generateInputFieldItem(A,B)}B.guiOptions.column=O,O+=1,O>p&&(O=1),o.push(B)}),n._formItems=o,n._cdr.detectChanges())})()}_generateCustomFilterFieldItem(a,n){return a.customFilterType&&(n.guiOptions.additionalData.type=a.customFilterType,n.guiOptions.additionalData=Object.assign(n.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(a.customFilterType)),n.type=n.guiOptions.additionalData.rendererComponent?`${n.guiOptions.additionalData.type}-renderer`:n.type,n.transformer=n.guiOptions.additionalData.valueTransformer),n}_generateInputFieldItem(a,n){switch(a.dataType){case S.g.DATE:n.guiOptions.additionalData.type="datepicker";break;case S.g.NUMBER:n.guiOptions.additionalData.controlType="number";break;default:n.guiOptions.additionalData.controlType="text"}return n}_generateBaseFieldItem(a){return{name:a.name,message:a.label,required:a.required,type:Z,placeholder:" ",validators:a.required?[C.kI.required]:[],choices:a.hasOptions?this._getFilterDefaultOptions(a.key,a.filterType):void 0,transformer:n=>(0,X.T)(n),guiOptions:{additionalData:{type:"input",dataType:a.dataType,filterType:a.filterType,controlType:"text",choices:a.hasOptions?this._getFilterAvailableOptions(a.key):void 0}},when:()=>this._selectedFilters.includes(a.name)}}_getFilterAvailableOptions(a){return()=>this._getFieldVariants(a)}_getFilterDefaultOptions(a,n){var o=this;return(0,_.Z)(function*(){const p=yield(0,e.z)(o._getFieldVariants(a).pipe((0,g.q)(1))),O=[];for(const A of p){const B={value:A.value,operator:"equalTo"};B.displayValue=yield o.getDisplayValue(B,n),O.push(B)}return O})}_getFieldVariants(a){return this.subject.getFieldVariants(a).pipe((0,g.q)(1),(0,r.U)(n=>n.filter((o,p)=>n.findIndex(O=>O.value===o.value)===p)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(a){a=a.filter(p=>p.filters?.length>0);const n=this.subject.getDataSource();this.filterBy=a,n.dataProvider.setFilters(a,this.search),this.subject.getSubject().fetch();const o={search:this.search,filterBy:this.filterBy};this.smartFiltersChanged.emit({...o,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(o),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new c.w0}_setSelectedFilters(a){this._selectedFilters=a.filter((n,o)=>a.indexOf(n)===o),this._formGenerator.refreshStepsVisibility()}static#t=this.\u0275fac=function(n){return new(n||f)(i.Y36(u.xA),i.Y36(i.sBO),i.Y36(G.Q),i.Y36(L.bN),i.Y36(i.zs3),i.Y36(h._Z))};static#e=this.\u0275cmp=i.Xpm({type:f,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(n,o,p){if(1&n&&i.Suo(p,U.G,4),2&n){let O;i.iGM(O=i.CRH())&&(o._toolbarItemRefs=O)}},viewQuery:function(n,o){if(1&n&&i.Gf(L.CI,5),2&n){let p;i.iGM(p=i.CRH())&&(o._formGenerator=p.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(n,o){2&n&&i.ekj("fdp-smart-filter-bar--transparent",o.transparent)},inputs:{subject:"subject",showFiltersLabel:"showFiltersLabel",hideFiltersLabel:"hideFiltersLabel",filtersLabel:"filtersLabel",transparent:"transparent",defineStrategyLabels:"defineStrategyLabels",filtersVisibilityCategoryLabels:"filtersVisibilityCategoryLabels",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged"},features:[i._Bn([s,h._Z,{provide:M.ID,useExisting:f}]),i.qOj],decls:14,vars:24,consts:[["fdType","transparent",3,"hasTitle"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(n,o){1&n&&(i.TgZ(0,"div")(1,"fd-toolbar",0),i.YNc(2,E,2,1,"ng-container",1),i.TgZ(3,"fdp-search-field",2),i.NdJ("inputChange",function(O){return o._onSearchInputChange(O)})("searchSubmit",function(){return o.submitForm()})("cancelSearch",function(){return o._cancelSearch()}),i.ALo(4,"fdTranslate"),i.qZA(),i._UZ(5,"fd-toolbar-spacer"),i.YNc(6,$,2,4,"fdp-button",3),i.TgZ(7,"fdp-button",4),i.NdJ("click",function(){return o.submitForm()}),i.qZA(),i.TgZ(8,"fdp-button",5),i.NdJ("click",function(){return o.showFilteringSettings()}),i.ALo(9,"fdTranslate"),i.qZA(),i.TgZ(10,"fdp-button",6),i.NdJ("click",function(){return o._toggleFilterBar()}),i.ALo(11,"fdTranslate"),i.qZA()()(),i.TgZ(12,"div",7)(13,"fdp-form-generator",8),i.NdJ("formCreated",function(){return o._onFormCreated()})("formSubmitted",function(O){return o._onFormSubmitted(O)}),i.qZA()()),2&n&&(i.xp6(1),i.Q6J("hasTitle",!0),i.xp6(1),i.Q6J("ngIf",o._toolbarItems),i.xp6(1),i.Q6J("disabled",o._loading)("disableRefresh",!0)("placeholder",i.lcZ(4,15,"platformSmartFilterBar.searchPlaceholder")),i.xp6(3),i.Q6J("ngIf",!o.liveUpdate),i.xp6(1),i.Q6J("disabled",o._loading),i.xp6(1),i.Q6J("label",o.filtersLabel?o.filtersLabel+" ("+o._selectedFilters.length+")":i.xi3(9,17,"platformSmartFilterBar.filtersButtonLabel",i.VKq(22,tt,o._selectedFilters.length)))("disabled",o._loading),i.xp6(2),i.Q6J("label",i.lcZ(11,20,o._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",o._loading),i.xp6(2),i.Q6J("hidden",!o._showFilterBar),i.xp6(1),i.Q6J("noAdditionalContent",!0)("formItems",o._formItems)("columnLayout",o.filtersColumnLayout))},dependencies:[Q.sg,Q.O5,Q.tP,J.C,N.n,k.Q,q.u,Y.F,W.r0,P.ri,m.n],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0})}},18402:(R,T,t)=>{t.d(T,{Q:()=>l});var _=t(15861),i=t(95790),C=t(82848),h=t(89441),c=t(61892),F=t(94650);class l{constructor(e){this._fgService=e,this._customFilterConditions=new Map}addCustomFilter(e){if(!e.conditionComponent&&e.rendererComponent&&(e.conditionComponent=e.rendererComponent),!e.conditionComponent)return!1;const g=this._fgService.addComponent(e.conditionComponent,e.types);return g&&this._customFilterConditions.set(e.conditionComponent,e),g&&e.rendererComponent&&this._fgService.addComponent(e.rendererComponent,e.types.map(v=>`${v}-renderer`)),g}getCustomFilterConfiguration(e){const g=this._fgService.getComponentDefinitionByType(e);if(g)return this._customFilterConditions.get(g.component)}getApplicableFilterConditions(e,g=h.g.STRING){const v=this._fgService.getComponentDefinitionByType(e),r=(0,h.b3)(g);return v&&this._customFilterConditions.get(v.component)?.filterStrategies||r}getDisplayValue(e,g){var v=this;return(0,_.Z)(function*(){const r=v.getCustomFilterConfiguration(g);if(r?.valueRenderer){const L=r?.valueRenderer(e),M=(0,c.M7)(L);let x;return yield M.createSubscription(L,j=>{x=j}),x}const u=v._normalizeValue(e.value),S=v._normalizeValue(e.value2);switch(e.operator){case"equalTo":return`=${u}`;case"contains":return`*${u}*`;case"between":return`${u}...${S}`;case"beginsWith":return`${u}*`;case"endsWith":return`*${u}`;case"greaterThan":case"after":return`>${u}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${u}`;case"lessThan":case"before":return`<${u}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${u}`;default:return`${u}`}})()}normalizeConditions(e,g){var v=this;return(0,_.Z)(function*(){const r=[];for(const u of g){const S=Object.assign({},u);S.displayValue=yield v.getDisplayValue(S,e.guiOptions?.additionalData.type),r.push(S)}return r})()}getConditionFieldSelectedVariants(e,g){var v=this;return(0,_.Z)(function*(){return(yield v.normalizeConditions(e,g)).map(r=>(0,c.UL)(r)?r:{label:r.displayValue,value:r})})()}transformCollectionFilter(e){return e.filters.map(g=>({operator:g.strategy,value:g.value,value2:g.value2}))}_normalizeValue(e){return Array.isArray(e)?e.map(g=>this._normalizeValue(g)).join(", "):(0,c.UL)(e)?e.label:e instanceof i._U?e.toDateString():e}static#t=this.\u0275fac=function(g){return new(g||l)(F.LFG(C.bN))};static#e=this.\u0275prov=F.Yz7({token:l,factory:l.\u0275fac})}}}]);