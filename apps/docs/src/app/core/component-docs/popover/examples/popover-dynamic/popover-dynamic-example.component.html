<fd-popover
    #popoverComponent
    [closeOnOutsideClick]="true"
    [focusTrapped]="true"
    [noArrow]="false"
    title="top"
    [focusAutoCapture]="true"
>
    <fd-popover-control>
        <button fd-button glyph="add"></button>
    </fd-popover-control>
    <fd-popover-body>
        <fd-side-nav>
            <div fd-side-nav-main>
                <ul fd-nested-list [textOnly]="true">
                    <li
                        fd-nested-list-item
                        *ngFor="let component of componentWithTasks"
                        (expandedChange)="updatePopover()"
                    >
                        <div fd-nested-list-content>
                            <a fd-nested-list-link>
                                <span fd-nested-list-title>{{ component.name }}</span>
                            </a>
                            <button fd-nested-list-expand-icon></button>
                        </div>
                        <ul fd-nested-list *ngIf="component.tasks && component.tasks.length > 0">
                            <li fd-nested-list-item *ngFor="let task of component.tasks">
                                <a fd-nested-list-link>
                                    <span fd-nested-list-title>{{ task.name }}</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </fd-side-nav>
    </fd-popover-body>
</fd-popover>
