import{Le as ce,Me as ge,Ne as ue,Oe as fe,gd as le,hd as pe,ka as C,qa as ae,qe as se,re as W,te as me}from"./chunk-DDWGQRGO.js";import"./chunk-4EDAWMYD.js";import{ya as de}from"./chunk-JN47ZP35.js";import{$b as B,Bb as q,Cd as D,Dc as F,Eb as A,Ec as Z,Gb as J,Gf as N,Kf as O,Lf as R,Lh as re,Na as p,P as Y,Pg as oe,Qh as ne,Tb as Q,Ub as r,Wb as T,Xc as ee,Zb as P,_a as f,_b as L,cc as b,eb as I,fa as E,fi as ie,gb as k,ib as c,jb as _,na as $,oa as K,qc as X,sb as w,tb as S,tc as z,ub as M,vb as a,vg as te,wb as i,x as G,xb as h}from"./chunk-XX4VFN6H.js";var Ce=l=>({$implicit:l,dropMode:"shift",property:"values"}),ye=l=>({$implicit:l,dropMode:"group",property:"values2"}),Ee=l=>({$implicit:l,dropMode:"auto",property:"values3"}),Ie=l=>({"--fdItemShift":l});function ke(l,u){}function we(l,u){}function Se(l,u){}function Me(l,u){if(l&1&&(a(0,"div",3),r(1),i()),l&2){let e=u.$implicit;c("ngStyle",b(3,Ie,"calc("+e.level+" * 2rem)")),k("data-level",e.level),p(),T(" List item ",e.name," ")}}function Ae(l,u){if(l&1){let e=q();a(0,"div",2),A("itemDropped",function(t){let n=$(e).property,d=J();return K(d.onItemDropped(t,n))}),S(1,Me,2,5,"div",3,w),i()}if(l&2){let e=u.$implicit,o=u.dropMode;c("dropMode",o)("items",e),p(),M(e)}}var he=(()=>{class l{constructor(){this.values=U(),this.values2=U(),this.values3=U(),this._cdr=E(z)}onItemDropped(e,o){let t=this[o],n=t[e.draggedItemIndex],d=t[e.replacedItemIndex];e.mode==="group"?this._handleReplaceDropAction(n,d,e,o):this._handleShiftDropAction(n,d,e,o),this._dragDropUpdateDropItemAttributes(n,d,e.mode,o),this._cdr.detectChanges()}_handleShiftDropAction(e,o,t,n){let{allItems:d,itemsToMove:m,itemsAfterDropItem:s,dropItemItems:g}=this._getNewDragDropItemsPosition(e,o,n);this[n]=[...d,...t.insertAt==="after"?g:[],...m,...t.insertAt==="after"?[]:g,...s]}_handleReplaceDropAction(e,o,t,n){let{allItems:d,itemsToMove:m,itemsAfterDropItem:s,dropItemItems:g}=this._getNewDragDropItemsPosition(e,o,n);this[n]=[...d,...g,...m,...s]}_createGroup(e,o){let t=this[o],n=t[e.draggedItemIndex],d=t[e.replacedItemIndex];return n.parent=d,d.children.push(n),t}_getNewDragDropItemsPosition(e,o,t){let n=this[t],d=n.findIndex(V=>V===e),m=this._findItemChildren(e,t),s=n.splice(d,m.length+1),g=n.findIndex(V=>V===o),x=this._findItemChildren(o,t).length+1,H=n.splice(g+x,n.length+x),v=n.splice(g,x);return{allItems:n,itemsToMove:s,itemsAfterDropItem:H,dropItemItems:v}}_findItemChildren(e,o){let t=this[o],n=t.length,d=t.indexOf(e),m=this._getItemParents(e,o),s=[];for(;d++<n;){let g=t[d];if(!g?.parent||m.includes(g.parent))break;s.push(g)}return s}_getItemParents(e,o){let t=[],n=e.parent||null;for(;n&&n!==null;)t.push(n),n=n.parent||null;return t}_dragDropUpdateDropItemAttributes(e,o,t,n){e.parent&&e.parent.children.splice(e.parent.children.indexOf(e),1),e.level=o.level+(t==="group"?1:0),t==="group"?(e.parent=o,o.children.push(e)):(e.parent=o.parent,o.parent?.children.push(e)),this._findItemChildren(e,n).forEach(m=>{m.level=this._getItemParents(m,n).length})}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275cmp=f({type:l,selectors:[["fdk-dnd-default-example"]],decls:15,vars:12,consts:[["listRenderer",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["fdkDndList","",1,"fdk-sortable-list",3,"itemDropped","dropMode","items"],["fdkDndItem","",1,"fdk-sortable-list__item",3,"ngStyle"]],template:function(o,t){if(o&1&&(a(0,"p")(1,"code"),r(2,`[dropMode]="'shift'"`),i(),r(3,":"),i(),I(4,ke,0,0,"ng-template",1),a(5,"p")(6,"code"),r(7,`[dropMode]="'group'"`),i()(),I(8,we,0,0,"ng-template",1),a(9,"p")(10,"code"),r(11,`[dropMode]="'auto'"`),i()(),I(12,Se,0,0,"ng-template",1)(13,Ae,3,2,"ng-template",null,0,X)),o&2){let n=Q(14);p(4),c("ngTemplateOutlet",n)("ngTemplateOutletContext",b(6,Ce,t.values)),p(4),c("ngTemplateOutlet",n)("ngTemplateOutletContext",b(8,ye,t.values2)),p(4),c("ngTemplateOutlet",n)("ngTemplateOutletContext",b(10,Ee,t.values3))}},dependencies:[Z,R,N,O,F],styles:[`.cdk-drag-dragging{z-index:15;background-color:#fff;background-color:var(--sapList_Background, #fff);opacity:.8;transition:box-shadow .2s cubic-bezier(0,0,.2,1);box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.fd-replace-indicator{position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none;border-width:.125rem;border-style:solid;background-color:transparent;border-color:#0854a0;border-color:var(--sapContent_DragAndDropActiveColor)}.fd-replace-indicator:before{content:"";display:block;position:absolute;width:100%;height:100%;top:0;left:0;background-color:#0854a0;background-color:var(--sapContent_DragAndDropActiveColor, #0854a0);opacity:.5}.cdk-drag{cursor:grab}.cdk-drag.cdk-drag-dragging{cursor:grabbing}.cdk-drag-dragging{outline:none;cursor:grabbing;box-shadow:0 0 0 .0625rem #00000026,0 .625rem 1.875rem #0000004d}.cdk-drag-disabled{cursor:default}.fd-dnd-placeholder{top:0;left:0;position:absolute;opacity:.3;z-index:-1}.fd-dnd-item{position:relative;cursor:grab}.fd-dnd-item.fd-dnd-on-drag{background-color:#fff;background-color:var(--sapList_Background, #fff);z-index:15;cursor:grabbing}.drop-area__line{z-index:9999;position:absolute;background:#0854a0;background:var(--sapContent_DragAndDropActiveColor, #0854a0)}.drop-area__line--vertical{top:0;height:calc(100% - .5rem);width:2px}.drop-area__line--vertical.after{right:.2rem}.drop-area__line--vertical.before{left:-.3rem}.drop-area__line--vertical:before{background-color:#fff;background-color:var(--sapList_Background, #fff);content:"";position:absolute;left:-.2rem;top:-.5rem;border-radius:50%;width:.5rem;height:.5rem;border-width:.125rem;border-style:solid;border-color:#0854a0;border-color:var(--sapContent_DragAndDropActiveColor, #0854a0)}.drop-area__line--horizontal{left:0;width:100%;height:2px}.drop-area__line--horizontal.before{top:0}.drop-area__line--horizontal.after{bottom:0}.drop-area__line--horizontal:before{background-color:#fff;background-color:var(--sapList_Background, #fff);content:"";position:absolute;left:0;top:-.2rem;border-radius:50%;width:.5rem;height:.5rem;border-width:.125rem;border-style:solid;border-color:#0854a0;border-color:var(--sapContent_DragAndDropActiveColor, #0854a0)}.fd-dnd-list{position:relative}
`,`.fdk-sortable-list__item{--fdItemShift: 0rem;box-sizing:border-box;display:block;width:20rem;max-width:100%;background:var(--sapList_Background);padding:1rem .8rem;padding-left:calc(.8rem + var(--fdItemShift));border-bottom:var(--sapList_BorderWidth) solid var(--sapList_BorderColor)}.fdk-sortable-list__item.fd-dnd-on-drag{z-index:10000;opacity:.9}
`],encapsulation:2,changeDetection:0})}}return l})(),U=(l=10)=>Array.from(Array(l)).map((u,e)=>({name:`List item ${e+1}`,parent:null,children:[],level:0}));var Te=l=>({"--fdItemShift":l});function Pe(l,u){if(l&1&&(a(0,"div",7),r(1),i()),l&2){let e=u.$implicit;c("ngStyle",b(3,Te,"calc("+e.level+" * 2rem)")),k("data-level",e.level),p(),T(" List item ",e.name," ")}}var be=(()=>{class l{constructor(){this.values=Le(),this.dropMode="all",this.dragMode="all",this.simulateDelay=!1,this.loading=!1,this._cdr=E(z),this.dragoverPredicate=(e,o,t,n)=>{if(console.log(e,o,t,n),this.dragMode==="all")return!0;if(this.dragMode==="none")return!1;let d=D(t+1);return!!(!d||d&&D(n+1))},this.predicate=(e,o,t)=>{let d=this.dropMode==="all"?!0:this.dropMode==="none"?!1:!!(D(t.draggedItemIndex+1)&&D(t.replacedItemIndex+1));return console.log(e,o,t),this.simulateDelay?G(d).pipe(Y(2e3)):d}}onPredicateCalculating(e){this.loading=e,this._cdr.detectChanges()}onItemDropped(e){let o=this.values,t=o[e.draggedItemIndex],n=o[e.replacedItemIndex];e.mode==="group"?this._handleReplaceDropAction(t,n,e):this._handleShiftDropAction(t,n,e),this._dragDropUpdateDropItemAttributes(t,n,e.mode),this._cdr.detectChanges()}_handleShiftDropAction(e,o,t){let{allItems:n,itemsToMove:d,itemsAfterDropItem:m,dropItemItems:s}=this._getNewDragDropItemsPosition(e,o);this.values=[...n,...t.insertAt==="after"?s:[],...d,...t.insertAt==="after"?[]:s,...m]}_handleReplaceDropAction(e,o,t){let{allItems:n,itemsToMove:d,itemsAfterDropItem:m,dropItemItems:s}=this._getNewDragDropItemsPosition(e,o);this.values=[...n,...s,...d,...m]}_createGroup(e){let o=this.values,t=o[e.draggedItemIndex],n=o[e.replacedItemIndex];return t.parent=n,n.children.push(t),o}_getNewDragDropItemsPosition(e,o){let t=this.values,n=t.findIndex(v=>v===e),d=this._findItemChildren(e),m=t.splice(n,d.length+1),s=t.findIndex(v=>v===o),y=this._findItemChildren(o).length+1,x=t.splice(s+y,t.length+y),H=t.splice(s,y);return{allItems:t,itemsToMove:m,itemsAfterDropItem:x,dropItemItems:H}}_findItemChildren(e){let o=this.values,t=o.length,n=o.indexOf(e),d=this._getItemParents(e),m=[];for(;n++<t;){let s=o[n];if(!s?.parent||d.includes(s.parent))break;m.push(s)}return m}_getItemParents(e){let o=[],t=e.parent||null;for(;t&&t!==null;)o.push(t),t=t.parent||null;return o}_dragDropUpdateDropItemAttributes(e,o,t){e.parent&&e.parent.children.splice(e.parent.children.indexOf(e),1),e.level=o.level+(t==="group"?1:0),t==="group"?(e.parent=o,o.children.push(e)):(e.parent=o.parent,o.parent?.children.push(e)),this._findItemChildren(e).forEach(d=>{d.level=this._getItemParents(d).length})}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275cmp=f({type:l,selectors:[["fdk-dnd-disabled-example"]],decls:26,vars:19,consts:[[3,"ngModelChange","ngModel"],["fd-button","","value","all"],["fd-button","","value","none"],["fd-button","","value","odd"],["label","Simulate delay",3,"ngModelChange","ngModel"],["aria-labelledby","fd-busy-indicator-label-1","title","Block Wrapper",3,"loading","block"],["fdkDndList","",1,"fdk-sortable-list",3,"itemDropped","dropPredicateCalculating","dropPredicate","dropMode","items","dragoverPredicate"],["fdkDndItem","",1,"fdk-sortable-list__item",3,"ngStyle"]],template:function(o,t){o&1&&(a(0,"p"),r(1,"Drop predicate logic:"),i(),a(2,"div")(3,"fd-segmented-button",0),B("ngModelChange",function(d){return L(t.dropMode,d)||(t.dropMode=d),d}),a(4,"button",1),r(5,"Enable D&D for all items"),i(),a(6,"button",2),r(7,"Disable D&D for all items"),i(),a(8,"button",3),r(9,"Enable D&D for odd items in the list"),i()()(),a(10,"div")(11,"fd-checkbox",4),B("ngModelChange",function(d){return L(t.simulateDelay,d)||(t.simulateDelay=d),d}),i()(),a(12,"p"),r(13,"Dragover predicate logic:"),i(),a(14,"div")(15,"fd-segmented-button",0),B("ngModelChange",function(d){return L(t.dragMode,d)||(t.dragMode=d),d}),a(16,"button",1),r(17,"All items can be dragged over another items"),i(),a(18,"button",2),r(19,"Items cannot be dragged over each other"),i(),a(20,"button",3),r(21,"Odd items can be dragged only over odd ones"),i()()(),a(22,"fd-busy-indicator",5)(23,"div",6),A("itemDropped",function(d){return t.onItemDropped(d)})("dropPredicateCalculating",function(d){return t.onPredicateCalculating(d)}),S(24,Pe,2,5,"div",7,w),i()()),o&2&&(p(2),_("margin-bottom",1,"rem"),p(),P("ngModel",t.dropMode),p(7),_("margin-bottom",1,"rem"),p(),P("ngModel",t.simulateDelay),p(3),_("margin-bottom",1,"rem"),p(),P("ngModel",t.dragMode),p(7),_("width",20,"rem"),c("loading",t.loading)("block",!0),p(),_("width",20,"rem"),c("dropPredicate",t.predicate)("dropMode","shift")("items",t.values)("dragoverPredicate",t.dragoverPredicate),p(),M(t.values))},dependencies:[pe,le,ie,re,ne,oe,de,te,R,N,O,F],styles:[`.cdk-drag-dragging{z-index:15;background-color:#fff;background-color:var(--sapList_Background, #fff);opacity:.8;transition:box-shadow .2s cubic-bezier(0,0,.2,1);box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.fd-replace-indicator{position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none;border-width:.125rem;border-style:solid;background-color:transparent;border-color:#0854a0;border-color:var(--sapContent_DragAndDropActiveColor)}.fd-replace-indicator:before{content:"";display:block;position:absolute;width:100%;height:100%;top:0;left:0;background-color:#0854a0;background-color:var(--sapContent_DragAndDropActiveColor, #0854a0);opacity:.5}.cdk-drag{cursor:grab}.cdk-drag.cdk-drag-dragging{cursor:grabbing}.cdk-drag-dragging{outline:none;cursor:grabbing;box-shadow:0 0 0 .0625rem #00000026,0 .625rem 1.875rem #0000004d}.cdk-drag-disabled{cursor:default}.fd-dnd-placeholder{top:0;left:0;position:absolute;opacity:.3;z-index:-1}.fd-dnd-item{position:relative;cursor:grab}.fd-dnd-item.fd-dnd-on-drag{background-color:#fff;background-color:var(--sapList_Background, #fff);z-index:15;cursor:grabbing}.drop-area__line{z-index:9999;position:absolute;background:#0854a0;background:var(--sapContent_DragAndDropActiveColor, #0854a0)}.drop-area__line--vertical{top:0;height:calc(100% - .5rem);width:2px}.drop-area__line--vertical.after{right:.2rem}.drop-area__line--vertical.before{left:-.3rem}.drop-area__line--vertical:before{background-color:#fff;background-color:var(--sapList_Background, #fff);content:"";position:absolute;left:-.2rem;top:-.5rem;border-radius:50%;width:.5rem;height:.5rem;border-width:.125rem;border-style:solid;border-color:#0854a0;border-color:var(--sapContent_DragAndDropActiveColor, #0854a0)}.drop-area__line--horizontal{left:0;width:100%;height:2px}.drop-area__line--horizontal.before{top:0}.drop-area__line--horizontal.after{bottom:0}.drop-area__line--horizontal:before{background-color:#fff;background-color:var(--sapList_Background, #fff);content:"";position:absolute;left:0;top:-.2rem;border-radius:50%;width:.5rem;height:.5rem;border-width:.125rem;border-style:solid;border-color:#0854a0;border-color:var(--sapContent_DragAndDropActiveColor, #0854a0)}.fd-dnd-list{position:relative}
`,`.fdk-sortable-list__item{--fdItemShift: 0rem;box-sizing:border-box;display:block;width:20rem;max-width:100%;background:var(--sapList_Background);padding:1rem .8rem;padding-left:calc(.8rem + var(--fdItemShift));border-bottom:var(--sapList_BorderWidth) solid var(--sapList_BorderColor)}.fdk-sortable-list__item.fd-dnd-on-drag{z-index:10000;opacity:.9}.fd-dnd-item--disabled{background-color:red}
`],encapsulation:2,changeDetection:0})}}return l})(),Le=(l=10)=>Array.from(Array(l)).map((u,e)=>({name:`List item ${e+1}`,parent:null,children:[],level:0}));var Be="default-example/default-example.component.html",ze="default-example/default-example.component.ts",Fe="disabled-example/disabled-example.component.html",Ne="disabled-example/disabled-example.component.ts",_e=(()=>{class l{constructor(){this.defaultExample=[{code:C(Be),language:"html",fileName:"default-example"},{code:C(ze),language:"typescript",fileName:"default-example",selector:"dnd-default-example",component:"DefaultExampleComponent"}],this.disabledExample=[{code:C(Fe),language:"html",fileName:"disabled-example"},{code:C(Ne),language:"typescript",selector:"dnd-disabled-example",fileName:"disabled-example",component:"DisabledExampleComponent"}]}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275cmp=f({type:l,selectors:[["app-dnd"]],decls:90,vars:4,consts:[["id","simple","componentName","drag-n-drop"],[3,"hasBackground"],[3,"exampleFiles"],["id","disabled","componentName","drag-n-drop"]],template:function(o,t){o&1&&(a(0,"fd-docs-section-title",0),r(1,"Basic example"),i(),a(2,"description")(3,"p"),r(4," Drag & Drop container should be decorated with "),a(5,"code"),r(6,"fdkDndList"),i(),r(7," directive, which accepts "),a(8,"code"),r(9,"[items]"),i(),r(10," input property with the array of draggable items. "),i(),a(11,"p"),r(12,"Developers can define type of drop action by specifying "),a(13,"code"),r(14,"[dropMode]"),i(),r(15," input property:"),i(),a(16,"ul")(17,"li")(18,"code"),r(19,"shift"),i(),r(20," will highlight element that's being currently hovered with dragged item with the line, indicating that dragged item will be placed before or after the hovered element. "),i(),a(21,"li")(22,"code"),r(23,"group"),i(),r(24," will highlight element that's being currently hovered with dragged item by changing element's background, indicating that dragged item will replace currently hovered element. This options is suitable for grouping scenarios, when dropping item on another item should create a group, where dropped item will become a child item of hovered one. "),i(),a(25,"li")(26,"code"),r(27,"auto"),i(),r(28," will combine both approaches described above, and will select appropriate action depending on the coordinates of dragged item. By default it will apply "),a(29,"code"),r(30,"group"),i(),r(31," mode, if percentage of the dragged element area which hovers over the hovered item is less than a "),a(32,"code"),r(33,"[threshold]"),i(),r(34," percentage. Developers can specify the threshold percentage of dragged item over another item to switch between "),a(35,"code"),r(36,"group"),i(),r(37," and "),a(38,"code"),r(39,"shift"),i(),r(40," modes. "),i()(),a(41,"p"),r(42,"Each draggable item element should be decorated with "),a(43,"code"),r(44,"fdkDndItem"),i(),r(45," directive."),i()(),a(46,"component-example",1),h(47,"fdk-dnd-default-example"),i(),h(48,"code-example",2)(49,"separator"),a(50,"fd-docs-section-title",3),r(51,"Disabled example"),i(),a(52,"description")(53,"p"),r(54,"Sometimes, dragged item should not be able to drop over some items."),i(),a(55,"p"),r(56," For this purpose, "),a(57,"code"),r(58,"fdkDndList"),i(),r(59," directive can accept input property "),a(60,"code"),r(61,"[dropPredicate]"),i(),r(62," as a function, returning boolean result whether the dragged item can be dropped on the item it's currently hovering. "),i(),a(63,"p"),r(64," Drag&Drop list supports async evaluation of this function, which may come in handy, when calculation should be done on the remote backend side. "),i(),a(65,"p"),r(66," Additionally, developers can leverage "),a(67,"code"),r(68,"[dragoverPredicate]"),i(),r(69," function. It's purpose is to calculate whether the dragged item can be dragged over a particular item. "),i(),a(70,"p"),r(71," The difference between "),a(72,"code"),r(73,"[dropPredicate]"),i(),r(74," and "),a(75,"code"),r(76,"[dragoverPredicate]"),i(),r(77," is that "),a(78,"code"),r(79,"[dropPredicate]"),i(),r(80," called "),a(81,"b"),r(82,"after the drop is performed"),i(),r(83,", where "),a(84,"code"),r(85,"[dragoverPredicate]"),i(),r(86," is called when dragged item hovers another item. "),i()(),a(87,"component-example",1),h(88,"fdk-dnd-disabled-example"),i(),h(89,"code-example",2)),o&2&&(p(46),c("hasBackground",!0),p(2),c("exampleFiles",t.defaultExample),p(39),c("hasBackground",!0),p(2),c("exampleFiles",t.disabledExample))},dependencies:[me,W,se,he,ae,ce,be],encapsulation:2})}}return l})();var xe=(()=>{class l{static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275cmp=f({type:l,selectors:[["ng-component"]],decls:8,vars:0,consts:[["module","DragAndDropModule","subPackage","utils"]],template:function(o,t){o&1&&(a(0,"header"),r(1,"Drag&Drop directive"),i(),a(2,"description")(3,"p"),r(4,"Drag&Drop directive provides you with a way to easily and declaratively create drag-and-drop interfaces."),i()(),h(5,"import",0)(6,"fd-header-tabs")(7,"router-outlet"))},dependencies:[ue,W,fe,ge,ee],encapsulation:2})}}return l})();var ft=[{path:"",component:xe,data:{primary:!0},children:[{path:"",component:_e}]}],ht="drag-n-drop",bt="dnd";export{bt as API_FILE_KEY,ht as LIBRARY_NAME,ft as ROUTES};
