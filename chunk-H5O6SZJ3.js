import{Ca as u,Fb as c,Gb as p,Na as d,Qa as m,Tc as g,a,b as h,qb as l,va as f}from"./chunk-R75NSKFU.js";var o=class{constructor(){this.tagWhitelist={},this.attributeWhitelist={},this._schemaWhiteList=["http","https","ftp","mailto"],this._uriAttributes={href:!0},this._safeWrapper={iframe:null,iframeDoc:null},this.extendTags()}get defTagWhitelist(){return{A:!0,ABBR:!0,BLOCKQUOTE:!0,BR:!0,CITE:!0,CODE:!0,DL:!0,DT:!0,DD:!0,EM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,P:!0,PRE:!0,STRONG:!0,SPAN:!0,U:!0,UL:!0,OL:!0,LI:!0}}get defAttributeWhitelist(){return{class:!0,style:!0,href:!0,target:"_blank",download:!0,hreflang:!0,rel:!0,type:!0,title:!0}}extendTags(t){this.tagWhitelist=h(a(a({},this.defTagWhitelist),t),{BODY:!0})}extendAttrs(t){this.attributeWhitelist=a(a({},this.defAttributeWhitelist),t)}sanitizeHtml(t){if(t=t.trim(),t.length===0||(this._safeWrapper=this._getSafeWrapper(),!this._safeWrapper?.iframeDoc))return"";this._safeWrapper.iframeDoc.body.innerHTML=t;let r=this._makeSanitizedCopy(this._safeWrapper.iframeDoc.body);return this._removeSafeWrapper(),r.innerHTML}_makeSanitizedCopy(t){let r=t;return t.nodeType===Node.TEXT_NODE?r=t.cloneNode(!0):t.nodeType===Node.ELEMENT_NODE&&this.tagWhitelist[t.tagName]?r=this._extendLinkTarget(this._implementTag(t)):r=document.createDocumentFragment(),r}_implementTag(t){let r=this._safeWrapper?.iframeDoc?.createElement(t.tagName);if(!r)throw new Error("Failed to create node");for(let e in this.attributeWhitelist)if(this.attributeWhitelist[e]){let i=this.attributeWhitelist[e],s=t.getAttribute(e);if(e in t||e==="class"){if(this._uriAttributes[e]&&this._validateBySchema(s))continue;switch(typeof i){case"string":r.setAttribute(e,i);break;default:i&&s&&r.setAttribute(e,s)}}}for(let e of Array.from(t.childNodes)){let i=this._makeSanitizedCopy(e);i&&r.appendChild(i)}return r}_extendLinkTarget(t){if(t.tagName==="A"){let r=t.getAttribute("href");if(!r||/^#/.test(r))t.removeAttribute("target");else{let e=this.attributeWhitelist.target||"_blank";t.setAttribute("target",e.toString())}}return t}_getSafeWrapper(){let t=document.createElement("iframe");if(t.sandbox===void 0)return console.warn("Your browser does not support sandboxed iframes. Please upgrade to a modern browser."),null;t.setAttribute("sandbox","allow-same-origin"),t.style.setProperty("display","none"),document.body.appendChild(t);let r=t.contentDocument||t.contentWindow?.document;return r?(r?.body||r.write("<body></body>"),{iframe:t,iframeDoc:r}):(console.warn("Could not resolve document from the provided iframe"),null)}_removeSafeWrapper(){this._safeWrapper?.iframe&&document.body.removeChild(this._safeWrapper.iframe)}_validateBySchema(t){return!!t&&t.indexOf(":")>-1&&!this._startsWithAny(t,this._schemaWhiteList)}_startsWithAny(t,r){return!!t&&r.some(e=>t.indexOf(e)===0)}};var W=(()=>{let t=class t{constructor(e){this.domSanitizer=e,this.convertedLinksDefaultTarget="_blank",this.formattedText="",this._htmlSanitizer=new o}ngOnInit(){this.render()}ngOnChanges(e){"htmlText"in e&&this.render()}render(){this._htmlSanitizer.extendAttrs({target:this.convertedLinksDefaultTarget});let e=this._htmlSanitizer.sanitizeHtml(this.htmlText??"");this.formattedText=this.domSanitizer.bypassSecurityTrustHtml(e.trim())}};t.\u0275fac=function(i){return new(i||t)(d(g))},t.\u0275cmp=m({type:t,selectors:[["fd-formatted-text"]],hostVars:9,hostBindings:function(i,s){i&2&&(l("innerHTML",s.formattedText,u),c("height",s.height)("width",s.width),p("fd-formatted-text-with-height",s.height)("fd-formatted-text-with-width",s.width))},inputs:{htmlText:"htmlText",convertedLinksDefaultTarget:"convertedLinksDefaultTarget",height:"height",width:"width"},exportAs:["fd-formatted-text"],features:[f],decls:0,vars:0,template:function(i,s){},styles:[`fd-formatted-text{display:block}fd-formatted-text.fd-formatted-text-with-height{overflow-y:auto}fd-formatted-text.fd-formatted-text-with-width{overflow-x:auto}
`],encapsulation:2,changeDetection:0});let n=t;return n})();export{W as a};
