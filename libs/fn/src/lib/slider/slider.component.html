<div class="fn-slider__wrapper">
    <ng-container [ngTemplateOutlet]="range ? rangeMode : singleMode"></ng-container>
</div>

<ng-template #singleMode>
    <div class="fn-slider__track" [style.width.%]="_progress">
        <div class="fn-slider__track-range"></div>
        <fn-slider-handle
            (mousedown)="onHandleClick($event)"
            (keydown)="onKeyDown($event)"
            [ariaLabel]="ariaLabel || 'fnSlider.minMaxDetails' | fdTranslate: { min: minValue, max: maxValue }"
            [ariaValueMax]="'fnSlider.valuemaxDetails' | fdTranslate: { value: maxValue }"
            [ariaValueMin]="'fnSlider.valueminDetails' | fdTranslate: { value: minValue }"
            [ariaLabelledBy]="ariaLabelledBy"
            [ariaValueNow]="
                _useSliderValuePrefix
                    ? ('fnSlider.valueNowDetails'
                      | fdTranslate: { value: getValuenow(_position, _sliderValueTargets.SINGLE_SLIDER) })
                    : getValuenow(_position, _sliderValueTargets.SINGLE_SLIDER)
            "
            [ariaValueText]="
                _useSliderValuePrefix
                    ? ('fnSlider.valueNowDetails'
                      | fdTranslate: { value: getValuenow(_position, _sliderValueTargets.SINGLE_SLIDER) })
                    : getValuenow(_position, _sliderValueTargets.SINGLE_SLIDER)
            "
        ></fn-slider-handle>
    </div>
</ng-template>

<ng-template #rangeMode>
    <div
        class="fn-slider__track"
        [style.width.%]="_rangeProgress"
        [style.left.%]="!_isRtl ? _handle1Position : null"
        [style.right.%]="_isRtl ? _handle1Position : null"
    >
        <fn-slider-handle
            #rangeHandle1
            (mousedown)="onHandleClick($event)"
            (keydown)="onKeyDown($event)"
            [ariaLabel]="ariaLabel || 'fnSlider.minMaxDetails' | fdTranslate: { min: minValue, max: maxValue }"
            [ariaValueMax]="'fnSlider.valuemaxDetails' | fdTranslate: { value: maxValue }"
            [ariaValueMin]="'fnSlider.valueminDetails' | fdTranslate: { value: minValue }"
            [ariaLabelledBy]="ariaLabelledBy"
            [ariaValueNow]="
                _useSliderValuePrefix
                    ? ('fnSlider.valueNowDetails'
                      | fdTranslate: { value: getValuenow(_handle1Value, _sliderValueTargets.RANGE_SLIDER1) })
                    : getValuenow(_position, _sliderValueTargets.SINGLE_SLIDER)
            "
            [ariaValueText]="
                _useSliderValuePrefix
                    ? ('fnSlider.valueNowDetails'
                      | fdTranslate: { value: getValuenow(_handle1Value, _sliderValueTargets.RANGE_SLIDER1) })
                    : getValuenow(_position, _sliderValueTargets.SINGLE_SLIDER)
            "
        ></fn-slider-handle>
        <div class="fn-slider__track-range"></div>
        <fn-slider-handle
            #rangeHandle2
            (mousedown)="onHandleClick($event)"
            (keydown)="onKeyDown($event)"
            [ariaLabel]="ariaLabel || 'fnSlider.minMaxDetails' | fdTranslate: { min: minValue, max: maxValue }"
            [ariaValueMax]="'fnSlider.valuemaxDetails' | fdTranslate: { value: maxValue }"
            [ariaValueMin]="'fnSlider.valueminDetails' | fdTranslate: { value: minValue }"
            [ariaLabelledBy]="ariaLabelledBy"
            [ariaValueNow]="
                _useSliderValuePrefix
                    ? ('fnSlider.valueNowDetails'
                      | fdTranslate: { value: getValuenow(_handle2Value, _sliderValueTargets.RANGE_SLIDER2) })
                    : getValuenow(_handle2Value, _sliderValueTargets.RANGE_SLIDER2)
            "
            [ariaValueText]="
                _useSliderValuePrefix
                    ? ('fnSlider.valueNowDetails'
                      | fdTranslate: { value: getValuenow(_handle2Value, _sliderValueTargets.RANGE_SLIDER2) })
                    : getValuenow(_handle2Value, _sliderValueTargets.RANGE_SLIDER2)
            "
        ></fn-slider-handle>
    </div>
</ng-template>
