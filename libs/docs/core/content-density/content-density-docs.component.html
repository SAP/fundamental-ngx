<fd-docs-section-title id="content-density-modes" componentName="content-density-modes">
    Content Density Modes
</fd-docs-section-title>
<description>
    <p>Content density controls the visual compactness of UI components. Three modes are available:</p>
    <ul>
        <li><code>compact</code> - Reduced spacing for dense data displays</li>
        <li><code>cozy</code> - Default spacing, optimized for touch interactions</li>
        <li><code>condensed</code> - Minimal spacing, similar to compact (some components fall back to compact)</li>
    </ul>
</description>

<separator></separator>

<fd-docs-section-title id="content-density-storage" componentName="content-density-storage">
    ContentDensityStorage
</fd-docs-section-title>
<description>
    <p>
        <code>provideContentDensity()</code> supports configurable storage of application content density preference.
        Out of the box, three storage options are available:
    </p>
    <ul>
        <li>LocalContentDensityStorage - mode is saved and read from local storage</li>
        <li>UrlContentDensityStorage - mode is saved and read from URL query parameters</li>
        <li>MemoryContentDensityStorage - mode is saved in memory</li>
    </ul>
    <p>
        This documentation page uses LocalContentDensityStorage, so if you change the content density preference from
        the toolbar or from the <code>GlobalContentDensityService</code> example, changes will be saved in local
        storage.
    </p>
    <p>Additionally, you can customize the storage key used in local storage or URL query parameters.</p>
</description>
<fd-code-snippet [file]="contentDensityStorageExampleFile"></fd-code-snippet>

<separator></separator>

<fd-docs-section-title id="content-density-service" componentName="content-density-service">
    GlobalContentDensityService
</fd-docs-section-title>
<description>
    <p>
        Content density can be maintained app-wide using the <code>GlobalContentDensityService</code>. The service
        provides a signal-based API for reactive content density tracking. Before using it, add
        <code>provideContentDensity()</code> to your application's providers.
    </p>
    <p>
        <strong>Signal API:</strong>
    </p>
    <ul>
        <li><code>currentDensitySignal</code> - A readonly signal containing the current content density mode</li>
        <li><code>updateContentDensity(mode)</code> - Method to change the global content density</li>
    </ul>
    <p>
        Note that many components only come in one size, and others (such as the button) only have
        <code>compact</code> and <code>cozy</code> sizes, so setting the size to <code>condensed</code>
        will have the same effect as compact.
    </p>
</description>
<component-example>
    <fd-content-density-example></fd-content-density-example>
</component-example>
<code-example [exampleFiles]="contentDensityExample"></code-example>

<separator></separator>

<fd-docs-section-title id="content-density-observer" componentName="content-density-observer">
    ContentDensityObserver
</fd-docs-section-title>
<description>
    <p>
        Components that need to react to content density changes can use <code>ContentDensityObserver</code>. This
        service provides signal-based properties for reactive UI updates:
    </p>
    <ul>
        <li><code>contentDensity()</code> - Signal with the current content density mode</li>
        <li><code>isCompactSignal()</code> - Signal that returns true when compact</li>
        <li><code>isCozySignal()</code> - Signal that returns true when cozy</li>
        <li><code>isCondensedSignal()</code> - Signal that returns true when condensed</li>
    </ul>
    <p>Use <code>contentDensityObserverProviders()</code> to configure the observer:</p>
    <ul>
        <li><code>supportedContentDensity</code> - Array of modes the component supports</li>
        <li><code>defaultContentDensity</code> - Fallback mode when no density is specified</li>
        <li><code>restrictChildContentDensity</code> - Forces child components to inherit this component's density</li>
    </ul>
</description>

<separator></separator>

<fd-docs-section-title id="directives" componentName="directives">Directives</fd-docs-section-title>
<description>
    <p>
        You can use directives to explicitly set the content density for components. The main directive is
        <code>[fdContentDensity]</code>, which also has three shorthand aliases: <code>[fdCompact]</code>,
        <code>[fdCozy]</code>, and <code>[fdCondensed]</code>. These aliases provide a more concise syntax.
    </p>
    <p>The directive accepts the following values:</p>
    <ul>
        <li><code>"compact"</code>, <code>"cozy"</code>, <code>"condensed"</code> - Explicit density modes</li>
        <li>
            <code>"global"</code> - Follow the global service value (default when using
            <code>[fdContentDensity]</code> without a value)
        </li>
        <li><code>"default"</code> - Use the component's default density</li>
    </ul>
    <p>
        The directive exposes a <code>densityMode</code> signal that child components can read via dependency injection.
    </p>
</description>

<separator></separator>

<fd-docs-section-title id="content-density-inheritance" componentName="content-density-inheritance">
    Inheritance and Priority
</fd-docs-section-title>
<description>
    <p>Content density follows a priority order when determining which value to use:</p>
    <ol>
        <li>
            <strong>Parent with <code>restrictChildContentDensity</code></strong> - If a parent component restricts
            child density, children inherit the parent's value
        </li>
        <li><strong>Local directive</strong> - The <code>[fdContentDensity]</code> directive on the component</li>
        <li><strong>Global service</strong> - The value from <code>GlobalContentDensityService</code></li>
        <li>
            <strong>Component default</strong> - The default configured in
            <code>contentDensityObserverProviders()</code>
        </li>
    </ol>
    <p>
        The example below demonstrates inheritance. Child components without a directive inherit from their parent.
        Components with a directive override the inherited value.
    </p>
</description>
<component-example>
    <fd-directive-usage-example></fd-directive-usage-example>
</component-example>
<code-example [exampleFiles]="directiveUsageExample"></code-example>

<separator></separator>

<fd-docs-section-title id="toggle-directive" componentName="toggle-directive">
    Toggle Directive Behavior
</fd-docs-section-title>
<description>
    <p>
        The shorthand directives (<code>[fdCompact]</code>, <code>[fdCozy]</code>, <code>[fdCondensed]</code>) accept
        boolean values. When set to <code>true</code>, they apply the specified density. When set to <code>false</code>,
        the directive reverts to the <code>'global'</code> keyword, following the global service value.
    </p>
    <p>This is useful for conditionally applying density based on component state or user preferences.</p>
</description>
<component-example>
    <fd-toggle-directive-example></fd-toggle-directive-example>
</component-example>
<code-example [exampleFiles]="toggleDirectiveExample"></code-example>

<separator></separator>

<fd-docs-section-title id="advanced-config" componentName="advanced-config">
    Advanced Configuration
</fd-docs-section-title>
<description>
    <p>
        The <code>contentDensityObserverProviders()</code> function accepts additional configuration options for
        advanced use cases:
    </p>
    <ul>
        <li>
            <code>debug: true</code> - Enables console logging for density changes. Useful for troubleshooting
            inheritance issues.
        </li>
        <li>
            <code>alwaysAddModifiers: true</code> - Always applies CSS modifier classes to the host element, even when
            not strictly required by the density logic.
        </li>
        <li>
            <code>modifiers</code> - Customize the CSS class names used for each density mode. Default classes are
            <code>is-compact</code>, <code>is-cozy</code>, and <code>is-condensed</code>.
        </li>
        <li><code>ui5Markers</code> - Configure UI5 Web Components content density markers (enabled by default).</li>
    </ul>
</description>
<component-example>
    <fd-advanced-config-example></fd-advanced-config-example>
</component-example>
<code-example [exampleFiles]="advancedConfigExample"></code-example>

<separator></separator>

<fd-docs-section-title id="ui5-webcomponents" componentName="ui5-webcomponents">
    UI5 Web Components Integration
</fd-docs-section-title>
<description>
    <p>
        The content density system automatically integrates with UI5 Web Components Angular wrappers
        (<code>&#64;fundamental-ngx/ui5-webcomponents</code>, <code>&#64;fundamental-ngx/ui5-webcomponents-fiori</code>,
        <code>&#64;fundamental-ngx/ui5-webcomponents-ai</code>).
    </p>
    <p>
        <strong>How it works:</strong> Each UI5 wrapper component uses <code>ContentDensityObserver</code> internally,
        applying the <code>data-ui5-compact-size</code> attribute directly to its host element. This gives you full
        feature parity with fundamental-ngx components, including local directive overrides.
    </p>
    <p>
        UI5 Web Components only support two density modes: <strong>cozy</strong> (default) and <strong>compact</strong>.
        The mapping is:
    </p>
    <ul>
        <li><code>cozy</code> → No attribute (UI5 default)</li>
        <li><code>compact</code> → <code>data-ui5-compact-size</code> attribute applied</li>
        <li><code>condensed</code> → <code>data-ui5-compact-size</code> attribute applied (maps to UI5 compact)</li>
    </ul>
    <p><strong>Mixed Components Example:</strong></p>
    <p>Both fundamental-ngx and UI5 wrapper components respond to the same content density settings:</p>
    <pre><code>&lt;!-- Global is COMPACT, this section overrides to COZY --&gt;
&lt;div fdCozy&gt;
    &lt;fd-button&gt;Cozy FD Button&lt;/fd-button&gt;
    &lt;ui5-button&gt;Cozy UI5 Button&lt;/ui5-button&gt;
&lt;/div&gt;</code></pre>
    <p><strong>Local Overrides:</strong></p>
    <p>
        Unlike body-level density attributes, the component-level approach enables full local override support. A
        <code>fdCozy</code> directive on a container will make both fundamental-ngx and UI5 components inside render in
        cozy mode, even if the global setting is compact.
    </p>
    <p><strong>Disable UI5 markers for specific components:</strong></p>
    <code>contentDensityObserverProviders(&#123; ui5Markers: &#123; enabled: false &#125; &#125;)</code>
</description>

<separator></separator>

<fd-docs-section-title id="deprecated-api" componentName="deprecated-api">
    Deprecated APIs (Migration Guide)
</fd-docs-section-title>
<description>
    <p>
        The <code>ContentDensityObserver</code> provides both Signal-based and Observable-based APIs. The Observable
        APIs are deprecated and will be removed in a future version. Please migrate to the Signal APIs for better
        performance and simpler code.
    </p>
    <table class="fd-table">
        <thead>
            <tr>
                <th>Deprecated API</th>
                <th>Signal Alternative</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>isCompact$</code> (Observable)</td>
                <td><code>isCompactSignal()</code></td>
            </tr>
            <tr>
                <td><code>isCozy$</code> (Observable)</td>
                <td><code>isCozySignal()</code></td>
            </tr>
            <tr>
                <td><code>isCondensed$</code> (Observable)</td>
                <td><code>isCondensedSignal()</code></td>
            </tr>
            <tr>
                <td><code>contentDensity$$</code> (Observable)</td>
                <td><code>contentDensity()</code></td>
            </tr>
            <tr>
                <td><code>value</code> (getter)</td>
                <td><code>contentDensity()</code></td>
            </tr>
            <tr>
                <td><code>isCompact</code> (getter)</td>
                <td><code>isCompactSignal()</code></td>
            </tr>
            <tr>
                <td><code>isCozy</code> (getter)</td>
                <td><code>isCozySignal()</code></td>
            </tr>
            <tr>
                <td><code>isCondensed</code> (getter)</td>
                <td><code>isCondensedSignal()</code></td>
            </tr>
            <tr>
                <td><code>subscribe()</code></td>
                <td>Use <code>effect()</code> with signals</td>
            </tr>
            <tr>
                <td><code>asObservable()</code></td>
                <td>Use <code>toObservable()</code> from <code>&#64;angular/core/rxjs-interop</code></td>
            </tr>
        </tbody>
    </table>
</description>
<component-example>
    <fd-docs-deprecated-api-example></fd-docs-deprecated-api-example>
</component-example>
<code-example [exampleFiles]="deprecatedApiExample"></code-example>
