<fd-docs-section-title id="simple" componentName="popover"> Basic Popovers </fd-docs-section-title>
<description>
    <p>
        The popover component displays contextual content when triggered by a control element. It consists of two parts:
        <code>fd-popover-control</code> (the trigger) and <code>fd-popover-body</code> (the content).
    </p>
    <p>
        <strong>When to use:</strong> Use popovers for tooltips, menus, form helpers, or any contextual information that
        should appear on demand.
    </p>
    <p><strong>Key features shown:</strong></p>
    <ul>
        <li><code>[title]</code> - Adds a tooltip for accessibility</li>
        <li><code>[placement]</code> - Controls where the popover appears (default: <code>'bottom-start'</code>)</li>
        <li><code>[disabled]</code> - Prevents the popover from opening</li>
        <li><code>[fixedPosition]</code> - Prevents position change when approaching screen edges</li>
        <li><code>[focusTrapped]</code> and <code>[focusAutoCapture]</code> - Control focus behavior</li>
        <li><code>[additionalBodyClass]</code> and <code>[additionalTriggerClass]</code> - Add custom CSS classes</li>
        <li><code>[disableScrollbar]</code> - Disables internal scrollbar in popover body</li>
        <li><code>[config]</code> - Pass multiple settings via a single configuration object</li>
    </ul>
</description>
<component-example>
    <fd-popover-example></fd-popover-example>
</component-example>
<code-example [exampleFiles]="popoverExample"></code-example>

<separator></separator>

<fd-docs-section-title id="closing" componentName="popover"> Closing Behavior </fd-docs-section-title>
<description>
    <p>Control how and when popovers close to match your UX requirements.</p>
    <p>
        <strong>When to use:</strong> Customize closing behavior for confirmation dialogs, forms that shouldn't close
        accidentally, or popovers that need to persist during navigation.
    </p>
    <p><strong>Available options:</strong></p>
    <ul>
        <li>
            <code>[closeOnOutsideClick]="false"</code> - Prevents closing when clicking outside (useful for forms or
            confirmations)
        </li>
        <li><code>[closeOnEscapeKey]="false"</code> - Prevents closing with Escape key</li>
        <li>
            <code>[closeOnNavigation]="false"</code> - Keeps popover open during router navigation (useful for
            persistent panels)
        </li>
        <li><code>[applyOverlay]="true"</code> - Adds a background overlay to focus user attention on the popover</li>
    </ul>
</description>
<component-example>
    <fd-popover-closing-example></fd-popover-closing-example>
</component-example>
<code-example [exampleFiles]="popoverClosingExample"></code-example>

<separator></separator>

<fd-docs-section-title id="trigger" componentName="popover"> Trigger Directive </fd-docs-section-title>
<description>
    <p>
        An alternative way to create popovers using the <code>fdPopoverTrigger</code> directive. This approach separates
        the trigger element from the popover component, providing more flexibility in template structure.
    </p>
    <p>
        <strong>When to use:</strong> Use the trigger directive when you need the trigger element to be separate from
        the popover in the DOM, or when integrating with existing components that can't be wrapped in
        <code>fd-popover-control</code>.
    </p>
</description>
<component-example>
    <fd-popover-trigger-example></fd-popover-trigger-example>
</component-example>
<code-example [exampleFiles]="popoverTrigger"></code-example>

<separator></separator>

<fd-docs-section-title id="header-and-footer" componentName="popover">
    Popover with Header and Footer
</fd-docs-section-title>
<description>
    <p>
        Structure your popover content with semantic header and footer sections using
        <code>fd-popover-body-header</code> and <code>fd-popover-body-footer</code> directives.
    </p>
    <p>
        <strong>When to use:</strong> Use headers for titles, navigation, or context. Use footers for action buttons
        (Save, Cancel, etc.) or secondary information. This pattern is ideal for form popovers, confirmation dialogs, or
        any popover requiring structured content.
    </p>
</description>
<component-example>
    <fd-popover-complex-example></fd-popover-complex-example>
</component-example>
<code-example [exampleFiles]="popoverComplex"></code-example>

<separator></separator>

<fd-docs-section-title id="placement" componentName="popover"> Popover Placement </fd-docs-section-title>
<description>
    <p>Control where the popover appears relative to its trigger using the <code>[placement]</code> input.</p>
    <p><strong>Available placements:</strong></p>
    <ul>
        <li><code>'top'</code>, <code>'top-start'</code>, <code>'top-end'</code></li>
        <li><code>'bottom'</code>, <code>'bottom-start'</code>, <code>'bottom-end'</code></li>
        <li><code>'left'</code>, <code>'left-start'</code>, <code>'left-end'</code></li>
        <li><code>'right'</code>, <code>'right-start'</code>, <code>'right-end'</code></li>
    </ul>
    <p>
        <strong>When to use:</strong> Choose placement based on available screen space and UX context. For example, use
        <code>'bottom-start'</code> for dropdown menus, <code>'right'</code> for side panels, or <code>'top'</code> for
        tooltips above form fields.
    </p>
</description>
<component-example>
    <fd-popover-placement-example></fd-popover-placement-example>
</component-example>
<code-example [exampleFiles]="popoverPlacementExample"></code-example>

<separator></separator>

<fd-docs-section-title id="programmatic-control" componentName="popover"> Programmatic Control </fd-docs-section-title>
<description>
    <p>Control the popover's open state programmatically using two-way binding or component methods.</p>
    <p><strong>Options:</strong></p>
    <ul>
        <li><code>[(isOpen)]</code> - Two-way binding for open state (works with signals)</li>
        <li><code>(isOpenChange)</code> - Event emitted when open state changes</li>
        <li><code>(beforeOpen)</code> - Event emitted right before the popover opens</li>
        <li>
            <code>open()</code>, <code>close()</code>, <code>toggle()</code> - Methods accessible via template reference
        </li>
    </ul>
    <p>
        <strong>When to use:</strong> Use programmatic control when you need to open/close the popover from code (e.g.,
        after an API call completes), track state changes for analytics, or coordinate multiple popovers.
    </p>
</description>
<component-example>
    <fd-popover-programmatic-open-example></fd-popover-programmatic-open-example>
</component-example>
<code-example [exampleFiles]="popoverProgrammaticExample"></code-example>

<separator></separator>

<fd-docs-section-title id="popovers-in-dialogs" componentName="popover"> Popovers in Dialogs </fd-docs-section-title>
<description>
    <p>Popovers work correctly inside dialogs and modals, maintaining proper z-index stacking and focus management.</p>
    <p>
        <strong>When to use:</strong> When you need dropdowns, date pickers, or other popover-based components inside a
        dialog. The popover will appear above the dialog content while respecting the dialog's boundaries.
    </p>
</description>
<component-example>
    <fd-popover-dialog-example></fd-popover-dialog-example>
</component-example>
<code-example [exampleFiles]="popoverDialogExample"></code-example>

<separator></separator>

<fd-docs-section-title id="popovers-inside-popover" componentName="popover"> Nested Popovers </fd-docs-section-title>
<description>
    <p>
        Popovers can be nested inside other popovers for complex UI patterns like cascading menus or multi-level
        selections.
    </p>
    <p>
        <strong>When to use:</strong> Use nested popovers for hierarchical menus, drill-down selections, or when a
        popover needs to contain components that themselves use popovers (like combobox or multi-input).
    </p>
    <p>
        <strong>Note:</strong> Be mindful of UX complexity when nesting popovers. Consider if a different pattern (like
        a dialog or side panel) might be more appropriate for deeply nested content.
    </p>
</description>
<component-example>
    <fd-popover-inside-popover-example></fd-popover-inside-popover-example>
</component-example>
<code-example [exampleFiles]="popoverInsidePopoverExample"></code-example>

<separator></separator>

<fd-docs-section-title id="fill-control-width" componentName="popover"> Popover Width Control </fd-docs-section-title>
<description>
    <p>
        Control how the popover body width relates to its trigger element using <code>[fillControlMode]</code> and
        <code>[maxWidth]</code>.
    </p>
    <p><strong>Fill modes:</strong></p>
    <ul>
        <li><code>'equal'</code> - Popover body matches the exact width of the trigger</li>
        <li><code>'at-least'</code> - Popover body has a minimum width equal to the trigger, but can grow wider</li>
        <li><code>null</code> (default) - Popover body sizes to its content</li>
    </ul>
    <p><strong>Additional options:</strong></p>
    <ul>
        <li><code>[maxWidth]</code> - Set a maximum width in pixels to prevent the popover from growing too wide</li>
    </ul>
    <p>
        <strong>When to use:</strong> Use <code>'equal'</code> for dropdowns that should match their trigger width. Use
        <code>'at-least'</code> when content might need more space but should never be narrower than the trigger. Use
        <code>[maxWidth]</code> to constrain very wide content.
    </p>
</description>
<component-example>
    <fd-popover-c-fill></fd-popover-c-fill>
</component-example>
<code-example [exampleFiles]="popoverFillExample"></code-example>

<separator></separator>

<fd-docs-section-title id="append-to" componentName="popover">
    Popover Positioning &amp; Container
</fd-docs-section-title>
<description>
    <p>Control where the popover is positioned and where its DOM element is rendered.</p>
    <p><strong>Two different concepts:</strong></p>
    <ul>
        <li>
            <code>[appendTo]</code> - Changes the <strong>positioning reference</strong>. The popover will be positioned
            relative to this element instead of the trigger. Useful when you want the popover to appear near a different
            element than what triggers it.
        </li>
        <li>
            <code>[placementContainer]</code> - Changes where the popover <strong>DOM is rendered</strong> (by default,
            popovers are rendered in <code>&lt;body&gt;</code>). The popover still appears at its normal position, but
            its DOM lives inside the specified container. Useful for z-index stacking contexts inside modals or dialogs.
        </li>
    </ul>
    <p>
        <strong>When to use <code>appendTo</code>:</strong> When the visual position of the popover should be relative
        to a different element than its trigger.
    </p>
    <p>
        <strong>When to use <code>placementContainer</code>:</strong> When you need the popover's DOM to be inside a
        specific container for CSS stacking context reasons (e.g., inside a modal with <code>isolation: isolate</code>).
    </p>
</description>
<component-example>
    <fd-popover-container-example></fd-popover-container-example>
</component-example>
<code-example [exampleFiles]="popoverContainer"></code-example>

<separator></separator>

<fd-docs-section-title id="focus-trap" componentName="popover"> Focus Management </fd-docs-section-title>
<description>
    <p>Control how focus behaves when the popover opens and closes for better accessibility.</p>
    <p><strong>Available options:</strong></p>
    <ul>
        <li>
            <code>[focusTrapped]="true"</code> - Traps focus inside the popover (Tab cycles through popover elements
            only)
        </li>
        <li><code>[focusAutoCapture]="true"</code> - Automatically moves focus into the popover when it opens</li>
        <li><code>[restoreFocusOnClose]="true"</code> - Returns focus to the trigger element when popover closes</li>
        <li>
            <code>[preventSpaceKeyScroll]="true"</code> - Prevents page scrolling when Space is pressed on the trigger
        </li>
    </ul>
    <p><strong>When to use:</strong></p>
    <ul>
        <li>Enable focus trap for popovers with interactive content (forms, buttons) to meet WCAG requirements</li>
        <li>Disable auto-capture if users should continue typing in an input while viewing popover content</li>
        <li>Disable restore focus when the popover action navigates away or focus should go elsewhere</li>
    </ul>
</description>
<component-example>
    <fd-popover-focus-example></fd-popover-focus-example>
</component-example>
<code-example [exampleFiles]="focusTrapExample"></code-example>

<separator></separator>

<fd-docs-section-title id="cdk-placement" componentName="popover"> Advanced CDK Positioning </fd-docs-section-title>
<description>
    <p>
        For fine-grained control over positioning, use <code>[cdkPositions]</code> to specify exact overlay positioning
        using Angular CDK's <code>ConnectedPosition</code> interface.
    </p>
    <p><strong>Position properties:</strong></p>
    <ul>
        <li><code>originX</code>, <code>originY</code> - Connection point on the trigger element</li>
        <li><code>overlayX</code>, <code>overlayY</code> - Connection point on the popover body</li>
        <li>Horizontal values: <code>'start' | 'center' | 'end'</code></li>
        <li>Vertical values: <code>'top' | 'center' | 'bottom'</code></li>
    </ul>
    <p>
        <strong>When to use:</strong> Use CDK positions when the standard <code>[placement]</code> options don't meet
        your needs, or when you need fallback positions (the array can contain multiple positions that are tried in
        order if the previous one doesn't fit on screen).
    </p>
</description>
<component-example>
    <fd-popover-cdk-placement-example></fd-popover-cdk-placement-example>
</component-example>
<code-example [exampleFiles]="cdkPlacementExample"></code-example>

<separator></separator>

<fd-docs-section-title id="scroll" componentName="popover"> Scroll Strategies </fd-docs-section-title>
<description>
    <p>
        Control how the popover behaves when the page is scrolled using <code>[scrollStrategy]</code>. This uses Angular
        CDK's scroll strategies.
    </p>
    <p><strong>Available strategies:</strong></p>
    <ul>
        <li>
            <strong>Reposition</strong> (default) - Popover follows the trigger as you scroll. Options include
            <code>autoClose</code> (close when scrolled off-screen) and <code>scrollThrottle</code> (performance
            optimization).
        </li>
        <li><strong>Close</strong> - Closes the popover as soon as scrolling begins</li>
        <li><strong>Block</strong> - Prevents page scrolling while popover is open</li>
        <li><strong>Noop</strong> - Does nothing; popover stays in place while content scrolls beneath it</li>
    </ul>
    <p><strong>When to use:</strong></p>
    <ul>
        <li>Use <strong>Close</strong> for tooltips or hints that should disappear on scroll</li>
        <li>Use <strong>Block</strong> for modal-like popovers requiring user attention</li>
        <li>Use <strong>Reposition</strong> with <code>autoClose: true</code> for dropdown menus</li>
    </ul>
</description>
<component-example>
    <fd-popover-scroll-example></fd-popover-scroll-example>
</component-example>
<code-example [exampleFiles]="cdkScrollExample"></code-example>

<separator></separator>

<fd-docs-section-title id="dynamic-body-height" componentName="popover"> Dynamic Content Size </fd-docs-section-title>
<description>
    <p>
        When the popover body content changes size dynamically, call <code>refreshPosition()</code> to update the
        popover's position.
    </p>
    <p>
        <strong>When to use:</strong> Call this method after async content loads, accordions expand, or any action that
        changes the popover body dimensions. Without this, the popover may overflow the screen or appear misaligned.
    </p>
</description>
<component-example>
    <fd-popover-dynamic-example></fd-popover-dynamic-example>
</component-example>
<code-example [exampleFiles]="popoverDynamicExample"></code-example>

<separator></separator>

<fd-docs-section-title id="dropdown" componentName="popover"> Dropdown Menu Pattern </fd-docs-section-title>
<description>
    <p>
        Create dropdown menus by combining a popover with menu-styled buttons. This pattern is common for action menus,
        navigation dropdowns, and contextual option lists.
    </p>
    <p>
        <strong>When to use:</strong> Use this pattern for action menus, user profile dropdowns, or any list of options
        that should appear on click. For form selections, consider using the dedicated Select or Combobox components
        instead.
    </p>
</description>
<component-example>
    <fd-popover-dropdown-example></fd-popover-dropdown-example>
</component-example>
<code-example [exampleFiles]="dropdownPopover"></code-example>

<separator></separator>

<fd-docs-section-title id="mobile-popover" componentName="popover"> Mobile Mode </fd-docs-section-title>
<description>
    <p>
        On mobile devices, popovers can transform into full-screen dialogs for better usability. Enable this with
        <code>[mobile]="true"</code>.
    </p>
    <p><strong>Setup:</strong></p>
    <ul>
        <li>Set <code>[mobile]="true"</code> on the popover</li>
        <li>Use <code>&lt;ng-template #popoverBodyContent&gt;</code> to define body content</li>
        <li>Use <code>&lt;ng-template #popoverFooterContent&gt;</code> to define footer content (optional)</li>
        <li>Configure with <code>[mobileConfig]</code> for title, close button, etc.</li>
    </ul>
    <p>
        <strong>Global configuration:</strong> Mobile mode can be configured globally using the
        <code>MOBILE_MODE_CONFIG</code> token. See the
        <a [routerLink]="['/core/global-config']" fragment="mobile-mode-config">Global Configuration Page</a>.
    </p>
    <p>
        <strong>When to use:</strong> Enable mobile mode when your app supports mobile devices and the popover contains
        significant interactive content that benefits from full-screen display.
    </p>
</description>
<component-example>
    <fd-popover-mobile-example></fd-popover-mobile-example>
</component-example>
<code-example [exampleFiles]="mobilePopover"></code-example>

<separator></separator>

<fd-docs-section-title id="dynamic-control-container-height" componentName="popover">
    Dynamic Container Height
</fd-docs-section-title>
<description>
    <p>
        When the container holding your popover trigger changes size dynamically (without user interaction), use the
        <code>fdPopoverContainer</code> directive to automatically refresh popover positions.
    </p>
    <p>
        <strong>How it works:</strong> The directive watches for size changes in its host element and triggers a
        position refresh for all open popovers inside it.
    </p>
    <p>
        <strong>When to use:</strong> Use this when popovers are inside containers that resize dynamically, such as
        collapsible panels, dynamically loaded content areas, or responsive layouts where element positions change
        without scroll or window resize events.
    </p>
</description>
<component-example>
    <fd-popover-dynamic-container-height-example></fd-popover-dynamic-container-height-example>
</component-example>
<code-example [exampleFiles]="dynamicContainerHeight"></code-example>

<separator></separator>

<fd-docs-section-title id="lazy-init-of-body" componentName="popover">
    Lazy Loading Popover Content
</fd-docs-section-title>
<description>
    <p>
        Improve performance by deferring popover body initialization until the popover is actually opened. Use
        <code>fdPopoverBody</code> directive with <code>ng-template</code> instead of <code>fd-popover-body</code>.
    </p>
    <p><strong>Behavior:</strong></p>
    <ul>
        <li>Content is created when the popover opens</li>
        <li>Content is destroyed when the popover closes</li>
        <li>Each open creates a fresh instance (constructor runs again)</li>
    </ul>
    <p>
        <strong>When to use:</strong> Use lazy loading for popovers with heavy content (complex forms, data grids,
        charts) that may never be opened, or when you have many popovers on a page. This reduces initial page load time
        and memory usage.
    </p>
</description>
<component-example>
    <fd-popover-lazy-init-of-body-example></fd-popover-lazy-init-of-body-example>
</component-example>
<code-example [exampleFiles]="lazyLoadBody"></code-example>

<separator></separator>

<fd-docs-section-title id="resizable" componentName="popover"> Resizable Popovers </fd-docs-section-title>
<description>
    <p>
        Allow users to resize the popover by setting <code>[resizable]="true"</code>. A resize handle appears
        automatically based on the popover's position.
    </p>
    <p><strong>Additional options:</strong></p>
    <ul>
        <li>Set min/max width and height on the popover body to restrict resize boundaries</li>
        <li>The resize handle position adapts automatically to the popover's placement</li>
    </ul>
    <p>
        <strong>When to use:</strong> Use resizable popovers for content that users may want to expand (code previews,
        data tables, text areas) or when the optimal size varies by use case.
    </p>
</description>
<component-example>
    <fd-popover-resizable-example></fd-popover-resizable-example>
</component-example>
<code-example [exampleFiles]="resizablePopovers"></code-example>
