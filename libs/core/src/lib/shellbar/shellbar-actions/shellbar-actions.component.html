
<div *ngIf="comboboxComponent" class="fd-shellbar__action fd-shellbar__action--desktop">
    <div class="fd-search-input">
        <ng-content select="fd-combobox"></ng-content>
    </div>
</div>



<div *ngIf="actionsCollapsed && shellbarActions.length"
        class="fd-shellbar__action fd-shellbar__action--mobile">
    <div class="fd-shellbar-collapse">
        <fd-popover [options]="{placement: 'bottom-end'}"
                    [focusTrapped]="false">
            <fd-popover-control>
                <div class="fd-shellbar-collapse--control">
                    <button fd-button [glyph]="'overflow'" class="fd-shellbar__button"
                            [attr.aria-label]="collapsedItemMenuLabel">
                        <span *ngIf="totalNotifications"
                                class="fd-counter fd-counter--notification">{{totalNotifications}}</span>
                    </button>
                </div>
            </fd-popover-control>
            <fd-popover-body>
                <fd-menu>
                    <ul fd-menu-list
                        *ngIf="!showCollapsedProducts">
                        <div *ngFor="let action of shellbarActions"
                                class="fd-menu__addon-before">
                            <span [ngClass]="'sap-icon--' + action.glyph"></span>
                        </div>
                        <li fd-menu-item
                            *ngFor="let action of shellbarActions"
                            (click)="itemClicked(action, $event)">
                            {{action.label}}
                        </li>
                        <div *ngIf="productSwitcher"
                                class="fd-menu__addon-before">
                            <span [ngClass]="'sap-icon--grid'"></span>
                        </div>
                        <li fd-menu-item
                            *ngIf="productSwitcher"
                            (click)="toggleCollapsedProducts($event);">
                            Product Switcher
                        </li>
                    </ul>
                    <ul fd-menu-list
                        *ngIf="showCollapsedProducts">
                        <li fd-menu-item
                            (click)="toggleCollapsedProducts($event)">
                            <span class="fd-menu__item sap-icon--nav-back"></span>
                        </li>
                        <hr>
                        <li fd-menu-item
                            *ngFor="let product of productSwitcher"
                            (click)="itemClicked(product, $event)">
                            {{product.title}}
                        </li>
                    </ul>
                </fd-menu>
            </fd-popover-body>
        </fd-popover>
    </div>
</div>
<ng-content></ng-content>
<ng-content select="fd-shellbar-action"></ng-content>
<ng-container *ngIf="user">
    <div class="fd-shellbar__action">
        <div class="fd-user-menu">
            <fd-popover [options]="{placement: 'bottom-end'}"
                        [focusTrapped]="false">
                <fd-popover-control>
                    <div class="fd-user-menu__control">
                        <span *ngIf="!user.image" fd-identifier 
                            [size]="'s'" 
                            [circle]="true" 
                            [colorAccent]='user.colorAccent'>
                                {{user.initials}}
                        </span>
                        <span *ngIf="user.image" fd-identifier
                            [size]="'s'" 
                            [circle]="true" 
                            class="fd-identifier--thumbnail"
                            [ngStyle]="{'background-image': 'url(' + user.image + ')'}">
                        </span>
                    </div>
                </fd-popover-control>
                <fd-popover-body>
                    <fd-menu>
                        <ul fd-menu-list>
                            <li fd-menu-item
                                *ngFor="let item of userMenu"
                                (click)="itemClicked(item, $event)">
                                {{item.text}}
                            </li>
                        </ul>
                    </fd-menu>
                </fd-popover-body>
            </fd-popover>
        </div>
    </div>
</ng-container>
<ng-container *ngIf="productSwitcher">
    <div class="fd-shellbar__action fd-shellbar__action--desktop">
        <div class="fd-product-switcher">
            <fd-popover [options]="{placement: 'bottom-end'}"
                        [focusTrapped]="false">
                <fd-popover-control>
                    <button fd-button [glyph]="'grid'" class="fd-shellbar__button"></button>
                </fd-popover-control>
                <fd-popover-body>
                    <div class="fd-product-switcher__body">
                        <nav>
                            <ul class="fd-product-switcher__body--list">
                                <li *ngFor="let product of productSwitcher"
                                    (click)="itemClicked(product, $event)"
                                    class="fd-product-switcher__body--list-item">
                                    <span class="fd-product-switcher__product-icon">
                                        <img [src]="product.image">
                                    </span>
                                    <span class="fd-product-switcher__product-title">
                                        {{product.title}}
                                    </span>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </fd-popover-body>
            </fd-popover>
        </div>
    </div>
</ng-container>

