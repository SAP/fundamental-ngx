<div
    #layout
    cdkDropListGroup
    fdDndKeyboardGroup
    class="fd-fixed-card-layout__card-layout fd-fixed-card-layout__card-layout--columns-{{ this._numberOfColumns }}"
    [style.height]="_containerHeight + 'px'"
    [groups]="_cardColumns"
    orientation="horizontal"
    [customMoveFn]="_customMoveFn"
    [customTransferFn]="_customTransferFn"
    [disableKeyboardDragDrop]="disableDragDrop"
    [attr.dir]="_dir"
>
    <div
        #dropList
        *ngFor="let card of _cardsArray; let cardIndex = index"
        cdkDropList
        class="fd-fixed-card-layout__wrapper"
        [class.fd-fixed-card-layout__wrapper--last]="_isSingleInColumn(card)"
        [style.width.%]="100 / _numberOfColumns"
        [cdkDropListDisabled]="disableDragDrop"
        [cdkDropListData]="cardIndex"
        (cdkDropListEntered)="_calculateContainerHeight()"
    >
        <div
            cdkDrag
            fdDndKeyboardItem
            tabindex="0"
            class="fd-fixed-card-layout__card"
            cdkDragPreviewClass="fd-fixed-card-layout__card-preview"
            [cdkDragData]="card"
            [cdkDragStartDelay]="dragStartDelay"
            [itemIndex]="_getItemIndex(card)"
            [groupIndex]="_getGroupIndex(card)"
            (cdkDragDropped)="_onDragDrop($event)"
        >
            <fd-fixed-card-layout-item>
                <ng-container *ngTemplateOutlet="card?.template"> </ng-container>
            </fd-fixed-card-layout-item>

            <div *cdkDragPlaceholder class="fd-fixed-card-layout__card-placeholder">
                <ng-container *ngTemplateOutlet="card?.template"></ng-container>
            </div>
        </div>
    </div>

    <ng-container *ngFor="let column of _cardColumns; let last = last; let index = index">
        <div *ngIf="!last" class="fd-fixed-card-layout__clearfix" [style.order]="index + 1"></div>
    </ng-container>
</div>
