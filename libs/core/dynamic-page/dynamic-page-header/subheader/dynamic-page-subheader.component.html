<div class="fd-dynamic-page__collapsible-header-container">
    <section
        role="region"
        class="fd-dynamic-page__collapsible-header"
        [attr.aria-label]="headerAriaLabel"
        [attr.aria-hidden]="_dynamicPageService.collapsed()"
        [attr.id]="collapsibleHeaderId"
        #headerContent
    >
        <ng-content></ng-content>
    </section>
    @if (collapsible) {
        <div class="fd-dynamic-page__collapsible-header-visibility-container" #pincollapseContainer>
            <div class="fd-dynamic-page__collapsible-header-visibility-container--left-gradient"></div>
            <div role="toolbar" class="fd-dynamic-page__collapsible-header-visibility-container--button-group">
                <button
                    fd-button
                    class="fd-dynamic-page__collapse-button"
                    aria-haspopup="true"
                    [ariaLabel]="_toggleButtonAriaLabel"
                    [attr.title]="_toggleButtonAriaLabel"
                    [attr.aria-expanded]="!_dynamicPageService.collapsed()"
                    [attr.aria-controls]="id"
                    (click)="toggleCollapse()"
                >
                    <fd-icon [glyph]="_dynamicPageService.collapsed() ? 'slim-arrow-down' : 'slim-arrow-up'"></fd-icon>
                </button>
                @if (pinnable && !_dynamicPageService.collapsed()) {
                    <button
                        fd-button
                        class="fd-dynamic-page__pin-button"
                        [ariaLabel]="_pinButtonAriaLabel"
                        [attr.title]="_pinButtonAriaLabel"
                        [toggled]="_pinned"
                        (click)="togglePinned()"
                    >
                        <fd-icon glyph="pushpin-off"></fd-icon>
                    </button>
                }
            </div>
            <div class="fd-dynamic-page__collapsible-header-visibility-container--right-gradient"></div>
        </div>
    }
</div>
