<fd-calendar-header
    [currentlyDisplayed]="_currentlyDisplayed"
    [activeView]="activeView"
    [id]="id"
    [calendarYearGrid]="yearGrid"
    (closeClicked)="closeClicked.emit()"
    (nextClicked)="handleNextArrowClick()"
    (previousClicked)="handlePreviousArrowClick()"
    [previousButtonDisabled]="previousButtonDisabled"
    [nextButtonDisabled]="nextButtonDisabled"
    (activeViewChange)="handleActiveViewChange($event)"
></fd-calendar-header>
@if (_currentlyDisplayed) {
    @if (activeView === 'day') {
        <fd-calendar-day-view
            [selectedDate]="selectedDate"
            [selectedMultipleDates]="selectedMultipleDates"
            [selectedRangeDate]="selectedRangeDate"
            [selectedMultipleDateRanges]="selectedMultipleDateRanges"
            (selectedDateChange)="selectedDateChanged($event)"
            (selectedMultipleDatesChange)="selectedMultipleDatesChanged($event)"
            (selectedRangeDateChange)="selectedRangeDateChanged($event)"
            (selectedMultipleDateRangesChange)="selectedMultipleDateRangesChanged($event)"
            [showWeekNumbers]="showWeekNumbers"
            [allowMultipleSelection]="allowMultipleSelection"
            [markWeekends]="markWeekends"
            [currentlyDisplayed]="_currentlyDisplayed"
            [startingDayOfWeek]="getWeekStartDay()"
            [disableFunction]="disableFunction"
            [disableRangeEndFunction]="disableRangeEndFunction"
            [disableRangeStartFunction]="disableRangeStartFunction"
            [calType]="calType"
            [id]="id"
            [rangeHoverEffect]="rangeHoverEffect"
            [specialDaysRules]="specialDaysRules"
            [focusEscapeFunction]="escapeFocusFunction"
            (nextMonthSelect)="displayNextMonth()"
            (previousMonthSelect)="displayPreviousMonth()"
        ></fd-calendar-day-view>
    } @else if (activeView === 'month') {
        <fd-calendar-month-view
            [monthSelected]="_currentlyDisplayed.month"
            [year]="_currentlyDisplayed.year"
            [id]="id"
            [focusEscapeFunction]="escapeFocusFunction"
            [isDateRangeMonthYearFormat]="isDateRangeMonthFormat()"
            [selectedRangeDate]="selectedRangeDate"
            [rangeHoverEffect]="rangeHoverEffect"
            (selectedRangeDateChange)="selectedRangeDateChanged($event)"
            (monthClicked)="handleMonthViewChange($event)"
        ></fd-calendar-month-view>
    } @else if (activeView === 'year') {
        <fd-calendar-year-view
            [yearSelected]="_currentlyDisplayed.year"
            [yearViewGrid]="yearGrid"
            [id]="id"
            [focusEscapeFunction]="escapeFocusFunction"
            [isDateRangeYearFormat]="isDateRangeYearFormat()"
            [selectedRangeDate]="selectedRangeDate"
            [rangeHoverEffect]="rangeHoverEffect"
            (selectedRangeDateChange)="selectedRangeDateChanged($event)"
            (yearClicked)="selectedYear($event)"
        >
        </fd-calendar-year-view>
    } @else if (activeView === 'aggregatedYear') {
        <fd-calendar-aggregated-year-view
            (yearsClicked)="selectedYears($event)"
            [yearSelected]="_currentlyDisplayed.year"
            [yearViewGrid]="yearGrid"
            [aggregatedYearsViewGrid]="aggregatedYearGrid"
            [id]="id"
            [focusEscapeFunction]="escapeFocusFunction"
        >
        </fd-calendar-aggregated-year-view>
    }
}
@if (showCalendarLegend && specialDaysRules.length > 0) {
    <fd-calendar-legend [specialDaysRules]="specialDaysRules" [col]="legendCol"> </fd-calendar-legend>
}
