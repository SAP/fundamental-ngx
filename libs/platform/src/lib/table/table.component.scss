$block: fdp-table;

$fd-table-border: 0.0625rem solid #e4e4e4;
$fd-table-border-var: var(--sapList_BorderWidth, 0.0625rem) solid var(--sapList_BorderColor, #e4e4e4);

$fd-table-header-color: #f2f2f2;
$fd-table-header-color-var: var(--sapList_HeaderBackground, #f2f2f2);

.#{$block} {
    @mixin fd-rtl {
        @at-root {
            [dir='rtl'] &,
            &[dir='rtl'] {
                @content;
            }
        }
    }

    @mixin fdp-table-hide-scrollbar {
        /* Hide scrollbar for Chrome, Safari and Opera */
        &::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    @mixin fdp-table-scrollbar-mock {
        position: absolute;
        top: 0;
        right: 0;
        height: 100%;
        box-sizing: border-box;
        border: $fd-table-border;
        border: $fd-table-border-var;
        background-color: $fd-table-header-color;
        background-color: $fd-table-header-color-var;

        @include fd-rtl() {
            left: 0;
            right: auto;
        }
    }

    .#{$block}__body-table,
    .#{$block}__header-table,
    .#{$block}__body-hs-table {
        /** table-layout:fixed does not work with absolutely positioned cells instead we need to keep each cell with defined width */
        table-layout: auto;
        width: 100%;
        /** need to keep borders separate in order to align cells which are absolutely positioned */
        border-collapse: separate;
        border-spacing: 0;
    }

    /** Temporary until arrow keyboard navigation not implemented */
    .fd-table__body:focus {
        outline-offset: -0.1875rem;
        outline-width: 0.0625rem;
        outline-width: var(--sapContent_FocusWidth, 0.0625rem);
        outline-color: #000;
        outline-color: var(--sapContent_FocusColor, #000);
        outline-style: dotted;
        outline-style: var(--sapContent_FocusStyle, dotted);
    }

    /** Fixes due to the absolute positioning */
    &.fd-table--tree,
    &.fd-table--group {
        .fd-table__body .fd-table__row {
            &,
            .fd-replace-indicator {
                height: 2.75rem;
            }
        }

        &.fd-table--compact .fd-table__body .fd-table__row {
            &,
            .fd-replace-indicator {
                height: 2rem;
            }
        }

        &.fd-table--condensed .fd-table__body .fd-table__row {
            &,
            .fd-replace-indicator {
                height: 1.563rem;
            }
        }
    }

    /** Tree table Drag & Drop fixes due to the absolute positioning */
    &.fd-table--tree {
        .fd-table__body .fd-table__row {
            &:hover {
                cursor: grab;
            }

            &:active {
                cursor: grabbing;
            }

            &.fd-dnd-on-drag {
                &.fd-dnd-placeholder {
                    padding-left: 2.8rem;

                    @include fd-rtl() {
                        padding-left: 0.5rem;
                    }
                }

                &:not(.fd-dnd-placeholder) {
                    .fdp-table__cell--selection {
                        top: 0;
                        transform: translate(-100%, 0);

                        @include fd-rtl() {
                            transform: translate(100%, 0);
                        }
                    }
                }
            }

            .fd-replace-indicator {
                top: auto;
            }
        }

        &.fd-table--condensed,
        &.fd-table--compact {
            .fd-table__row.fd-dnd-on-drag.fd-dnd-placeholder {
                padding-left: 2rem;

                @include fd-rtl() {
                    padding-left: 0.5rem;
                }
            }
        }
    }

    // In fundamental-styles there's a fix for the table row height in condensed mode, that includes absolute positioning for the checkbox
    // it's not needed here
    &.fd-table--condensed .fd-table__body .fd-table__cell--checkbox .fd-checkbox__label {
        position: relative;
        margin-top: 0;
    }

    &.#{$block}--no-outer-border {
        .#{$block}__header,
        .#{$block}__body,
        .#{$block}__body-hs {
            border-left: none;
            border-right: none;

            @include fd-rtl {
                border-left: none;
                border-right: none;

                .fd-table__cell:first-child {
                    border-right: none;
                }
            }
        }

        .#{$block}__header {
            &-scrollbar-mock,
            .fd-table__cell {
                border-top: none;
            }
        }

        .#{$block}__body {
            border-bottom: none;
        }
    }

    &__container {
        position: relative;
        overflow: hidden;
        outline: none;
    }

    &__header,
    &__body {
        position: relative;
        overflow: hidden;
        border-left: $fd-table-border;
        border-left: $fd-table-border-var;

        @include fd-rtl() {
            border-left: none;
            border-right: $fd-table-border;
            border-right: $fd-table-border-var;

            .fd-table__cell:first-child {
                border-right: none;
            }
        }

        .fd-table--fixed {
            .fd-table__header,
            .fd-table__body {
                border-right: none;
            }
        }
    }

    &__header {
        &-scrollbar-mock {
            @include fdp-table-scrollbar-mock();
        }

        .fd-table--fixed {
            overflow: hidden;
        }

        .fd-table {
            .fd-table__cell,
            .fd-table__cell--mock {
                border-top: $fd-table-border;
                border-top: $fd-table-border-var;
                border-bottom: $fd-table-border;
                border-bottom: $fd-table-border-var;
            }

            .fd-table__cell {
                margin-top: 0;
                max-height: 100%;

                .fd-table__popover--custom {
                    display: none;
                }
            }
        }
    }

    &__body {
        overflow-y: scroll;

        &-hs {
            position: relative;
            min-height: 0.5rem;
            overflow: scroll;
            border-left: $fd-table-border;
            border-left: $fd-table-border-var;

            &--empty {
                position: absolute;
                bottom: 0;
                width: 100%;

                border-color: transparent;
            }

            &-spacer {
                position: absolute;
                height: 1px;
                visibility: hidden;
            }

            @include fd-rtl() {
                border-left: none;
                border-right: $fd-table-border;
                border-right: $fd-table-border-var;
            }
        }

        .fd-table--fixed {
            @include fdp-table-hide-scrollbar();
        }
    }

    &__empty {
        &-table-message {
            padding: 1rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            align-content: center;
            width: 100%;
        }

        &:not(.fixed-height) .fd-table__row:last-of-type {
            .fd-table__cell {
                border-bottom: 0;
            }
        }

        .fd-table__body {
            border-left: none;

            @include fd-rtl() {
                border-left: $fd-table-border;
                border-left: $fd-table-border-var;
                border-right: none;
            }
        }

        &.fixed-height {
            background-color: #fff;
            background-color: var(--sapList_Background, #fff);
        }
    }

    .fd-table__cell {
        &--checkbox {
            border-left: none;
            border-right: $fd-table-border;
            border-right: $fd-table-border-var;

            & + .fd-table__cell--fixed {
                border-left: none;
            }

            @include fd-rtl() {
                border-left: $fd-table-border;
                border-left: $fd-table-border-var;

                & + .fd-table__cell {
                    border-right: none;
                }
            }
        }

        &--group {
            min-width: 100%;
            border-left: none;

            /** 
                Due to the changed table-layout group row cell may looe it's top border.
                For example when previous (relatively to the group row) row columns tolal width < 100% of the table.
            */
            &::before {
                content: '';
                display: block;
                position: absolute;
                top: -0.0625rem;
                left: 0;
                right: 0;
                border-top: $fd-table-border;
                border-top: $fd-table-border-var;
            }
        }

        &--status-indicator {
            border-left: none;
            border-right: $fd-table-border;
            border-right: $fd-table-border-var;

            @include fd-rtl {
                border-right: none;
            }
        }

        /** Temporary until column width can fit content */
        .fdp-table__navigation-indicator {
            margin: auto;
        }

        @include fd-rtl() {
            /** Because last child always a mock */
            &:nth-last-child(2):not(.#{$block}__cell--group) {
                border-left: $fd-table-border;
                border-left: $fd-table-border-var;
            }
        }
    }

    .fd-dnd-item {
        position: inherit;
        cursor: default;
    }
}
