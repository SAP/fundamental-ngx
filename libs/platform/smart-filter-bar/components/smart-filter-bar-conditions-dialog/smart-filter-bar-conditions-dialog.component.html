<fd-dialog class="fdp-smart-filter-bar__conditions-dialog">
    <fd-dialog-header>
        <ng-template fdkTemplate="header">
            <div fd-bar-left>
                <fd-bar-element>
                    <h4 [headerSize]="4" fd-title>{{ config.header }}</h4>
                </fd-bar-element>
            </div>
        </ng-template>
    </fd-dialog-header>
    <fd-dialog-body>
        @if (loaded) {
            <form>
                @for (condition of _formItems; track condition; let i = $index) {
                    <fd-layout-grid>
                        <div fdLayoutGridRow>
                            <div colGrow fdLayoutGridCol>
                                <!-- wrapping "formSubmitted" event payload as any, because it's type is more generic than we're expecting -->
                                <fdp-form-generator
                                    (formSubmitted)="_onFormSubmitted($any($event))"
                                    [formItems]="condition"
                                    [unifiedLayout]="false"
                                    columnLayout="XL3-L3-M3-S3"
                                    [noAdditionalContent]="true"
                                ></fdp-form-generator>
                            </div>
                            <div class="fdp-smart-filter-bar__actions-column" colGrow fdLayoutGridCol>
                                <button
                                    fd-button
                                    (click)="removeCondition(i)"
                                    fdType="transparent"
                                    glyph="decline"
                                    [title]="
                                        'platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle'
                                            | fdTranslate
                                    "
                                    type="button"
                                ></button>
                            </div>
                        </div>
                    </fd-layout-grid>
                }
                <fd-layout-grid>
                    <div fdLayoutGridRow>
                        <div colGrow fdLayoutGridCol>&nbsp;</div>
                        <div class="fdp-smart-filter-bar__actions-column" fdLayoutGridCol>
                            <button
                                fd-button
                                (click)="addCondition()"
                                [label]="'platformSmartFilterBar.defineConditionsAddConditionButtonLabel' | fdTranslate"
                            ></button>
                        </div>
                    </div>
                </fd-layout-grid>
            </form>
        } @else {
            <div [style.text-align]="'center'" [style.margin.rem]="1">
                <fd-busy-indicator [loading]="true"></fd-busy-indicator>
            </div>
        }
    </fd-dialog-body>
    <fd-dialog-footer>
        <fd-button-bar
            (click)="applyConditions()"
            fdType="emphasized"
            [label]="'platformSmartFilterBar.defineConditionsSubmitButtonLabel' | fdTranslate"
        >
        </fd-button-bar>
        <fd-button-bar
            (click)="_cancel()"
            fdType="transparent"
            [label]="'platformSmartFilterBar.defineConditionsCancelButton' | fdTranslate"
        ></fd-button-bar>
    </fd-dialog-footer>
</fd-dialog>
