import{a as p,b as l}from"./chunk-XDTIY373.js";import{r as h}from"./chunk-BHUOVC5R.js";import{a as u}from"./chunk-EIBM65BX.js";import{i as a}from"./chunk-66YHNWRR.js";var g=(i,t,s)=>{let e,o;return l({beforeStart:()=>{e=i.scrollLeft,o=i.scrollTop},duration:p,element:i,advance:r=>{i.scrollLeft=e+r*t,i.scrollTop=o+r*s}})},v=g;var m="scroll",_=h()?"touchend":"mouseup",c=class extends u{constructor(t){super(),this.supportsTouch=h(),this.containerComponent=t,this.mouseMove=this.ontouchmove.bind(this),this.mouseUp=this.ontouchend.bind(this),this.touchStart=this.ontouchstart.bind(this),this.supportsTouch=h(),this.cachedValue={dragX:0,dragY:0},this.startX=0,this.startY=0,this.supportsTouch?(t.addEventListener("touchstart",this.touchStart,{passive:!0}),t.addEventListener("touchmove",this.mouseMove,{passive:!0}),t.addEventListener("touchend",this.mouseUp,{passive:!0})):t.addEventListener("mousedown",this.touchStart,{passive:!0})}set scrollContainer(t){this._container=t}get scrollContainer(){return this._container}scrollTo(t,s,e=0,o=0){return a(this,null,function*(){let r=this.scrollContainer.clientHeight>0&&this.scrollContainer.clientWidth>0;for(;!r&&e>0;)yield new Promise(n=>{setTimeout(()=>{r=this.scrollContainer.clientHeight>0&&this.scrollContainer.clientWidth>0,e--,n()},o)});this._container.scrollLeft=t,this._container.scrollTop=s})}move(t,s,e){if(e){this._container.scrollLeft+=t,this._container.scrollTop+=s;return}if(this._container)return v(this._container,t,s)}getScrollLeft(){return this._container.scrollLeft}getScrollTop(){return this._container.scrollTop}_isTouchInside(t){let s=null;this.supportsTouch&&t instanceof TouchEvent&&(s=t.touches[0]);let e=this._container.getBoundingClientRect(),o=this.supportsTouch?s.clientX:t.x,r=this.supportsTouch?s.clientY:t.y;return o>=e.left&&o<=e.right&&r>=e.top&&r<=e.bottom}ontouchstart(t){let s=null;this.supportsTouch&&t instanceof TouchEvent&&(s=t.touches[0]),s?(this.startX=s.pageX,this.startY=s.pageY):(document.addEventListener("mouseup",this.mouseUp,{passive:!0}),document.addEventListener("mousemove",this.mouseMove,{passive:!0})),s&&(this._prevDragX=s.pageX,this._prevDragY=s.pageY),t instanceof MouseEvent&&(this._prevDragX=t.x,this._prevDragY=t.y),this._canScroll=this._isTouchInside(t)}ontouchmove(t){if(!this._canScroll)return;let s=this._container,e=this.supportsTouch?t.touches[0]:null,o=this.supportsTouch?e.pageX:t.x,r=this.supportsTouch?e.pageY:t.y;s.scrollLeft+=this._prevDragX-o,s.scrollTop+=this._prevDragY-r,this.fireEvent(m,{isLeft:o>this._prevDragX,isRight:o<this._prevDragX}),this.cachedValue.dragX=this._prevDragX,this.cachedValue.dragY=this._prevDragY,this._prevDragX=o,this._prevDragY=r}ontouchend(t){if(this.supportsTouch){let n=Math.abs(t.changedTouches[0].pageX-this.startX),d=Math.abs(t.changedTouches[0].pageY-this.startY);if(n<10&&d<10)return}if(!this._canScroll)return;let s=this._container,e=this.supportsTouch?t.changedTouches[0].pageX:t.x,o=this.supportsTouch?t.changedTouches[0].pageY:t.y;s.scrollLeft+=this._prevDragX-e,s.scrollTop+=this._prevDragY-o;let r=e===this._prevDragX?this.cachedValue.dragX:e;this.fireEvent(_,{isLeft:r<this._prevDragX,isRight:r>this._prevDragX}),this._prevDragX=e,this._prevDragY=o,this.supportsTouch||(document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp))}},Y=c;export{Y as a};
