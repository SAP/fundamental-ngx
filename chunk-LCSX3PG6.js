var i=new WeakMap,o=new WeakMap,m={attributes:!0,childList:!0,characterData:!0,subtree:!0},v=t=>{let e=t;return e.accessibleNameRef?p(t):e.accessibleName?e.accessibleName:void 0},p=t=>{let e=t.accessibleNameRef?.split(" ")??[],c="";return e.forEach((s,a)=>{let l=b(t,s),n=`${l&&l.textContent?l.textContent:""}`;n&&(c+=n,a<e.length-1&&(c+=" "))}),c},d=t=>{let e=new Set;u(t).forEach(l=>{e.add(l)});let c=t.accessibleNameRef,s=t.accessibleDescriptionRef,a=[c,s].filter(Boolean).join(" ");return(a?a.split(" "):[]).forEach(l=>{let n=b(t,l);n&&e.add(n)}),Array.from(e)},u=t=>{let e=t.getRootNode().querySelectorAll(`[for="${t.id}"]`);return Array.from(e)},b=(t,e)=>t.getRootNode().querySelector(`[id='${e}']`)||document.getElementById(e),k=t=>{let e=[];if(u(t).forEach(c=>{let s=c.textContent;s&&e.push(s)}),e.length)return e.join(" ")},E=t=>e=>{let c=e&&e.type==="property"&&e.name==="accessibleNameRef",s=e&&e.type==="property"&&e.name==="accessibleDescriptionRef";if(!c&&!s)return;let a=o.get(t);if(!a)return;let l=a.observedElements,n=d(t);l.forEach(r=>{n.includes(r)||f(a,r)}),n.forEach(r=>{l.includes(r)||(h(a,r),a.observedElements.push(r))}),a?.callback()},A=(t,e)=>{if(o.has(t))return;let c=d(t),s=E(t),a={host:t,observedElements:c,callback:e,invalidationCallback:s};o.set(t,a),t.attachInvalidate(s),c.forEach(l=>{h(a,l)}),e()},h=(t,e)=>{let c=i.get(e);if(!c){c={observer:null,callbacks:[]};let s=new MutationObserver(()=>{c.callbacks.forEach(l=>{l()});let a=document.getElementById(e.id);t.host.id===e.getAttribute("for")||a||f(t,e)});c.observer=s,s.observe(e,m),i.set(e,c)}c.callbacks.includes(t.callback)||c.callbacks.push(t.callback)},f=(t,e)=>{let c=i.get(e);c&&(c.callbacks=c.callbacks.filter(s=>s!==t.callback),c.callbacks.length||(c.observer?.disconnect(),i.delete(e))),t.observedElements=t.observedElements.filter(s=>s!==e)},R=t=>{let e=o.get(t);e&&([...e.observedElements].forEach(c=>{f(e,c)}),t.detachInvalidate(e.invalidationCallback),o.delete(t))},x=t=>{let e=t;return e.accessibleDescriptionRef?g(t):e.accessibleDescription?e.accessibleDescription:void 0},g=t=>{let e=t.accessibleDescriptionRef?.split(" ")??[],c="";return e.forEach((s,a)=>{let l=b(t,s),n=`${l&&l.textContent?l.textContent:""}`;n&&(c+=n,a<e.length-1&&(c+=" "))}),c};export{v as a,p as b,k as c,A as d,R as e,x as f,g};
