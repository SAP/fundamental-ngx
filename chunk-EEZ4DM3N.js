import{A as H,E as G,I as K,L as U,O as $,P as j,h as O,i as N,m as C,o as P,p as z,q,r as B,v as R,y as W}from"./chunk-2CF4RUS3.js";import"./chunk-EZDE2HNC.js";import"./chunk-6N6G2W3X.js";import"./chunk-CRMBO3VR.js";import"./chunk-KIX3ODOE.js";import{He as A,fb as F,kb as b,la as x,ne as M,oe as L,qa as k,qe as V}from"./chunk-TAFSRIM4.js";import"./chunk-FF6RGUNA.js";import"./chunk-YMOCEM3U.js";import{$b as T,Ka as u,O as y,Rb as w,Sb as p,Yc as I,ea as S,gb as m,ja as v,tb as c,ub as l,vb as h,w as g}from"./chunk-FQFR4TK3.js";var _=(()=>{class n{constructor(){this.filterTypeEnum=O,this.dataTypeEnum=N,this.source=new q(new E),this.childSource=new B(new D)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=v({type:n,selectors:[["fdp-doc-advanced-scrolling-example"]],standalone:!0,features:[T],decls:8,vars:21,consts:[["table",""],["selectionMode","multiple","relationKey","children","emptyTableMessage","No data found","bodyHeight","300px","hasChildrenKey","hasChildren",3,"dataSource","childDataSource","isTreeTable","virtualScroll","pageScrolling","pageSize","renderAhead","pageScrollingThreshold","expandOnInit"],["title","Order Line Items",3,"hideItemCount","hideSearchInput"],["name","name","key","name","label","Name","align","start",3,"sortable","filterable","dataType"],["name","description","key","description","label","Description"],["name","price","key","price.value","label","Price","align","end",3,"sortable","filterable","dataType"],["name","status","key","status","label","Status","align","center",3,"sortable","filterable","dataType"],[3,"table"]],template:function(i,r){if(i&1&&(c(0,"fdp-table",1,0),h(2,"fdp-table-toolbar",2)(3,"fdp-column",3)(4,"fdp-column",4)(5,"fdp-column",5)(6,"fdp-column",6),l(),h(7,"fdp-table-p13-dialog",7)),i&2){let a=w(1);m("dataSource",r.source)("childDataSource",r.childSource)("isTreeTable",!0)("virtualScroll",!0)("pageScrolling",!0)("pageSize",50)("renderAhead",50)("pageScrollingThreshold",80)("expandOnInit",!0),u(2),m("hideItemCount",!1)("hideSearchInput",!0),u(),m("sortable",!0)("filterable",!0)("dataType",r.dataTypeEnum.STRING),u(2),m("sortable",!0)("filterable",!0)("dataType",r.dataTypeEnum.NUMBER),u(),m("sortable",!0)("filterable",!0)("dataType",r.dataTypeEnum.STRING),u(),m("table",a)}},dependencies:[j,$,G,U,K,W,R,H,b],encapsulation:2,changeDetection:0})}}return n})(),D=class extends z{constructor(){super(...arguments),this.items=new Map,this.totalItems=200,this.startIndex=0,this.allItemsMap=new Map}rowChildrenCount(e){return g(this.totalItems)}fetch(e,t){let i=new Map;return t?.forEach(r=>{let a=this.allItemsMap.get(r),s=e?.page.currentPage;if(a||(a=J(this.totalItems,r.level+1),this.allItemsMap.set(r,a)),e?.searchInput&&(a=this.search(a,e)),e?.sortBy&&(a=this.sort(a,e)),e?.filterBy&&(a=this.filter(a,e)),s&&e?.page){let d=(s-1)*e.page.pageSize;a=a.slice(d,d+e.page.pageSize)}i.set(r,a)}),g(i).pipe(y(1e3))}filter(e,{filterBy:t}){return t.filter(({field:i})=>!!i).forEach(i=>{e=e.filter(r=>{switch(i.field){case"name":case"description":case"status":case"statusColor":return X(r,i);case"price.value":return Y(r,i);default:return!1}})}),e}search(e,{searchInput:t,columnKeys:i}){let r=t?.text||"",a=i;return r.trim()===""||a.length===0?e:e.filter(s=>a.map(o=>f(o,s)).filter(o=>!!o).map(o=>o.toString()).some(o=>o.toLocaleLowerCase().includes(r.toLocaleLowerCase())))}sort(e,{sortBy:t}){return t=t.filter(({field:i})=>!!i),t.length===0?e:e.sort((i,r)=>t.map(({field:a,direction:s})=>{let d=s===C.ASC?1:-1;return Q(i,r,a)*d}).find((a,s,d)=>a!==0||s===d.length-1)??0)}},E=class extends P{constructor(e=0){super(),this.level=e,this.items=[],this.totalItems=5e3,this.startIndex=0}fetch(e){if(this.allItems=this.allItems||J(this.totalItems,this.level),this.items=[...this.allItems],e?.searchInput&&(this.items=this.search(this.items,e)),e?.sortBy&&(this.items=this.sort(e)),e?.filterBy&&(this.items=this.filter(this.items,e)),e?.page?.currentPage){let t=(e.page.currentPage-1)*e.page.pageSize;this.items=this.items.slice(t,t+e.page.pageSize)}return g(this.items).pipe(y(1e3))}filter(e,{filterBy:t}){return t.filter(({field:i})=>!!i).forEach(i=>{e=e.filter(r=>{switch(i.field){case"name":case"description":case"status":case"statusColor":return X(r,i);case"price.value":return Y(r,i);default:return!1}})}),e}search(e,{searchInput:t,columnKeys:i}){let r=t?.text||"",a=i;return r.trim()===""||a.length===0?e:e.filter(s=>a.map(o=>f(o,s)).filter(o=>!!o).map(o=>o.toString()).some(o=>o.toLocaleLowerCase().includes(r.toLocaleLowerCase())))}sort({sortBy:e}){let t=this.items.slice();return e=e.filter(({field:i})=>!!i),e.length===0?t:t.sort((i,r)=>e.map(({field:a,direction:s})=>{let d=s===C.ASC?1:-1;return Q(i,r,a)*d}).find((a,s,d)=>a!==0||s===d.length-1)??0)}};function J(n=5e3,e=0,t=0){return new Array(n).fill(null).map(()=>({name:`Laptops ${t++} (Level ${e+1})`,description:"pede malesuada",price:{value:489.01,currency:"EUR"},status:"Out of stock",statusColor:"negative",date:new F(2020,2,5),verified:!0,hasChildren:e<2}))}var Q=(n,e,t)=>(t&&(n=f(t,n),e=f(t,e)),n>e?1:n===e?0:-1);function f(n,e){return n.split(".").reduce((t,i)=>t?t[i]:null,e)}var X=(n,e)=>{let t=e.value&&e.value.toLocaleLowerCase(),i=e.value2&&e.value2.toLocaleLowerCase()||"",r=f(e.field,n).toLocaleLowerCase(),a=!1;switch(e.strategy){case"equalTo":a=r===t;break;case"greaterThan":a=r>t;break;case"greaterThanOrEqualTo":a=r>=t;break;case"lessThan":a=r<t;break;case"lessThanOrEqualTo":a=r<=t;break;case"between":a=r>=t&&r<=i;break;case"beginsWith":a=r.startsWith(t);break;case"endsWith":a=r.endsWith(t);break;case"contains":default:a=r.includes(t)}return e.exclude?!a:a},Y=(n,e)=>{let t=Number.parseFloat(e.value),i=Number.parseFloat(e.value2)||0,r=Number.parseFloat(f(e.field,n)),a=!1;switch(e.strategy){case"greaterThan":a=r>t;break;case"greaterThanOrEqualTo":a=r>=t;break;case"lessThan":a=r<t;break;case"lessThanOrEqualTo":a=r<=t;break;case"between":a=r>=t&&r<=i;break;case"equalTo":default:a=r===t}return e.exclude?!a:a};var we=(()=>{class n{constructor(){this.childService=S(A),this.route=S(I),this.pageScrollingTableFiles=[x("advanced-scrolling/advanced-scrolling-example.component.html"),x("advanced-scrolling/advanced-scrolling-example.component.ts",{selector:"doc-advanced-scrolling-example",component:"AdvancedScrollingExampleComponent"})],this.childService.setLink(this.route.snapshot.routeConfig?.path)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=v({type:n,selectors:[["fdp-doc-advanced-examples-docs"]],standalone:!0,features:[T],decls:28,vars:1,consts:[["id","page-scrolling","componentName","table"],[3,"exampleFiles"]],template:function(i,r){i&1&&(c(0,"fd-docs-section-title",0),p(1,"Handling large amount of data"),l(),c(2,"description")(3,"p"),p(4,"One of the scenarios of using Platform Table component, is to render the large amount of items."),l(),c(5,"p"),p(6,"Storing this amount directly in memory may lead to a browser performance issues."),l(),c(7,"p"),p(8," In order to keep the performance on a normal level, Platform Table component supports lazy loading of the items on scroll, and reusing rendered row components for row items. "),l(),c(9,"p"),p(10,"Additionally, Platform Table component supports lazy loading for a child row items."),l(),c(11,"p"),p(12," For this, developers need to pass Data source class that retrieves row's children into "),c(13,"code"),p(14,"[childDataSource]"),l(),p(15," input property. "),l(),c(16,"p")(17,"strong"),p(18,"IMPORTANT:"),l(),p(19," due to complexity of the children lazy loading logic, [childDataSource] can only accept classes derived from "),c(20,"code"),p(21,"TableChildrenDataProvider"),l(),p(22,". "),l(),c(23,"p"),p(24,"This example shows combination of virtual scroll and lazy loading for item on each level."),l()(),c(25,"component-example"),h(26,"fdp-doc-advanced-scrolling-example"),l(),h(27,"code-example",1)),i&2&&(u(27),m("exampleFiles",r.pageScrollingTableFiles))},dependencies:[V,L,M,_,k,b],encapsulation:2,changeDetection:0})}}return n})();export{we as AdvancedExamplesDocsComponent};
